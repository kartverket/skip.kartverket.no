<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Hybrid Kubernetes in production pt. 3 | SKIP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://skip.kartverket.no/blog/hybrid-kubernetes-in-production-part-3"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Hybrid Kubernetes in production pt. 3 | SKIP"><meta data-rh="true" name="description" content="In this final installment of the Anthos series, we&#x27;ll talk about what we learned on the way building hybrid infrastructure
"><meta data-rh="true" property="og:description" content="In this final installment of the Anthos series, we&#x27;ll talk about what we learned on the way building hybrid infrastructure
"><meta data-rh="true" property="og:image" content="https://skip.kartverket.no/img/anthos-6.jpg"><meta data-rh="true" name="twitter:image" content="https://skip.kartverket.no/img/anthos-6.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-01-25T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://eliine.dev"><meta data-rh="true" property="article:tag" content="anthos,kubernetes,hybrid"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://skip.kartverket.no/blog/hybrid-kubernetes-in-production-part-3"><link data-rh="true" rel="alternate" href="https://skip.kartverket.no/blog/hybrid-kubernetes-in-production-part-3" hreflang="en"><link data-rh="true" rel="alternate" href="https://skip.kartverket.no/blog/hybrid-kubernetes-in-production-part-3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SKIP RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SKIP Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="SKIP JSON Feed">



<script src="https://platform.twitter.com/widgets.js"></script><link rel="stylesheet" href="/assets/css/styles.02f5925b.css">
<script src="/assets/js/runtime~main.40bcb1a1.js" defer="defer"></script>
<script src="/assets/js/main.4870c2f6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/skip.png" alt="SKIP" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/skip.png" alt="SKIP" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SKIP</b></a><a href="https://kartverket.atlassian.net/wiki/spaces/SKIPDOK" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://kartverket.atlassian.net/jira/software/projects/SKIP/boards/2/roadmap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Tech Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://kartverket.atlassian.net/wiki/spaces/SKIP" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Confluence<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/orgs/kartverket/teams/skip" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/introducing-apps-repositories">Scaling with Argo CD: Introducing the Apps Repo Architecture</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/crisis-management-exercises">Crisis Management Exercises</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/hybrid-kubernetes-in-production-part-3">Hybrid Kubernetes in production pt. 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/skip-on-plattformpodden">SKIP on Plattformpodden!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/hybrid-kubernetes-in-production-part-2">Hybrid Kubernetes in production pt. 2</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="In this final installment of the Anthos series, we&#x27;ll talk about what we learned on the way building hybrid infrastructure
"><link itemprop="image" href="https://skip.kartverket.no/img/anthos-6.jpg"><header><h1 class="title_f1Hy" itemprop="headline">Hybrid Kubernetes in production pt. 3</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-01-25T00:00:00.000Z" itemprop="datePublished">January 25, 2024</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://eliine.dev" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/eliihen.png" alt="Eline Henriksen" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://eliine.dev" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Eline Henriksen</span></a></div><small class="avatar__subtitle" itemprop="description">Product Owner and Platform Developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="Anthos in Google Cloud" src="/assets/images/anthos-6-bf519df28c4acffaa304344b0ad145aa.jpg" width="770" height="588" class="img_ev3q"></p>
<p>In this final installment of the Anthos series, we will talk about what we
learned on the way to building hybrid infrastructure at <a href="https://kartverket.no/en" target="_blank" rel="noopener noreferrer">Kartverket</a>.</p>
<p>It&#x27;s been a long journey, and there&#x27;s plenty of things we&#x27;ve learned along the
way in building a hybrid Kubernetes platform. We&#x27;ll try to share some of those
hard earned lessons in this post.</p>
<p>This newsletter is the final entry of a three part series about Anthos in
Kartverket.</p>
<ol>
<li><a href="/blog/hybrid-kubernetes-in-production-part-1">Why we chose Anthos</a></li>
<li><a href="/blog/hybrid-kubernetes-in-production-part-2">How we run Anthos</a></li>
<li>Benefits and what we would have done differently (You are here!)</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="do-you-really-need-hybrid">Do you really need hybrid?<a href="#do-you-really-need-hybrid" class="hash-link" aria-label="Direct link to Do you really need hybrid?" title="Direct link to Do you really need hybrid?">​</a></h2>
<p>When we started out, there was an assumption that it was simply impossible to
use the cloud. This came from all sides of the organization, so this was
taken as a given. SKIP was therefore started as a project to build an on-premise
Kubernetes platform to service our needs as a transition to cloud native
development principles.</p>
<p>As we moved along, a lot of these assumptions got challenged. We found that
most of these assumptions were based on misunderstandings or a lack of a deeper
understanding of cloud technologies and the surrounding legal aspects. This led
to a fear of the unknown, and subsequent inaction. In the end it turned out
that quite a lot of our workloads could indeed run in the public cloud, given some
minor adjustments.</p>
<p>Had we started out with the knowledge we have now, we would probably have
started with a public cloud provider, and then moved to hybrid when and if
we saw a need for it. Using a cloud provider&#x27;s managed Kubernetes offering
is significantly easier than running your own, and you can get started much
faster, with less risk.</p>
<p>Given our organization, we would probably have ended up with hybrid anyway, but
that complexity could potentially have been moved down the timeline to a point
where the platform was more mature.</p>
<p>Starting with hybrid is a massive undertaking, and you should have a good reason
for doing so. Do you need hybrid, or do you just need to mature your
organization? If you do, reduce the scope of the initial work to get to a
workable platform, and preferably start in the cloud, adding hybrid features
later. If you&#x27;re not sure, you probably don&#x27;t need hybrid.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-gives-your-organization-flexibility">Hybrid gives your organization flexibility<a href="#hybrid-gives-your-organization-flexibility" class="hash-link" aria-label="Direct link to Hybrid gives your organization flexibility" title="Direct link to Hybrid gives your organization flexibility">​</a></h2>
<p><img loading="lazy" alt="Illustration of cloud components" src="/assets/images/cloud-1-92f59291846076655bb737aa95d25a59.jpg" width="2880" height="1200" class="img_ev3q"></p>
<p>Now that we&#x27;ve built a platform that seamlessly runs workloads in both public
cloud and on-premise, we have a lot of flexibility in where we run our workloads
and how we manage them. Our experience is that this makes it easier for the
organization to mature legacy workloads.</p>
<p>All our greenfield projects are written with cloud native principles in mind,
which makes it trivial to run them in the cloud. Legacy workloads, however, are
not so lucky. They are often written with a lot of assumptions about the
underlying infrastructure and are not cognizant of the resources they use. This
means they are a poor fit to lift and shift to the cloud, as they will often be
expensive and inefficient.</p>
<p>With a hybrid platform, we can use our on-premise offering as a spring board for
modernization. Product teams will start by shifting their app to our on-premise
Kubernetes platform, and then gradually modernize it to be cloud native.
This method gives a few immediate benefits from the lift and shift like better
observability, developer experience and security features but also gives fewer of the
drawbacks, as the on-premise cloud is closer to the existing dependencies than a
public cloud. Once this is done, smaller chunks kan be rewritten as
microservices and moved to the cloud, communicating with the monolith seamlessly
over the hybrid network. This is sometimes referred to as the <a href="https://microservices.io/patterns/refactoring/strangler-application.html" target="_blank" rel="noopener noreferrer">strangler
application</a>.</p>
<p>This method significantly reduces the scope of refactoring, as one can focus on
gradually rewriting smaller modules instead of rewriting the entire application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-mesh-is-hard-but-maybe-a-necessary-evil-to-make-hybrid-less-painful">Service mesh is hard, but maybe a necessary evil to make hybrid less painful<a href="#service-mesh-is-hard-but-maybe-a-necessary-evil-to-make-hybrid-less-painful" class="hash-link" aria-label="Direct link to Service mesh is hard, but maybe a necessary evil to make hybrid less painful" title="Direct link to Service mesh is hard, but maybe a necessary evil to make hybrid less painful">​</a></h2>
<p><img loading="lazy" alt="Illustration of service mesh with Istio logo" src="/assets/images/mesh-1-154deaa307f1f382bd1b5c33494d1712.png" width="2200" height="917" class="img_ev3q"></p>
<p>Oh my word how we have struggled with service mesh.</p>
<p>Starting from nothing with a goal of providing a secure-by-default zero-trust
network layer with observability and traffic control is quite an undertaking,
especially when you pair that with setting up a new kubernetes-based
infrastructure from scratch. Istio is famously complex, and we&#x27;ve had our fair
share of that.</p>
<p>So how do we feel about Istio? There are various opinions in the team, but if we
average them all out, we&#x27;re content. It&#x27;s quite complex and can be hard to
debug, but it does the job. As we&#x27;ve matured and gotten more experience with
Istio, we&#x27;ve also started to see more benefits, like extensions for <a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/oauth2_filter" target="_blank" rel="noopener noreferrer">handling
OAuth2</a>
and the traffic control features for gradual rollouts which we used for
canary-testing the migration of some of our larger applications to SKIP. Not all
of these features, like EnvoyFilters, are supported by Anthos Service Mesh (ASM),
which is why we&#x27;re exploring using upstream Istio instead of ASM.</p>
<p>One thing we quickly learned is to not let the product teams configure the
service mesh directly using service mesh resources. This is a recipe for
disaster. We tried this in the beginning, and first of all it&#x27;s a huge
complexity burden for the product teams. We also started getting a lot of
weird issues when product teams would configure the mesh in ways that broke
their encapsulation. Since the service mesh is a cluster-wide feature, if one
team makes an invalid configuration, it can break other teams&#x27; workloads.
Kubernetes namespaces be damned. We&#x27;ve therefore moved to a model where the
platform team provides an abstraction through
<a href="https://github.dev/kartverket/skiperator" target="_blank" rel="noopener noreferrer">Skiperator</a> which configures the
service mesh on their behalf.</p>
<p>Finally, I think it&#x27;s prudent to ask yourself wether or not you actually need a
service mesh. If you&#x27;re running a small cluster with a few services, you&#x27;ll
probably be fine with using the built-in Kubernetes features like Ingress and
Network Policies. The observability features are nice, but you can get most of
them with a combination of <a href="https://grafana.com/docs/tempo/latest/metrics-generator/service_graphs/" target="_blank" rel="noopener noreferrer">instrumentation and
Grafana</a>.</p>
<p>If you need service mesh then limit the scope until you get comfortable with the
mesh, for example start with just mTLS and observability, and then add zero
trust networking features later.</p>
<p>Also keep in mind there is a lot of competition in the service mesh space, and
there are some interesting alternatives to Istio, like
<a href="https://linkerd.io/" target="_blank" rel="noopener noreferrer">Linkerd</a> and the up-and-coming <a href="https://cilium.io/use-cases/cluster-mesh/" target="_blank" rel="noopener noreferrer">Cilium Service
Mesh</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="anthos-helps-you-as-a-platform-team-getting-started-with-best-practices-even-if-you-plan-to-move-to-open-source-components-later">Anthos helps you as a platform team getting started with best practices.. Even if you plan to move to open source components later<a href="#anthos-helps-you-as-a-platform-team-getting-started-with-best-practices-even-if-you-plan-to-move-to-open-source-components-later" class="hash-link" aria-label="Direct link to Anthos helps you as a platform team getting started with best practices.. Even if you plan to move to open source components later" title="Direct link to Anthos helps you as a platform team getting started with best practices.. Even if you plan to move to open source components later">​</a></h2>
<p><img loading="lazy" alt="Google Anthos logo" src="/assets/images/anthos-2-1a3889bc339c3f2ac97e81d32c482cff.png" width="2200" height="917" class="img_ev3q"></p>
<p>When our platform team started out a few years ago, we picked some of the
brightest cloud engineers from within the organization and combined them with
some consultants to work on the platform. Most of these engineers had some
experience working with Kubernetes and cloud, but not building something of this
scale from scratch. The first months would therefore be a learning experience for
most of the team.</p>
<p>I think a lot of teams will be in a similar situation, and this is where a
managed service like Anthos can be a huge help. Anthos is built with best
practices in mind, so a lot of the architecture decisions were built-in to the
installer. Choosing a managed offering, even when running on-prem has therefore
helped us deliver value to the product teams much quicker than if we had to
build everything from scratch.</p>
<p>What&#x27;s important to point out is that choosing something that is managed does
not rule out using open source components later. We started out using all the
parts that Anthos gave us, including service mesh, logging, monitoring and
configuration management. Managed services do come with some tradeoffs, however,
as you lose some of the finer control of the platform. As the team has matured
and gained experience, we&#x27;ve started to replace some of these components with
open source alternatives, which has helped us save money and gain more control
over our platform. This has the downside of having to maintain these
components ourselves, but with more experience in the team, this is a tradeoff
we feel is worth it.</p>
<p>Even though we&#x27;re increasingly using more open source components, we don&#x27;t
regret using a paid managed offering in the beginning. It helped us get started
and make the right decisions early on, and we&#x27;re now in a position where we can
capitalize on that great start.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="keep-in-mind-autoscaling-when-choosing-licensing-models">Keep in mind autoscaling when choosing licensing models<a href="#keep-in-mind-autoscaling-when-choosing-licensing-models" class="hash-link" aria-label="Direct link to Keep in mind autoscaling when choosing licensing models" title="Direct link to Keep in mind autoscaling when choosing licensing models">​</a></h2>
<p><img loading="lazy" alt="Autoscaling" src="/assets/images/anthos-7-e3f4b6cffc3dd928706042e2610f75e4.png" width="2200" height="917" class="img_ev3q"></p>
<p>This may be an obvious point to some of the more experienced platform engineers
out there, but it was still something that we had to learn. When we started out,
we appreciated the simplicity of SaaS products that billed per node, as it made
it easy to predict costs. We could simply look at the number of nodes we had
running and multiply that with the price per node to get a relatively accurate
estimate of what this offering would cost. This would turn out to be a double
edged sword, however.</p>
<p>It is safe to assume that one of the reasons people choose Kubernetes is the ability
to scale workloads easily. This could be scaling up to handle more traffic, or
scaling down to save money. This is a great feature, but as the number of workloads
grow, the provisioned nodes will start to become insufficient and new nodes will
be provisioned. With Kubernetes and Anthos on VMware this can be done
automatically, which is a fantastic feature.</p>
<p>The problem arises when you scale out more nodes and have a static license that
bills per node. We&#x27;ve made the mistake of getting contracts with two (now just
one) SaaS providers where we order a set of nodes, let&#x27;s say 10, and when
workloads scale up, we end up with more than 10 nodes. This means we&#x27;re not
running that SaaS-service&#x27;s agents on the new nodes, which can be anything from
inconvenient to critical, depending on the service. In the end we&#x27;ve had to
restrict our node scaling to avoid this issue, which goes against the whole
ethos of Kubernetes. We&#x27;re also provisioning bigger nodes than we need to avoid
scaling out, which can be suboptimal.</p>
<p>We&#x27;re now working with the vendors to get a more flexible license that bills per
node on demand, but this is something to keep in mind when choosing a SaaS
offering. Try to factor in the future scaling needs of your platform when
purchasing SaaS services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>To summarize: We&#x27;ve learned a lot on our journey to building a hybrid Kubernetes
platform. Over the last few years we&#x27;ve iterated on our platform and learned
lots of great lessons. It&#x27;s been a huge help and privilege to have the support
of our organization, especially in terms of us being allowed to fail and learn
from our mistakes. The Norwegian saying &quot;it&#x27;s never too late to turn around&quot;
comes to mind, as we&#x27;ve changed course several times on our journey, sometimes
to the annoyance of our product teams who depend on a stable platform - but in
the end we&#x27;ve ended up with a better product - a platform we can be proud of and
that our product teams love using.</p>
<p>Thanks for reading this series on Anthos and hybrid Kubernetes. We hope you&#x27;ve
learned something from our experiences, and that our hard earned lessons can
help you on your journey to building a hybrid Kubernetes platform.</p>
<p><em>Disclaimer - Google, GKE and Anthos are trademarks of Google LLC and this website is not
endorsed by or affiliated with Google in any way.</em></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/anthos">anthos</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/hybrid">hybrid</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/crisis-management-exercises"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Crisis Management Exercises</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/skip-on-plattformpodden"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">SKIP on Plattformpodden!</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#do-you-really-need-hybrid" class="table-of-contents__link toc-highlight">Do you really need hybrid?</a></li><li><a href="#hybrid-gives-your-organization-flexibility" class="table-of-contents__link toc-highlight">Hybrid gives your organization flexibility</a></li><li><a href="#service-mesh-is-hard-but-maybe-a-necessary-evil-to-make-hybrid-less-painful" class="table-of-contents__link toc-highlight">Service mesh is hard, but maybe a necessary evil to make hybrid less painful</a></li><li><a href="#anthos-helps-you-as-a-platform-team-getting-started-with-best-practices-even-if-you-plan-to-move-to-open-source-components-later" class="table-of-contents__link toc-highlight">Anthos helps you as a platform team getting started with best practices.. Even if you plan to move to open source components later</a></li><li><a href="#keep-in-mind-autoscaling-when-choosing-licensing-models" class="table-of-contents__link toc-highlight">Keep in mind autoscaling when choosing licensing models</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Lenker</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://uustatus.no/nb/erklaringer/publisert/7148395f-f0cf-4019-9c45-3b83d79fd544" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tilgjengelighetserklæring<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Statens Kartverk</div></div></div></footer></div>
</body>
</html>