"use strict";(globalThis.webpackChunkskip_docs=globalThis.webpackChunkskip_docs||[]).push([[9604],{51159(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"applikasjon-utrulling/skiperator/get-started","title":"Getting started","description":"This is a quick intro on how to configure a simple application, SKIPJob and Routing using Skiperator.","source":"@site/docs/03-applikasjon-utrulling/03-skiperator/02-get-started.md","sourceDirName":"03-applikasjon-utrulling/03-skiperator","slug":"/applikasjon-utrulling/skiperator/get-started","permalink":"/docs/applikasjon-utrulling/skiperator/get-started","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/03-skiperator/02-get-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Requirements","permalink":"/docs/applikasjon-utrulling/skiperator/requirements"},"next":{"title":"Common Skiperator configuration","permalink":"/docs/applikasjon-utrulling/skiperator/configuring"}}');var a=t(74848),i=t(28453);const r={},s="Getting started",c={},l=[{value:"Application",id:"application",level:2},{value:"SKIPJob",id:"skipjob",level:2},{value:"Routing",id:"routing",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"getting-started",children:"Getting started"})}),"\n",(0,a.jsxs)(n.p,{children:["This is a quick intro on how to configure a simple application, SKIPJob and Routing using Skiperator.\nBefore you start here you should have gone through the ",(0,a.jsx)(n.a,{href:"/docs/applikasjon-utrulling/skiperator/requirements",children:"Requirements"})," page."]}),"\n",(0,a.jsxs)(n.p,{children:["These are just simple examples. Teams usually use libsonnet to generate the yaml files for the CRDs.\nFor more detailed information on how to configure the CRDs see the ",(0,a.jsx)(n.a,{href:"/docs/applikasjon-utrulling/skiperator/configuring",children:"configuring"})," for more common use cases and ",(0,a.jsx)(n.a,{href:"/docs/applikasjon-utrulling/skiperator/api-docs",children:"API docs"})," for complete documentation."]}),"\n",(0,a.jsx)(n.h2,{id:"application",children:"Application"}),"\n",(0,a.jsxs)(n.p,{children:["An Application is our abstraction of a deployment. Skiperator will create all the necessary resources for you.\nCreate a file named ",(0,a.jsx)(n.code,{children:"app.yaml"})," in ",(0,a.jsx)(n.code,{children:"env/atkv3-dev/myapp"})," with the following content:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: skiperator.kartverket.no/v1alpha1\nkind: Application\nmetadata:\n  name: myapp\nspec:\n  image: ghcr.io/kartverket/myapp:latest\n  port: 8080\n  ingresses:\n    - myapp.atkv3-dev.kartverket-intern.cloud\n  redirectToHTTPS: true\n  accessPolicy:\n    inbound: \n      rules:\n        - application: myjob-skipjob\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can then go into ",(0,a.jsx)(n.a,{href:"https://argo-dev.kartverket.dev",children:"argo"})," search for ",(0,a.jsx)(n.code,{children:"myapp"}),"and sync the application.\nSkiperator will then read the Application resource and create a bunch of resources for you, like a deployment, service, ingress and network policy.\nYour app should be reachable from the domain ",(0,a.jsx)(n.code,{children:"myapp.atkv3-dev.kartverket-intern.cloud"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"skipjob",children:"SKIPJob"}),"\n",(0,a.jsxs)(n.p,{children:["A SKIPJob is our abstraction of a job or a cron job. Skiperator will create all the necessary resources for you.\nCreate a file named ",(0,a.jsx)(n.code,{children:"job.yaml"})," in ",(0,a.jsx)(n.code,{children:"env/atkv3-dev/myjob"})," with the following content:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: skiperator.kartverket.no/v1alpha1\nkind: SKIPJob\nmetadata:\n  name: myjob\nspec:\n  container:\n    image: ghcr.io/kartverket/myjob:latest\n    command:\n      - "sleep 10"\n    accessPolicy:\n      outbound:\n        rules:\n          - application: myapp\n\n  cron:\n    schedule: "* * * * *"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["This creates a cron job that executes every minute. It also has an access policy that allows it to connect to ",(0,a.jsx)(n.code,{children:"myapp"}),".\nSkiperator will create network policies that allow the SKIPJob to connect to the Application. If you look at the application above you can see that it has an access policy that allows ",(0,a.jsx)(n.code,{children:"myjob"})," to connect to it.\nSKIPJobs must be postfixed with ",(0,a.jsx)(n.code,{children:"-skipjob"})," in the access policy. You can also connect to applications in other namespaces, see more in ",(0,a.jsx)(n.a,{href:"/docs/applikasjon-utrulling/skiperator/configuring",children:"configuring"})," or the ",(0,a.jsx)(n.a,{href:"/docs/applikasjon-utrulling/skiperator/api-docs",children:"api docs"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"routing",children:"Routing"}),"\n",(0,a.jsxs)(n.p,{children:["A Routing is an optional resource that you can use to facilitate path based routing, allowing multiple microservices to share the same hostname. Under the hood it's using Istio to proxy requests based on the http path. By using Routing you should remove the ",(0,a.jsx)(n.code,{children:"ingresses"})," field in you Application manifest.\nFor example if you have two applications, frontend and backend, you can create a routing rule that routes requests to ",(0,a.jsx)(n.code,{children:"/api"})," to the backend and everything else to the frontend."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: skiperator.kartverket.no/v1alpha1\nkind: Routing\nmetadata:\n  name: myrouting\nspec:\n  hostname: kartverket.com\n  routes:\n    - pathPrefix: /api\n      targetApp: backend-app\n    - pathPrefix: /\n      targetApp: frontend-app\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>s});var o=t(96540);const a={},i=o.createContext(a);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);