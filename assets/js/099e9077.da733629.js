"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[1921],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var a=i(96540);const s={},t=a.createContext(s);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(t.Provider,{value:n},e.children)}},97980:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"applikasjon-utrulling/argokit/getting-started","title":"Kom i gang med ArgoKit","description":"Installer ArgoKit i ditt apps reop","source":"@site/docs/03-applikasjon-utrulling/10-argokit/02-getting-started.md","sourceDirName":"03-applikasjon-utrulling/10-argokit","slug":"/applikasjon-utrulling/argokit/getting-started","permalink":"/docs/applikasjon-utrulling/argokit/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/10-argokit/02-getting-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Installasjon","permalink":"/docs/applikasjon-utrulling/argokit/installation-guide"},"next":{"title":"AppAndObjects Konseptet","permalink":"/docs/applikasjon-utrulling/argokit/appAndObjects"}}');var s=i(74848),t=i(28453);const r={},l="Kom i gang med ArgoKit",p={},o=[{value:"Installer ArgoKit i ditt apps reop",id:"installer-argokit-i-ditt-apps-reop",level:3},{value:"Importer ArgoKit V2",id:"importer-argokit-v2",level:3},{value:"Definer en applikasjon",id:"definer-en-applikasjon",level:3},{value:"Bygge spec-en",id:"bygge-spec-en",level:2},{value:"Milj\xf8variabler",id:"milj\xf8variabler",level:3},{value:"Access Policies",id:"access-policies",level:3},{value:"Ingress",id:"ingress",level:3},{value:"Replicas",id:"replicas",level:3},{value:"Probes",id:"probes",level:3},{value:"Legge til flere ressursser",id:"legge-til-flere-ressursser",level:2},{value:"Azure AD Application",id:"azure-ad-application",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kom-i-gang-med-argokit",children:"Kom i gang med ArgoKit"})}),"\n",(0,s.jsx)(n.h3,{id:"installer-argokit-i-ditt-apps-reop",children:"Installer ArgoKit i ditt apps reop"}),"\n",(0,s.jsxs)(n.p,{children:["Om du ikke har installert argokit enda, ser du hvordan ",(0,s.jsx)(n.a,{href:"/docs/applikasjon-utrulling/argokit/installation-guide",children:"her"}),"!"]}),"\n",(0,s.jsx)(n.h3,{id:"importer-argokit-v2",children:"Importer ArgoKit V2"}),"\n",(0,s.jsx)(n.p,{children:"Import path er relativ til hvord du befinner deg i koden."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"local argokit = import '../argokit/v2/jsonnet/argokit.libsonnet';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"definer-en-applikasjon",children:"Definer en applikasjon"}),"\n",(0,s.jsxs)(n.p,{children:["Lag en ny Skiperator-applikasjon med ArgoKit ",(0,s.jsx)(n.code,{children:"appAndObjects"}),"-abstraksjonen:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Tips! Lag en ny variabel for application for \xe5 f\xe5 kortere uttrykk."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"local application = argokit.appAndObjects.application;\n\napplication.new('app-name', 'test-image', 3000)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\ud83c\udf89 S\xe5nn! Der har du en minimal applikasjon som kan kj\xf8res p\xe5 SKIP!"}),"\n",(0,s.jsxs)(n.p,{children:["\ud83e\udd14 Lurer du p\xe5 om manifestet ditt er gyldig? ",(0,s.jsx)(n.a,{href:"https://skip.kartverket.no/docs/applikasjon-utrulling/skipctl/get-started",children:"Installer skipctl"})," og kj\xf8r:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"skipctl manifests validate --path=<ditt-manifest.jsonnet>\n"})}),"\n",(0,s.jsx)(n.p,{children:"s\xe5 slipper du \xe5 lure. \ud83d\ude0e"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"bygge-spec-en",children:"Bygge spec-en"}),"\n",(0,s.jsx)(n.h3,{id:"milj\xf8variabler",children:"Milj\xf8variabler"}),"\n",(0,s.jsxs)(n.p,{children:["Med ArgoKit kan du legge til variabler med ",(0,s.jsx)(n.code,{children:"withEnvironmentVariable"})," funksjonen"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.withEnvironmentVariable('NAME', value)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Du kan ogs\xe5 legge til milj\xf8variabler fra secrets:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.withEnvironmentVariablesFromSecret('API_KEY', 'secretRef')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"access-policies",children:"Access Policies"}),"\n",(0,s.jsx)(n.p,{children:"Det finnes en rekke funksjoner for \xe5 sette access policies i ArgoKit,\nher kan vi sette opp tilgang til en Postgres-database fra en SKIP-app:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.withOutboundPostgres(host='database-host.com', ip='10.0.0.1')\n+ application.withInboundSkipApp(appname='other-app', namespace='other-namespace')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ingress",children:"Ingress"}),"\n",(0,s.jsx)(n.p,{children:"Konfigurering av ingress gj\xf8res slik:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.forHostnames('public-api-url.com')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"replicas",children:"Replicas"}),"\n",(0,s.jsx)(n.p,{children:"Replicas settes enkelt opp slik:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.withReplicas(initial=2, max=10)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"probes",children:"Probes"}),"\n",(0,s.jsx)(n.p,{children:"Probes for startup, liveness og readiness legges til slik:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"local livenessProbe = application.probe(\n  path='/health',\n  port=8080,\n  failureThreshold=5,\n  timeout=0,\n  initialDelay=5\n);\n\nlocal readinessProbe = application.probe(path='/health', port=8080);\n\napplication.new('app-name', 'test-image', 3000)\n+ application.withLiveness(livenessProbe)\n+ application.withStartup(livenessProbe)\n+ application.withReadiness(readinessProbe)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"legge-til-flere-ressursser",children:"Legge til flere ressursser"}),"\n",(0,s.jsx)(n.h3,{id:"azure-ad-application",children:"Azure AD Application"}),"\n",(0,s.jsx)(n.p,{children:"Azure AD kan legges til slik, dette vil\nlegge AzureAdApplication til som en kubernetes ressurss i manifestet\nditt, i tillegg til \xe5 legge til access policies og en secret i applikasjonen din."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"application.new('app-name', 'test-image', 3000)\n+ application.withAzureAdApplication(\n  name='app-name-ad',\n  namespace='team-namespace',\n  groups=['12345-12345-12345-12345'],\n  logoutUrl='some-url.com',\n)\n"})})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);