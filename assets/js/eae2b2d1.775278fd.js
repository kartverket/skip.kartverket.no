"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[5345],{3223:(e,r,s)=>{s.d(r,{A:()=>a});const a=s.p+"assets/images/visualization-types-3d03cc7fb2e7b2b65546a4bfdc1b7f07.png"},28453:(e,r,s)=>{s.d(r,{R:()=>d,x:()=>l});var a=s(96540);const n={},i=a.createContext(n);function d(e){const r=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),a.createElement(i.Provider,{value:r},e.children)}},53582:(e,r,s)=>{s.d(r,{A:()=>a});const a=s.p+"assets/images/edit-panel-0c5581cf1b3111708724ac9ef23c0964.png"},59957:(e,r,s)=>{s.d(r,{A:()=>a});const a=s.p+"assets/images/add-to-dashboard-85b4292bfd777348b4f56e5f0a0afe07.png"},84617:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"observability/dashboard","title":"Dashboards","description":"Grafana har mange visualiseringsmuligheter i dashboards. I dashboards kan du kombinerre data fra ulike datakilder (f.eks. b\xe5de logger og metrikker, eller logger fra ulike milj\xf8er), visualisere med over 20 ulike innebygde visualiseringstyper og ha dynamiske visualiseringer med variabler.","source":"@site/docs/07-observability/dashboard.md","sourceDirName":"07-observability","slug":"/observability/dashboard","permalink":"/docs/observability/dashboard","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/07-observability/dashboard.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Distributed tracing with Tempo","permalink":"/docs/observability/distributed-tracing-with-tempo"},"next":{"title":"Grafana and GCP","permalink":"/docs/observability/grafana-and-GCP"}}');var n=s(74848),i=s(28453);const d={sidebar_position:2},l="Dashboards",t={},o=[{value:"Rask intro til dashboards",id:"rask-intro-til-dashboards",level:2},{value:"Dynamiske dashboards med variabler",id:"dynamiske-dashboards-med-variabler",level:2},{value:"Eksempel med variabler",id:"eksempel-med-variabler",level:3},{value:"Dashboards som kode",id:"dashboards-som-kode",level:2},{value:"Andre ressurser",id:"andre-ressurser",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"dashboards",children:"Dashboards"})}),"\n",(0,n.jsxs)(r.p,{children:["Grafana har mange visualiseringsmuligheter i dashboards. I dashboards kan du kombinerre data fra ulike datakilder (f.eks. b\xe5de logger og metrikker, eller logger fra ulike milj\xf8er), visualisere med over 20 ulike innebygde ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/",children:"visualiseringstyper"})," og ha dynamiske visualiseringer med variabler."]}),"\n",(0,n.jsx)(r.h2,{id:"rask-intro-til-dashboards",children:"Rask intro til dashboards"}),"\n",(0,n.jsxs)(r.p,{children:["Det er ofte enklere \xe5 eksperimentere raskt med data og lage gode sp\xf8rringer i ",(0,n.jsx)(r.a,{href:"https://monitoring.kartverket.cloud/explore",children:"Explore"}),'. Herfra kan du fra "Add"-menyen \xf8verst til h\xf8yre trykke "Add to dashboard" og deretter gj\xf8re visualiseringen bedre derfra.']}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.img,{alt:"&quot;Add to dashboard&quot;-button",src:s(59957).A+"",width:"548",height:"245"})}),"\n",(0,n.jsx)(r.p,{children:'P\xe5 dashboardet kan du klikke p\xe5 de tre prikkene \xf8verst til h\xf8yre p\xe5 et panel, og velge "Edit".'}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.img,{alt:"Edit panel",src:s(53582).A+"",width:"1149",height:"380"})}),"\n",(0,n.jsx)(r.p,{children:"Her kan du velge visualiseringstype oppe til h\xf8yre:"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.img,{alt:"Visualiseringstyper",src:s(3223).A+"",width:"460",height:"845"})}),"\n",(0,n.jsxs)(r.p,{children:["De ulike visualiseringstypene har ulike muligheter for tilpasning. De viktigste visualiseringstypene er ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/",children:"time series"}),", ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/heatmap/",children:"heatmap"}),", ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/logs/",children:"logs"}),", ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/stat/",children:"stat"})," og ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/",children:"table"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"dynamiske-dashboards-med-variabler",children:"Dynamiske dashboards med variabler"}),"\n",(0,n.jsx)(r.p,{children:"Variabler kan brukes for \xe5 dynamisk velge milj\xf8, namespace eller applikasjon. P\xe5 denne m\xe5ten kan dashboards brukes p\xe5 tvers av team eller milj\xf8er."}),"\n",(0,n.jsx)(r.p,{children:'Legg til egne variabler ved \xe5 trykke p\xe5 "Settings" oppe til h\xf8yre, deretter "Variables".'}),"\n",(0,n.jsx)(r.p,{children:'Det viktigste variabeltypene er "Data source" og "Query". F\xf8rstnevnte lar deg velge ulike datakilder av samme type dynamisk. "Query" kan brukes for \xe5 f.eks. velge namespace.'}),"\n",(0,n.jsx)(r.h3,{id:"eksempel-med-variabler",children:"Eksempel med variabler"}),"\n",(0,n.jsxs)(r.p,{children:["Her er fremgangsm\xe5ten for \xe5 lage en datasource variabel, ",(0,n.jsx)(r.code,{children:"metrics"}),", og en query-variabel ",(0,n.jsx)(r.code,{children:"namespace"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["F\xf8rst data source-variabelen ",(0,n.jsx)(r.code,{children:"metrics"}),":"]}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['Lag en ny variabel, med type "Datasource". Gi den navnet ',(0,n.jsx)(r.code,{children:"metrics"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:'Under "Data source options", velg "Type" Prometheus.'}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Helt nederst kommer det et preview av verdier, og her er det flere datakilder enn \xf8nskelig. Dette kan fikses."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['Under "Intance name filter", legg inn regex-en ',(0,n.jsx)(r.code,{children:"/Mimir-.*(dev|prod|atgcp1)/"}),', som gir datakilder for b\xe5de sky og on-prem clustre. Trykk "Run Query" helt nederst.']}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:'S\xf8rg for at alle "Selection options" ikke er valgt, og trykk "Back to list".'}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["Deretter ",(0,n.jsx)(r.code,{children:"namespace"}),"-variabelen:"]}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['Lag en ny variabel, med type "Query" og gi den navnet ',(0,n.jsx)(r.code,{children:"namespace"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['Under "Query options" velg datasource ',(0,n.jsx)(r.code,{children:"${metrics}"}),". Vi kan n\xe5 gj\xf8re sp\xf8rringer mot den datakilden som er valgt av ",(0,n.jsx)(r.code,{children:"metrics"}),"-variabelen."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:'Velg "Query type" "Label values".'}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['I boksene som dukker opp, velg "Label" ',(0,n.jsx)(r.code,{children:"namespace"}),' og "Metric" ',(0,n.jsx)(r.code,{children:"up"}),". Trykk deretter p\xe5 run query."]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Dette gir ganske mange verdier. Som produktteam vil alle namespaces ofte ha samme prefiks, eks. ",(0,n.jsx)(r.code,{children:"matrikkel-"}),", ",(0,n.jsx)(r.code,{children:"norgeskart-"})," eller annet. Vi kan igjen filtere ved hjelp av regex."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:['I "Regex"-feltet, bruk regex ',(0,n.jsx)(r.code,{children:"/mittprefiks-.*/"}),". Har du flere prefiks, kan du bruke ",(0,n.jsx)(r.code,{children:"/(prefiks1|prefiks2|prefiks3)-.*/"}),'. Deretter trykk p\xe5 "Run Query" og verifiser at du f\xe5r opp namespace-navnene du forventer.']}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:'"Selection options" er her mer relevant, tenk over f\xf8lgende:'}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:'Dersom du \xf8nsker \xe5 vise ting p\xe5 tvers av namespaces, velg "Multi-value". Dette er nyttig i noen tilfeller, men krever at du h\xe5ndterer det i sp\xf8rringene i dashboard-panelene.'}),"\n",(0,n.jsx)(r.li,{children:'Dersom du \xf8nsker \xe5 la bruker skrive inn egne verdier, velg "custom values" (dette er ofte ikke relevant for namespace).'}),"\n",(0,n.jsx)(r.li,{children:'Dersom du vil la bruker velge alle namespaces, eller har en spesiell verdi for alle kan du velge denne. Dette krever ogs\xe5 at sp\xf8rringene h\xe5ndterer det, tilsvarende "multi-value".'}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:'N\xe5r du er ferdig, trykk "Back to list" nederst for \xe5 lage flere variable, eller "Save dashboard" oppe til h\xf8yre for \xe5 lagre endringene.'}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"N\xe5 kan variablene brukes i dashboard-panelene:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:['Velg "Data source" ',(0,n.jsx)(r.code,{children:"${metrics}"}),", og bruk ",(0,n.jsx)(r.code,{children:"$namespace"}),"-variabelen i sp\xf8rringene."]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.img,{alt:"Panel som bruker variabler",src:s(94405).A+"",width:"1760",height:"366"})}),"\n",(0,n.jsxs)(r.p,{children:["\ud83d\udcda Se ogs\xe5 ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/dashboards/variables/",children:"Grafanas dokumentasjon om variabler"})]}),"\n",(0,n.jsx)(r.h2,{id:"dashboards-som-kode",children:"Dashboards som kode"}),"\n",(0,n.jsxs)(r.p,{children:["Det er mulig \xe5 lage dashboards som kode, enten egenlaget eller hentet fra eksterne kilder, som f.eks. ",(0,n.jsx)(r.a,{href:"https://grafana.com/grafana/dashboards/",children:"Grafanas dashboardside"}),". Du kan se eksempler p\xe5 dette i ",(0,n.jsx)(r.a,{href:"https://github.com/kartverket/skip-dashboards",children:"skip-dashboards"}),"."]}),"\n",(0,n.jsx)(r.p,{children:'Dashboards om lages som kode b\xf8r ikke endres i GUI-et. For \xe5 eksperimentere med slike dashboards anbefaler vi \xe5 lage en kopi av dashboardet, eksperimentere og deretter gj\xf8re tilsvarende endringer i kode-repoet. Dette kan gj\xf8res f.eks. ved \xe5 trykke "Export > Export as JSON" oppe til h\xf8yre i dashboard UI-et.'}),"\n",(0,n.jsx)(r.h2,{id:"andre-ressurser",children:"Andre ressurser"}),"\n",(0,n.jsx)(r.p,{children:"Det er mange m\xe5ter \xe5 lage dashboards p\xe5, og det finnes gode artikler p\xe5 det:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\ud83d\udcda ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/",children:"Enkel introduksjon fra Grafana for \xe5 lage dashboards"})]}),"\n",(0,n.jsxs)(r.li,{children:["\ud83d\udcda ",(0,n.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/best-practices/",children:'Grafanas egne "best practices" for \xe5 lage dashboards'})]}),"\n",(0,n.jsxs)(r.li,{children:["\ud83d\udcda ",(0,n.jsx)(r.a,{href:"https://sre.google/sre-book/monitoring-distributed-systems/#xref_monitoring_golden-signals",children:"The Four Golden Signals"})," fra Googles SRE Book diskuterer de viktigste metrikkene \xe5 monitorere"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},94405:(e,r,s)=>{s.d(r,{A:()=>a});const a=s.p+"assets/images/panel-variables-58d9eab4d47c9fd0f676cc520cae7b93.png"}}]);