"use strict";(globalThis.webpackChunkskip_docs=globalThis.webpackChunkskip_docs||[]).push([[1406],{7910(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"kom-i-gang/praktisk-intro/kubernetes/logge-inn-p\xe5-cluster","title":"Logge inn p\xe5 cluster","description":"P\xe5 denne siden g\xe5r vi gjennom hvordan du logger inn p\xe5 et cluster og f\xe5r tilgang til det i terminalen.","source":"@site/docs/02-kom-i-gang/06-praktisk-intro/06-kubernetes/01-logge-inn-p\xe5-cluster.md","sourceDirName":"02-kom-i-gang/06-praktisk-intro/06-kubernetes","slug":"/kom-i-gang/praktisk-intro/kubernetes/logge-inn-p\xe5-cluster","permalink":"/docs/kom-i-gang/praktisk-intro/kubernetes/logge-inn-p\xe5-cluster","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/02-kom-i-gang/06-praktisk-intro/06-kubernetes/01-logge-inn-p\xe5-cluster.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u2699\ufe0f Kubernetes","permalink":"/docs/kom-i-gang/praktisk-intro/kubernetes/"},"next":{"title":"Jobbe med Kubernetes cluster","permalink":"/docs/kom-i-gang/praktisk-intro/kubernetes/jobbe-med-cluster"}}');var s=r(74848),i=r(28453);const l={},o="Logge inn p\xe5 cluster",c={},d=[{value:"1. Logg inn med gcloud",id:"1-logg-inn-med-gcloud",level:3},{value:"2. Finn og velg riktig GCP-prosjekt",id:"2-finn-og-velg-riktig-gcp-prosjekt",level:3},{value:"3. Finn riktig clusternavn",id:"3-finn-riktig-clusternavn",level:3},{value:"4. Logg inn p\xe5 clusteret",id:"4-logg-inn-p\xe5-clusteret",level:3},{value:"On-premise",id:"on-premise",level:4},{value:"GCP",id:"gcp",level:4},{value:"5. Bytte til riktig context",id:"5-bytte-til-riktig-context",level:3},{value:"6. (Valgfritt) Gi contexten et enklere navn",id:"6-valgfritt-gi-contexten-et-enklere-navn",level:3},{value:"Eksterne ressurser",id:"eksterne-ressurser",level:2},{value:"Tilgangskrav",id:"tilgangskrav",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"logge-inn-p\xe5-cluster",children:"Logge inn p\xe5 cluster"})}),"\n",(0,s.jsx)(n.p,{children:"P\xe5 denne siden g\xe5r vi gjennom hvordan du logger inn p\xe5 et cluster og f\xe5r tilgang til det i terminalen."}),"\n",(0,s.jsxs)(n.p,{children:["Denne guiden krever at du har ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/install",children:"gcloud"})," og ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/components#managing_components",children:"kubectl"})," installert."]}),"\n",(0,s.jsxs)(n.p,{children:["I tillegg til gcloud cli trenger du ogs\xe5 ",(0,s.jsx)(n.code,{children:"gke-gcloud-auth-plugin"})," for \xe5 kunne logge inn p\xe5 et cluster."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud components install gke-gcloud-auth-plugin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Verifiser at ",(0,s.jsx)(n.code,{children:"gke-gcloud-auth-plugin"})," er tilgjengelig p\xe5 path:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gke-gcloud-auth-plugin --version\n"})}),"\n",(0,s.jsx)(n.h3,{id:"1-logg-inn-med-gcloud",children:"1. Logg inn med gcloud"}),"\n",(0,s.jsx)(n.p,{children:"Hvis du ikke har logget inn med gcloud allerede m\xe5 du logge inn"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud auth login\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-finn-og-velg-riktig-gcp-prosjekt",children:"2. Finn og velg riktig GCP-prosjekt"}),"\n",(0,s.jsx)(n.p,{children:"F\xf8rst, list opp tilgjengelige prosjekter for \xe5 finne riktig ett:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud projects list\n"})}),"\n",(0,s.jsxs)(n.p,{children:["GCP-prosjektet vil v\xe6re et kubernetes-prosjekt med format ",(0,s.jsx)(n.code,{children:"kubernetes-<env>-xxxx"}),". Jobber du f.eks. i ",(0,s.jsx)(n.code,{children:"dsa-dev-e32c"})," velger du ",(0,s.jsx)(n.code,{children:"kubernetes-dev-94b9"})," (samme env)."]}),"\n",(0,s.jsx)(n.p,{children:"Sett riktig prosjekt:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud config set project kubernetes-dev-94b9\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-finn-riktig-clusternavn",children:"3. Finn riktig clusternavn"}),"\n",(0,s.jsx)(n.p,{children:"List opp tilgjengelige clusters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container fleet memberships list\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Clusternavn-format:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"On-prem"}),": ",(0,s.jsx)(n.code,{children:"<cluster>-<env>-user-cluster"})," (f.eks. ",(0,s.jsx)(n.code,{children:"atkv3-dev-user-cluster"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GCP"}),": ",(0,s.jsx)(n.code,{children:"<cluster>-<env>"})," (f.eks. ",(0,s.jsx)(n.code,{children:"atgcp1-dev"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-logg-inn-p\xe5-clusteret",children:"4. Logg inn p\xe5 clusteret"}),"\n",(0,s.jsx)(n.p,{children:"Generer kubeconfig og sett som aktiv context:"}),"\n",(0,s.jsx)(n.h4,{id:"on-premise",children:"On-premise"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container fleet memberships get-credentials atkv3-dev-user-cluster\n"})}),"\n",(0,s.jsx)(n.h4,{id:"gcp",children:"GCP"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters get-credentials atgcp1-dev --region europe-north1 --project kubernetes-dev-94b9\n"})}),"\n",(0,s.jsx)(n.p,{children:"Denne kommandoen oppretter en ny context som kan autentisere deg mot clusteret.\nKommandoen er forskjellig mellom on-prem og GCP fordi man ikke beh\xf8ver \xe5 g\xe5 gjennom Connect gateway for \xe5 koble til skyclustre."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Context-format som opprettes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"For on-prem"}),": ",(0,s.jsx)(n.code,{children:"connectgateway_kubernetes-<env>-xxxx_europe-north1_<clusternavn>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"For GCP"}),": ",(0,s.jsx)(n.code,{children:"gke_<prosjektnavn>_<regionnavn>_<clusternavn>"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Eksempel on-prem"}),": ",(0,s.jsx)(n.code,{children:"connectgateway_kubernetes-dev-94b9_europe-north1_atkv3-dev-user-cluster"}),"\n",(0,s.jsx)(n.strong,{children:"Eksempel GCP"}),": ",(0,s.jsx)(n.code,{children:"gke_kubernetes-dev-94b9_europe-north1_atgcp1-dev"})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"For \xe5 kunne n\xe5 cluster i GCP utenom Connect Gateway m\xe5 man v\xe6re p\xe5 Kartverkets nettverk eller bruke VPN."})}),"\n",(0,s.jsx)(n.h3,{id:"5-bytte-til-riktig-context",children:"5. Bytte til riktig context"}),"\n",(0,s.jsxs)(n.p,{children:["Hvis du har ",(0,s.jsx)(n.code,{children:"kubectx"})," installert:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectx connectgateway_kubernetes-dev-94b9_europe-north1_atkv3-dev-user-cluster\n"})}),"\n",(0,s.jsx)(n.p,{children:"Eller bruk kubectl direkte:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl config use-context connectgateway_kubernetes-dev-94b9_europe-north1_atkv3-dev-user-cluster\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-valgfritt-gi-contexten-et-enklere-navn",children:"6. (Valgfritt) Gi contexten et enklere navn"}),"\n",(0,s.jsx)(n.p,{children:"Du kan gi contexten et mer lesbart navn:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl config rename-context connectgateway_kubernetes-dev-94b9_europe-north1_atkv3-dev-user-cluster atkv3-dev\n"})}),"\n",(0,s.jsx)(n.h2,{id:"eksterne-ressurser",children:"Eksterne ressurser"}),"\n",(0,s.jsxs)(n.p,{children:["Se ogs\xe5 ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/anthos/multicluster-management/gateway/using",children:"https://cloud.google.com/anthos/multicluster-management/gateway/using"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"tilgangskrav",children:"Tilgangskrav"}),"\n",(0,s.jsxs)(n.p,{children:["For \xe5 ha adgang til \xe5 logge p\xe5 clusteret m\xe5 du v\xe6re medlem av en ",(0,s.jsx)(n.code,{children:"AAD - TF - TEAM"})," EntraID-gruppe som er synket med GCP."]}),"\n",(0,s.jsxs)(n.p,{children:["Du kan sjekke om teamet ditt er lagt til i ",(0,s.jsx)(n.a,{href:"https://github.com/kartverket/entra-id-config/blob/main/org.yaml",children:"entra-id-config"})," hvis du er usikker."]})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453(e,n,r){r.d(n,{R:()=>l,x:()=>o});var t=r(96540);const s={},i=t.createContext(s);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);