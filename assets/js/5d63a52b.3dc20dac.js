"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[9663],{31212:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"observability/grafana-and-GCP","title":"Grafana and GCP","description":"Google Cloud Monitoring","source":"@site/docs/07-observability/03-grafana-and-GCP.md","sourceDirName":"07-observability","slug":"/observability/grafana-and-GCP","permalink":"/docs/observability/grafana-and-GCP","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/07-observability/03-grafana-and-GCP.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Dashboards","permalink":"/docs/observability/dashboard"},"next":{"title":"Alerting with Grafana","permalink":"/docs/observability/alerting-with-grafana"}}');var n=o(74848),r=o(28453);const i={},s="Grafana and GCP",d={},c=[{value:"Google Cloud Monitoring",id:"google-cloud-monitoring",level:2},{value:"Setting up the data source",id:"setting-up-the-data-source",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"grafana-and-gcp",children:"Grafana and GCP"})}),"\n",(0,n.jsx)(t.h2,{id:"google-cloud-monitoring",children:"Google Cloud Monitoring"}),"\n",(0,n.jsx)(t.p,{children:"It is possible to get metrics from a Google Cloud project by the use of the Grafana data source \u201cGoogle Cloud Monitoring\u201d."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Example query Google Cloud Monitoring Logging Service",src:o(61988).A+"",width:"1452",height:"833"})}),"\n",(0,n.jsx)(t.p,{children:"Through the use of this data source, you will be able to see all metrics that are exposed through different Google Cloud services, such as CloudSQL, BigQuery, CloudKMS, Logging etc. This can then be added to your dashboards and alarms."}),"\n",(0,n.jsx)(t.h3,{id:"setting-up-the-data-source",children:"Setting up the data source"}),"\n",(0,n.jsx)(t.p,{children:"While the data source is present, it will not scrape all projects in the Kartverket organisation in GCP by default. As of writing this (13 Oct 2023), SKIP does not facilitate this setup in any particular way, but you are free to do it the \u201cSKIP way\u201d."}),"\n",(0,n.jsxs)(t.p,{children:["To add your GCP project to the list of projects, simply add the GCP role ",(0,n.jsx)(t.code,{children:"monitoring.viewer"})," to the Google Service Account ",(0,n.jsx)(t.code,{children:"grafana-scraper@kubernetes-0dca.iam.gserviceaccount.com"}),". It should look like the below image."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"How IAM for the SA should look after adding the correct role",src:o(36325).A+"",width:"1172",height:"54"})}),"\n",(0,n.jsxs)(t.p,{children:["Remember that if you do not have access to editing IAM for your projects by default, you can always elevate your access using ",(0,n.jsx)(t.a,{href:"https://jit.skip.kartverket.no/",children:"JIT Access"})," ."]}),"\n",(0,n.jsx)(t.p,{children:"Note that the setup for this may change in the future as this feature is somewhat unexplored as of writing this documentation."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},36325:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/google_grafana_iam-bb4ed3d92f06a5d974be7bf055b1ee79.png"},61988:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/grafana_googlecloudquery-5edc440f7515d3c3bd127ebfe8949a93.png"},28453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>s});var a=o(96540);const n={},r=a.createContext(n);function i(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);