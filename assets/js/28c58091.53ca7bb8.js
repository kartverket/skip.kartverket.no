"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[367],{28453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>o});var s=n(96540);const i={},t=s.createContext(i);function l(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:r},e.children)}},95116:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"applikasjon-utrulling/tilgangsstyring/klientregistrering","title":"Klientregistrering","description":"F\xf8r du g\xe5r i gang med \xe5 sikre din applikasjon med Ztoperator, s\xe5 trenger du en klientregistrering hos en identitetstilbyder.","source":"@site/docs/03-applikasjon-utrulling/04-tilgangsstyring/01-klientregistrering.mdx","sourceDirName":"03-applikasjon-utrulling/04-tilgangsstyring","slug":"/applikasjon-utrulling/tilgangsstyring/klientregistrering","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/04-tilgangsstyring/01-klientregistrering.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udd10 Tilgangsstyring p\xe5 SKIP","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/"},"next":{"title":"\u26d4\ufe0f Ztoperator","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/ztoperator/"}}');var i=n(74848),t=n(28453);const l={},o="Klientregistrering",a={},d=[{value:"\ud83e\udeaa Digdirator",id:"-digdirator",level:2},{value:"<code>IDPortenClient</code>",id:"idportenclient",level:3},{value:"<code>MaskinportenClient</code>",id:"maskinportenclient",level:3},{value:"\ud83d\udd39 Azurerator",id:"-azurerator",level:2},{value:"<code>AzureAdApplication</code>",id:"azureadapplication",level:3}];function c(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"klientregistrering",children:"Klientregistrering"})}),"\n",(0,i.jsx)(r.p,{children:"F\xf8r du g\xe5r i gang med \xe5 sikre din applikasjon med Ztoperator, s\xe5 trenger du en klientregistrering hos en identitetstilbyder.\nKlientregistrering er en sentral del av tilgangsstyring med OAuth 2.0 og OIDC. N\xe5r du registrerer en klient, f\xe5r applikasjonen\nsin egen identitet og kan autentisere seg mot de valgte identitetstilbyderne."}),"\n",(0,i.jsx)(r.p,{children:"N\xe5r du skal opprette en klientregistrering b\xf8r du vurdere hvilken identitetstilbyder som passer best til behovene i din applikasjon.\nFor applikasjoner p\xe5 SKIP st\xe5r valget da oftest mellom:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Microsoft Entra ID"}),": Brukes n\xe5r applikasjonen er ment for internt bruk i Kartverket, og brukerne er ansatte i Kartverket."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"ID-porten"}),": Egnet for borgertjenester som skal brukes av Ola og Kari Nordmann."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Maskinporten"}),": Benyttes n\xe5r applikasjonen tilbyr et API for andre offentlige virksomheter eller n\xe5r man \xf8nsker \xe5 konsumere andre API-er som benytter seg av Maskinporten."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Andre"}),": Hvis identitetstilbyderne over ",(0,i.jsx)(r.em,{children:"ikke"})," treffer dine behov anbefaler vi deg \xe5 ta kontakt med Team Tilgangsstyring p\xe5 ",(0,i.jsx)(r.a,{href:"https://kartverketgroup.slack.com/archives/C08CJLBLY2X",children:"#gen-tilgangsstyring"})," p\xe5 Slack."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"Audience"})," er et begrep innen OAuth 2.0 som spesifiserer tiltenkt mottaker av et aksess-token. Det er ofte en unik ID (UID)\neller en unik URL. Hver klientregistrering f\xe5r sitt eget ",(0,i.jsx)(r.code,{children:"audience"}),", og vi anbefaler \xe5 ha et bevisst forhold til hvilke tjenester\nsom skal ",(0,i.jsx)(r.em,{children:"dele"})," samme ",(0,i.jsx)(r.code,{children:"audience"}),". Det er ofte mer hensiktsmessig \xe5 velge en restriktiv tiln\xe6rming, der hver tjeneste f\xe5r sin egen klientregistrering,\nfremfor \xe5 gruppere flere tjenester under \xe9n felles klient. Dette gir bedre kontroll over tilgangsstyring og sikkerhet."]}),"\n",(0,i.jsx)(r.p,{children:"Felles for alle identitetstilbydere p\xe5 SKIP er at klientregistrering st\xf8ttes fra plattformen ved hjelp av Kubernetes-operatorer."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://github.com/nais/digdirator",children:(0,i.jsx)(r.strong,{children:"Digdirator"})})," h\xe5ndterer klientregistrering mot Digdir sine fellesl\xf8sninger: ",(0,i.jsx)(r.strong,{children:"ID-Porten"})," og ",(0,i.jsx)(r.strong,{children:"Maskinporten"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://github.com/nais/azurerator",children:(0,i.jsx)(r.strong,{children:"Azurerator"})})," h\xe5ndterer klientregistrering mot ",(0,i.jsx)(r.strong,{children:"Microsoft Entra ID"})," (tidligere kjent som Azure Active Directory)."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"N\xe5r man bruker Digdirator eller Azurerator for \xe5 opprette en klientintegrasjon, blir det opprettet en Kubernetes-hemmelighet (Secret) i samme namespace med integrasjonshemmeligheter. Disse kan brukes av applikasjoner til bl.a. \xe5 logge inn brukere, hente maskin-til-maskin-tokens og validere innkommende JWT-er p\xe5 foresp\xf8rsler."}),"\n",(0,i.jsx)(r.h2,{id:"-digdirator",children:"\ud83e\udeaa Digdirator"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"https://https://github.com/nais/digdirator",children:"Digdirator"})," er en Kubernetes-operator utviklet av NAV sitt plattformteam (NAIS) som skal gj\xf8re det enkelt \xe5 deklarativt sette opp og vedlikeholde\nintegrasjoner mot ",(0,i.jsx)(r.a,{href:"https://docs.digdir.no",children:"Digdir"})," sine systemer. Dette inkluderer ",(0,i.jsx)(r.strong,{children:"ID-Porten"}),"-integrasjoner og ",(0,i.jsx)(r.strong,{children:"Maskinporten"}),"-integrasjoner."]}),"\n",(0,i.jsxs)(r.p,{children:["Digdirator introduserer to CRD-er, ",(0,i.jsx)(r.code,{children:"IDPortenClient"})," og ",(0,i.jsx)(r.code,{children:"MaskinportenClient"}),", som automatiserer opprettelse og vedlikehold av integrasjoner mot henholdsvis ID-porten og Maskinporten. Alternativt kan klientregistrering gj\xf8res direkte i et Skiperator-applikasjonsmanifest. Se ",(0,i.jsx)(r.a,{href:"/docs/applikasjon-utrulling/skiperator/api-docs",children:"her"})," for mer informasjon om hvordan du setter opp ID-porten- og/eller Maskinporten-integrasjoner via Skiperator."]}),"\n",(0,i.jsx)(r.h3,{id:"idportenclient",children:(0,i.jsx)(r.code,{children:"IDPortenClient"})}),"\n",(0,i.jsxs)(r.p,{children:["En ",(0,i.jsx)(r.code,{children:"IDPortenClient"})," er en CRD som lar brukere deklarativt opprette og vedlikeholde ID-Porten-klientregistreringer."]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"spec"})," ",(0,i.jsx)(r.em,{children:"(object, required)"})," \u2013 Spesifikasjon til ",(0,i.jsx)(r.code,{children:"IDPortenClient"})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"secretName"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Navnet p\xe5 den resulterende ",(0,i.jsx)(r.code,{children:"Secret"}),"-ressursen som vil bli opprettet."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"integrationType"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 Definerer integrasjonstypen for klienten. Bestemmer hvilke scopes som kan registreres. Kan ikke endres etter opprettelse. Tillatte verdier: ",(0,i.jsx)(r.code,{children:"krr"}),", ",(0,i.jsx)(r.code,{children:"idporten"}),", ",(0,i.jsx)(r.code,{children:"api_klient"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"scopes"})," ",(0,i.jsx)(r.em,{children:"([]string, optional)"})," \u2013 Definerer OAuth2-scopes for klienten. Begrenset basert p\xe5 ",(0,i.jsx)(r.code,{children:"integrationType"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"frontchannelLogoutURI"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 URL som ID-porten omdirigere til n\xe5r en utlogging utl\xf8ses av en annen applikasjon."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"postLogoutRedirectURIs"})," ",(0,i.jsx)(r.em,{children:"([]string, optional)"})," \u2013 Liste over gyldige URI-er hvor ID-porten kan omdirigere etter utlogging."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"redirectURIs"})," ",(0,i.jsx)(r.em,{children:"([]string], optional)"})," \u2013 Liste over redirect URI-er som skal registreres hos DigDir."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"accessTokenLifetime"})," ",(0,i.jsx)(r.em,{children:"(integer, optional)"})," \u2013 Maksimal levetid i sekunder for ",(0,i.jsx)(r.code,{children:"access_token"})," som returneres fra ID-porten. Min: 1, maks: 3600."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"clientURI"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 URL til klienten brukt av DigDir n\xe5r en 'tilbake'-knapp vises eller ved feil."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"clientName"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 Navnet p\xe5 klienten registrert hos DigDir. Vises under innlogging for brukerorienterte flyter."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"sessionLifetime"})," ",(0,i.jsx)(r.em,{children:"(integer, optional)"})," \u2013 Maksimal \xf8ktlevetid i sekunder for en innlogget sluttbruker for denne klienten. Min: 3600, maks: 28800."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"ssoDisabled"})," ",(0,i.jsx)(r.em,{children:"(bool, optional)"})," \u2013 Kontrollerer Single Sign-On-oppsettet for klienten. Hvis satt til ",(0,i.jsx)(r.code,{children:"true"}),", er SSO deaktivert."]})]}),"\n",(0,i.jsxs)(r.p,{children:["F\xf8lgende eksempel registrerer en klientintegrasjon mot ID-porten av typen ",(0,i.jsx)(r.code,{children:"idporten"}),".\nN\xe5r registrering er fullf\xf8rt vil Digdirator opprette Kubernetes-hemmeligheten ",(0,i.jsx)(r.code,{children:"idporten-secret"})," i namespacet ",(0,i.jsx)(r.code,{children:"tilgangsstyring-main"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"apiVersion: nais.io/v1\nkind: IDPortenClient\nmetadata:\n  name: test-client\n  namespace: tilgansstyring-main\nspec:\n  clientName: Test Application\n  clientURI: https://test-app.atgcp1-sandbox.kartverket-intern.cloud\n  frontchannelLogoutURI: https://test-app.atgcp1-sandbox.kartverket-intern.cloud/oauth2/logout\n  integrationType: idporten\n  redirectURIs:\n    - https://test-app.atgcp1-sandbox.kartverket-intern.cloud/oauth2/callback\n  scopes:\n    - openid\n    - profile\n  secretName: idporten-secret\n"})}),"\n",(0,i.jsx)(r.h3,{id:"maskinportenclient",children:(0,i.jsx)(r.code,{children:"MaskinportenClient"})}),"\n",(0,i.jsxs)(r.p,{children:["En ",(0,i.jsx)(r.code,{children:"MaskinportenClient"})," er en CRD som lar brukere deklarativt opprette og vedlikeholde Maskinporten-klientregistreringer."]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"spec"})," ",(0,i.jsx)(r.em,{children:"(object, required)"})," \u2013 Spesifikasjon til ",(0,i.jsx)(r.code,{children:"MaskinportenClient"})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"secretName"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Navnet p\xe5 den resulterende ",(0,i.jsx)(r.code,{children:"Secret"}),"-ressursen som vil bli opprettet."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"clientName"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 Navnet p\xe5 klienten registrert hos DigDir. Vises under innlogging for brukerorienterte flyter, og er ellers en lesbar m\xe5te \xe5 skille mellom klienter i DigDirs selvbetjeningsportal."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"scopes"})," ",(0,i.jsx)(r.em,{children:"([]object, optional)"})," \u2013 Definerer hvilke scopes applikasjonen konsumerer og hvilke den eksponerer."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"consumes"})," ",(0,i.jsx)(r.em,{children:"([]object, optional)"})," \u2013 En liste med scopes din klient kan foresp\xf8rre tilgang til."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"name"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Scopene som applikasjonen konsumerer for \xe5 f\xe5 tilgang til en ekstern organisasjons API."]})]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"exposes"})," ",(0,i.jsx)(r.em,{children:"([]object, optional)"})," \u2013 En liste med scopes din applikasjon \xf8nsker \xe5 eksponere til andre organisasjoner hvor tilgang er basert p\xe5 organisasjonsnummer."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"enabled"})," ",(0,i.jsx)(r.em,{children:"(bool, required)"})," \u2013 Hvis ",(0,i.jsx)(r.code,{children:"true"}),", s\xe5 er detkonfigurerte scopet tilgjengelig for bruk og til \xe5 bli konsumert av organisasjoner som har f\xe5tt godkjent tilgang."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"name"})," ",(0,i.jsx)(r.em,{children:"(string, p\xe5krevd)"})," \u2013 Det faktiske sub-scopet kombinert med ",(0,i.jsx)(r.code,{children:"product"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"product"})," ",(0,i.jsx)(r.em,{children:"(string, valgfritt)"})," \u2013 Produktomr\xe5de tilknyttet scopet. Dette vil inkluderes i resultatet: ",(0,i.jsx)(r.code,{children:"org:<product><name>"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"atMaxAge"})," ",(0,i.jsx)(r.em,{children:"(int, valgfritt)"})," \u2013 Maksimal tillatt levetid for token i sekunder. Defaulter til 30 sekunder."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"allowedIntegrations"})," ",(0,i.jsx)(r.em,{children:"([]string, valgfritt)"})," \u2013 Liste over tillatte integrasjonstyper for dette eksponerte omfanget. Defaulter til ",(0,i.jsx)(r.code,{children:"maskinporten"}),"."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"consumers"})," ",(0,i.jsx)(r.em,{children:"([]object, valgfritt)"})," \u2013 Liste over eksterne konsumenter som har tilgang til \xe5 konsumere dette scopet og som kan foresp\xf8rre ",(0,i.jsx)(r.code,{children:"access_token"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"orgno"})," \u2013 Det eksterne organisasjonsnummeret."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"name"})," \u2013 Beskrivende felt brukt utelukkende for oversikt."]})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"accessibleForAll"})," \u2013 Tillater alle organisasjoner \xe5 f\xe5 tilgang til scopet."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"delegationSource"})," \u2013 Delegasjonskilde for scopet. Default er tomt, noe som betyr at ingen delegasjon er tillatt."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"separator"})," \u2013 Tegnet som skiller ",(0,i.jsx)(r.code,{children:"product"})," og ",(0,i.jsx)(r.code,{children:"name"})," i det endelige scopet. Resultatet blir da ",(0,i.jsx)(r.code,{children:"<prefix>:<product><separator><name>"}),". Defaulter til ",(0,i.jsx)(r.code,{children:":"})," med mindre ",(0,i.jsx)(r.code,{children:"name"})," inneholder ",(0,i.jsx)(r.code,{children:"/"}),", i det tilfellet defaultes det til ",(0,i.jsx)(r.code,{children:"/"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"visibility"})," \u2013 Kontrollerer synligheten til scopet. Offentlige scopes er synlige for alle, mens private scopes kun er synlige for organisasjonen som eier scopet og organisasjoner som har f\xe5tt tilgang som konsumenter. Defaulter til ",(0,i.jsx)(r.code,{children:"public"}),". Tillatte verdier: ",(0,i.jsx)(r.code,{children:"private"}),", ",(0,i.jsx)(r.code,{children:"public"}),"."]})]})]})]}),"\n",(0,i.jsxs)(r.p,{children:["F\xf8lgende eksempel oppretter en klientintegrasjon mot Maskinporten og definerer scopet ",(0,i.jsx)(r.code,{children:"innsyn"}),".\nDen setter HUSL\xd8S HURTIG TIGER AS og KOSTBAR LEKKER APE AS som godkjente konsumenter av scopet.\nN\xe5r registrering er fullf\xf8rt vil Digdirator opprette Kubernetes-hemmeligheten ",(0,i.jsx)(r.code,{children:"maskinporten-secret"})," i namespacet ",(0,i.jsx)(r.code,{children:"tilgangsstyring-main"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:'apiVersion: nais.io/v1\nkind: MaskinportenClient\nmetadata:\n  name: test-client\n  namespace: tilgangsstyring-main\nspec:\n  clientName: innsikt-secure-deltashare\n  scopes:\n    exposes:\n      - enabled: true\n        name: "innsyn"\n        product: "Produktomr\xe5de"\n        consumers:\n          - name: HUSL\xd8S HURTIG TIGER AS\n            orgno: "987654321"\n          - name: KOSTBAR LEKKER APE AS\n            orgno: "123456789"\n  secretName: maskinporten-secret\n'})}),"\n",(0,i.jsx)(r.h2,{id:"-azurerator",children:"\ud83d\udd39 Azurerator"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"https://https://github.com/nais/azurerator",children:"Azurerator"})," er en Kubernetes-operator utviklet av NAV sitt plattformteam (NAIS) som skal gj\xf8re det enkelt \xe5 deklarativt sette opp og vedlikeholde\nintegrasjoner mot ",(0,i.jsx)(r.a,{href:"https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/Overview",children:"Microsoft Entra ID"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"azureadapplication",children:(0,i.jsx)(r.code,{children:"AzureAdApplication"})}),"\n",(0,i.jsxs)(r.p,{children:["Azurerator introduserer CRD-en ",(0,i.jsx)(r.code,{children:"AzureAdApplication"}),", som h\xe5ndterer opprettelse og vedlikehold av integrasjoner mot Microsoft Entra ID. Registreringer opprettet med Azureator vil f\xe5 navn basert p\xe5 hvor de er plassert i et Kubernetes-cluster, i.e. ",(0,i.jsx)(r.code,{children:"cluster:namespace:name"}),"."]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"spec"})," ",(0,i.jsx)(r.em,{children:"(object, required)"})," \u2013 Spesifikasjon til ",(0,i.jsx)(r.code,{children:"AzureAdApplication"})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"allowAllUsers"})," ",(0,i.jsx)(r.em,{children:"(bool, required)"})," \u2013 Bestemmer om alle brukere i tenanten som Azurerator er konfigurert mot skal f\xe5 tilgang."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"claims"})," ",(0,i.jsx)(r.em,{children:"(object, optional)"})," \u2013 Definerer konfigurasjon av claims som inkluderes i tokenene som returneres til Entra ID applikasjonen."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"groups"})," ",(0,i.jsx)(r.em,{children:"([]object, optional)"})," \u2013 En liste over Entra ID gruppe ID-er som skal inkluderes i ",(0,i.jsx)(r.code,{children:"groups"}),"-claimet i tokenene utstedt av Entra ID. Dette tildeler ogs\xe5 grupper til app-registreringen brukt for tilgangskontroll. Kun direkte medlemmer av gruppene f\xe5r tilgang."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"id"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Objekt-ID-en (OID) til en Entra ID-gruppe."]})]})]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"replyUrls"})," ",(0,i.jsx)(r.em,{children:"([]object, required)"})," \u2013 URL-er som applikasjonen godtar som svaradresser etter autentisering."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"url"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 En godkjent svaradresse (reply URL) for applikasjonen."]})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"logoutUrl"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 URL-en brukere blir omdirigert til n\xe5r de logger ut av applikasjonen.."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"preAuthorizedApplications"})," ",(0,i.jsx)(r.em,{children:"([]object, optional)"})," \u2013 Definerer andre app-registreringer som er forh\xe5ndsautorisert til \xe5 f\xe5 tilgang til denne applikasjonen. Her refereres det til tilsvarende ",(0,i.jsx)(r.code,{children:"AzureAdApplication"}),"."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"application"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Navnet p\xe5 den forh\xe5ndsgodkjente applikasjonen."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"namespace"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Namespacet hvor den forh\xe5ndsgodkjente applikasjonen befinner seg."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"cluster"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Clusteret hvor den forh\xe5ndsgodkjente applikasjonen befinner seg."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"permissions"})," ",(0,i.jsx)(r.em,{children:"(object, optional)"})," \u2013 Spesifiserer hvilke claims den forh\xe5ndsautoriserte applikasjonen har."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"scopes"})," ",(0,i.jsx)(r.em,{children:"([]string, optional)"})," \u2013 Liste med egendefinerte tilgangs-scopes tildelt til den forh\xe5ndsautoriserte appliaksjonen."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"roles"})," ",(0,i.jsx)(r.em,{children:"([]string, optional)"})," \u2013 Liste med egendefinerte tilgangs-roller tildelt til den forh\xe5ndsautoriserte appliaksjonen."]})]})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"secretName"})," ",(0,i.jsx)(r.em,{children:"(string, required)"})," \u2013 Navnet p\xe5 den resulterende ",(0,i.jsx)(r.code,{children:"Secret"}),"-ressursen som vil bli opprettet."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"secretKeyPrefix"})," ",(0,i.jsx)(r.em,{children:"(string, optional)"})," \u2013 Et valgfritt brukerdefinert prefiks som brukes p\xe5 n\xf8klene i den genererte hemmeligheten, og erstatter standardprefikset (AZURE)."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"secretProtected"})," ",(0,i.jsx)(r.em,{children:"(bool, optional)"})," \u2013 Angir om hemmeligheten skal tilbaketrekkes selv n\xe5r den ikke er i bruk."]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"singlePageApplication"})," ",(0,i.jsx)(r.em,{children:"(bool, optional)"})," \u2013 Angir om denne Entra ID-applikasjonen skal registreres som en single-page-application for bruk i klient-side-applikasjoner uten tilgang til hemmeligheter."]})]}),"\n",(0,i.jsxs)(r.p,{children:["F\xf8lgende eksempel oppretter app-registreringen ",(0,i.jsx)(r.code,{children:"atgcp1-sandbox:tilgangsstyring-main:test-app"}),".\nDen gir kun tilgang til direkte medlemmer av gruppene med objekt-ID ",(0,i.jsx)(r.code,{children:"2720e397-081d-4d9b-852e-0d81f45a304f"})," eller ",(0,i.jsx)(r.code,{children:"c3c94454-aefc-44f9-9076-58ea47547941"}),".\nDen forh\xe5ndsautoriserer ogs\xe5 Entra ID klienten ",(0,i.jsx)(r.code,{children:"atgcp1-dev:other-namespace:other-app"}),".\nN\xe5r registrering er fullf\xf8rt vil Azurerator opprette Kubernetes-hemmeligheten ",(0,i.jsx)(r.code,{children:"entraid-secret"})," i namespacet ",(0,i.jsx)(r.code,{children:"tilgangsstyring-main"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"apiVersion: nais.io/v1\nkind: AzureAdApplication\nmetadata:\n  name: test-app\n  namespace: tilgangsstyring-main\nspec:\n  allowAllUsers: false\n  secretName: entraid-secret\n  claims:\n    groups:\n      - id: 2720e397-081d-4d9b-852e-0d81f45a304f\n      - id: c3c94454-aefc-44f9-9076-58ea47547941\n  replyUrls:\n    - url: https://test-app.atgcp1-sandbox.kartverket-intern.cloud/oauth2/callback\n  preAuthorizedApplications:\n    - application: other-app\n      namespace: other-namespace\n      cluster: atgcp1-dev\n"})})]})}function p(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);