(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[6667],{77232:function(e,t,i){var n;!function(s,r){"use strict";var o="function",a="undefined",l="object",u="string",c="major",d="model",p="name",h="type",g="vendor",f="version",m="architecture",v="console",b="mobile",w="tablet",y="smarttv",S="wearable",T="embedded",E="Amazon",k="Apple",x="ASUS",O="BlackBerry",I="Browser",A="Chrome",_="Firefox",L="Google",j="Honor",C="Huawei",P="LG",M="Microsoft",U="Motorola",D="Nvidia",N="OnePlus",R="Opera",z="OPPO",q="Samsung",B="Sharp",F="Sony",$="Xiaomi",V="Zebra",H="Facebook",W="Chromium OS",G="Mac OS",K=" Browser",X=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},J=function(e,t){return typeof e===u&&-1!==Z(t).indexOf(Z(e))},Z=function(e){return e.toLowerCase()},Q=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},Y=function(e,t){for(var i,n,s,a,u,c,d=0;d<t.length&&!u;){var p=t[d],h=t[d+1];for(i=n=0;i<p.length&&!u&&p[i];)if(u=p[i++].exec(e))for(s=0;s<h.length;s++)c=u[++n],typeof(a=h[s])===l&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):r:this[a[0]]=c?a[1].call(this,c,a[2]):r:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):r):this[a]=c||r;d+=2}},ee=function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(J(t[i][n],e))return"?"===i?r:i}else if(J(t[i],e))return"?"===i?r:i;return t.hasOwnProperty("*")?t["*"]:e},te={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ie={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,f],[/opios[\/ ]+([\w\.]+)/i],[f,[p,R+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[p,R+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[p,R]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[f,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[p,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[p,"Smart Lenovo "+I]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+I],f],[/\bfocus\/([\w\.]+)/i],[f,[p,_+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[p,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[p,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[p,"MIUI"+K]],[/fxios\/([\w\.-]+)/i],[f,[p,_]],[/\bqihoobrowser\/?([\w\.]*)/i],[f,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+K],f],[/samsungbrowser\/([\w\.]+)/i],[f,[p,q+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[f,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[f,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,H],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[p,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,A+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[p,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[f,ee,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],f],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[p,_+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[p,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[f,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[m,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[m,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[m,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[m,/ower/,"",Z]],[/ sun4\w[;\)]/i],[[m,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[m,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[g,q],[h,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[g,q],[h,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[g,k],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[g,k],[h,w]],[/(macintosh);/i],[d,[g,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[g,B],[h,b]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[d,[g,j],[h,w]],[/honor([-\w ]+)[;\)]/i],[d,[g,j],[h,b]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[d,[g,C],[h,w]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[g,C],[h,b]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[d,/_/g," "],[g,$],[h,w]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[d,/_/g," "],[g,$],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[g,z],[h,b]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[d,[g,ee,{OnePlus:["304","403","203"],"*":z}],[h,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[g,"Vivo"],[h,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[g,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[g,U],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[g,U],[h,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[g,P],[h,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[g,P],[h,b]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[d,[g,"Lenovo"],[h,w]],[/(nokia) (t[12][01])/i],[g,d,[h,w]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[d,/_/g," "],[h,b],[g,"Nokia"]],[/(pixel (c|tablet))\b/i],[d,[g,L],[h,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[g,L],[h,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[g,F],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[g,F],[h,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[g,N],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[g,E],[h,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[g,E],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,g,[h,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[g,O],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[g,x],[h,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[g,x],[h,b]],[/(nexus 9)/i],[d,[g,"HTC"],[h,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[d,/_/g," "],[h,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[g,"TCL"],[h,w]],[/(itel) ((\w+))/i],[[g,Z],d,[h,ee,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[g,"Acer"],[h,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[g,"Meizu"],[h,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[g,"Ulefone"],[h,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[g,"Energizer"],[h,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[g,"Cat"],[h,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[g,"Smartfren"],[h,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[g,"Nothing"],[h,b]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[d,[g,"Archos"],[h,w]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[d,[g,"Archos"],[h,b]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[g,d,[h,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[g,d,[h,b]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,d,[h,w]],[/(surface duo)/i],[d,[g,M],[h,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[g,"Fairphone"],[h,b]],[/(u304aa)/i],[d,[g,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[d,[g,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[d,[g,"RCA"],[h,w]],[/\b(venue[\d ]{2,7}) b/i],[d,[g,"Dell"],[h,w]],[/\b(q(?:mv|ta)\w+) b/i],[d,[g,"Verizon"],[h,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[g,"Barnes & Noble"],[h,w]],[/\b(tm\d{3}\w+) b/i],[d,[g,"NuVision"],[h,w]],[/\b(k88) b/i],[d,[g,"ZTE"],[h,w]],[/\b(nx\d{3}j) b/i],[d,[g,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[d,[g,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[d,[g,"Swiss"],[h,w]],[/\b((zeki)?tb.*\b) b/i],[d,[g,"Zeki"],[h,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],d,[h,w]],[/\b(ns-?\w{0,9}) b/i],[d,[g,"Insignia"],[h,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[g,"NextBook"],[h,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],d,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],d,[h,b]],[/\b(ph-1) /i],[d,[g,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[g,"Envizen"],[h,w]],[/\b(trio[-\w\. ]+) b/i],[d,[g,"MachSpeed"],[h,w]],[/\btu_(1491) b/i],[d,[g,"Rotor"],[h,w]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[d,[g,D],[h,w]],[/(sprint) (\w+)/i],[g,d,[h,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[g,M],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[g,V],[h,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[g,V],[h,b]],[/smart-tv.+(samsung)/i],[g,[h,y]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[g,q],[h,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,P],[h,y]],[/(apple) ?tv/i],[g,[d,k+" TV"],[h,y]],[/crkey/i],[[d,A+"cast"],[g,L],[h,y]],[/droid.+aft(\w+)( bui|\))/i],[d,[g,E],[h,y]],[/(shield \w+ tv)/i],[d,[g,D],[h,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[g,B],[h,y]],[/(bravia[\w ]+)( bui|\))/i],[d,[g,F],[h,y]],[/(mi(tv|box)-?\w+) bui/i],[d,[g,$],[h,y]],[/Hbbtv.*(technisat) (.*);/i],[g,d,[h,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,Q],[d,Q],[h,y]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[d,[h,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,d,[h,v]],[/droid.+; (shield)( bui|\))/i],[d,[g,D],[h,v]],[/(playstation \w+)/i],[d,[g,F],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[g,M],[h,v]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[d,[g,q],[h,S]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[g,d,[h,S]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[d,[g,z],[h,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[g,k],[h,S]],[/(opwwe\d{3})/i],[d,[g,N],[h,S]],[/(moto 360)/i],[d,[g,U],[h,S]],[/(smartwatch 3)/i],[d,[g,F],[h,S]],[/(g watch r)/i],[d,[g,P],[h,S]],[/droid.+; (wt63?0{2,3})\)/i],[d,[g,V],[h,S]],[/droid.+; (glass) \d/i],[d,[g,L],[h,S]],[/(pico) (4|neo3(?: link|pro)?)/i],[g,d,[h,S]],[/; (quest( \d| pro)?)/i],[d,[g,H],[h,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[h,T]],[/(aeobc)\b/i],[d,[g,E],[h,T]],[/(homepod).+mac os/i],[d,[g,k],[h,T]],[/windows iot/i],[[h,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[h,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,b]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[d,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[p,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[p,f],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,f],[/ladybird\//i],[[p,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,f],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[p,[f,ee,te]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,ee,te],[p,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,G],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,p],[/(ubuntu) ([\w\.]+) like android/i],[[p,/(.+)/,"$1 Touch"],f],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[p,f],[/\(bb(10);/i],[f,[p,O]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[f,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[p,_+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[p,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,f],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,f]]},ne=function(e,t){if(typeof e===l&&(t=e,e=r),!(this instanceof ne))return new ne(e,t).getResult();var i=typeof s!==a&&s.navigator?s.navigator:r,n=e||(i&&i.userAgent?i.userAgent:""),v=i&&i.userAgentData?i.userAgentData:r,y=t?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(ie,t):ie,S=i&&i.userAgent==n;return this.getBrowser=function(){var e,t={};return t[p]=r,t[f]=r,Y.call(t,n,y.browser),t[c]=typeof(e=t[f])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:r,S&&i&&i.brave&&typeof i.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[m]=r,Y.call(e,n,y.cpu),e},this.getDevice=function(){var e={};return e[g]=r,e[d]=r,e[h]=r,Y.call(e,n,y.device),S&&!e[h]&&v&&v.mobile&&(e[h]=b),S&&"Macintosh"==e[d]&&i&&typeof i.standalone!==a&&i.maxTouchPoints&&i.maxTouchPoints>2&&(e[d]="iPad",e[h]=w),e},this.getEngine=function(){var e={};return e[p]=r,e[f]=r,Y.call(e,n,y.engine),e},this.getOS=function(){var e={};return e[p]=r,e[f]=r,Y.call(e,n,y.os),S&&!e[p]&&v&&v.platform&&"Unknown"!=v.platform&&(e[p]=v.platform.replace(/chrome os/i,W).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>500?Q(e,500):e,this},this.setUA(n),this};ne.VERSION="1.0.41",ne.BROWSER=X([p,f,c]),ne.CPU=X([m]),ne.DEVICE=X([d,g,h,v,b,y,w,S,T]),ne.ENGINE=ne.OS=X([p,f]),typeof t!==a?(e.exports&&(t=e.exports=ne),t.UAParser=ne):i.amdO?(n=function(){return ne}.call(t,i,t,e))===r||(e.exports=n):typeof s!==a&&(s.UAParser=ne);var se=typeof s!==a&&(s.jQuery||s.Zepto);if(se&&!se.ua){var re=new ne;se.ua=re.getResult(),se.ua.get=function(){return re.getUA()},se.ua.set=function(e){re.setUA(e);var t=re.getResult();for(var i in t)se.ua[i]=t[i]}}}("object"==typeof window?window:this)},96667:(e,t,i)=>{"use strict";i.d(t,{pu:()=>En});var n=i(96540);function s(e,t){return typeof e===t}function r(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function o(e,t){try{return e instanceof t}catch(i){return!1}}const a=e=>s(e,"null"),l=e=>s(e,"string"),u=e=>s(e,"number")&&!isNaN(e)||s(e,"bigint"),c=e=>s(e,"boolean"),d=e=>!a(e)&&s(e,"object"),p=e=>s(e,"function"),h=e=>r(e,"Array"),g="undefined"!=typeof Event,f="undefined"!=typeof Error,m=e=>f&&o(e,Error);function v(e){return null==e||(h(e)||l(e)?0===e.length:!!d(e)&&0===Object.keys(e).length)}const b=n.version,w=function(){const e=b.split(".");try{return e[0]?parseInt(e[0],10):null}catch(t){return null}}();y(18),y(17),y(16);function y(e){return null!==w&&w>=e}n.Component;var S;i(74848),i(4146);function T(){}!function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.VERBOSE=4]="VERBOSE"}(S||(S={}));const E={debug:T,error:T,info:T,prefix:"Faro",warn:T},k=S.ERROR,x=Object.assign({},console);class O{constructor(){this.unpatchedConsole=x,this.internalLogger=E,this.config={},this.metas={}}logDebug(...e){this.internalLogger.debug(`${this.name}\n`,...e)}logInfo(...e){this.internalLogger.info(`${this.name}\n`,...e)}logWarn(...e){this.internalLogger.warn(`${this.name}\n`,...e)}logError(...e){this.internalLogger.error(`${this.name}\n`,...e)}}class I extends O{constructor(){super(...arguments),this.api={},this.transports={}}}const A="2.0.2";var _,L;!function(e){e.V4="v4",e.V5="v5",e.V6="v6",e.V6_data_router="v6_data_router"}(_||(_={})),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(L||(L={}));const j="session_start",C="session_resume",P="service_name_override";const M="undefined"!=typeof globalThis?globalThis:void 0!==i.g?i.g:"undefined"!=typeof self?self:void 0;n.Component;var U;!function(e){e.EXCEPTION="exception",e.LOG="log",e.MEASUREMENT="measurement",e.TRACE="trace",e.EVENT="event"}(U||(U={}));const D={[U.EXCEPTION]:"exceptions",[U.LOG]:"logs",[U.MEASUREMENT]:"measurements",[U.TRACE]:"traces",[U.EVENT]:"events"};function N(e={}){return JSON.stringify(null!=e?e:{},function(){const e=new WeakSet;return function(t,i){if(d(i)&&null!==i){if(e.has(i))return null;e.add(i)}return i}}())}function R(e={}){const t={};for(const[i,n]of Object.entries(e))t[i]=d(n)&&null!==n?N(n):String(n);return t}function z(){return Date.now()}function q(){return(new Date).toISOString()}function B(e){return new Date(e).toISOString()}function F(e,t){if(e===t)return!0;if(s(e,"number")&&isNaN(e))return s(t,"number")&&isNaN(t);const i=h(e),n=h(t);if(i!==n)return!1;if(i&&n){const i=e.length;if(i!==t.length)return!1;for(let n=i;0!==n--;)if(!F(e[n],t[n]))return!1;return!0}const r=d(e),o=d(t);if(r!==o)return!1;if(e&&t&&r&&o){const i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(let e of i)if(!n.includes(e))return!1;for(let s of i)if(!F(e[s],t[s]))return!1;return!0}return!1}class ${constructor(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),{unsubscribe:()=>this.unsubscribe(e)}}unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)}notify(e){this.subscribers.forEach(t=>t(e))}first(){const e=new $,t=t=>{e.notify(t),i.unsubscribe()},i=this.subscribe(t),n=e.unsubscribe.bind(e);return this.withUnsubscribeOverride(e,n,t)}takeWhile(e){const t=new $,i=n=>{e(n)?t.notify(n):t.unsubscribe(i)};this.subscribe(i);const n=t.unsubscribe.bind(t);return this.withUnsubscribeOverride(t,n,i)}filter(e){const t=new $,i=i=>{e(i)&&t.notify(i)};this.subscribe(i);const n=t.unsubscribe.bind(t);return this.withUnsubscribeOverride(t,n,i)}merge(...e){const t=new $,i=[];e.forEach(e=>{const n=e.subscribe(e=>{t.notify(e)});i.push(n)});const n=t.unsubscribeAll.bind(t);return t.unsubscribe=()=>{i.forEach(e=>e.unsubscribe()),n()},t}withUnsubscribeOverride(e,t,i){return e.unsubscribe=e=>{t(e),this.unsubscribe(i)},e}unsubscribeAll(){this.subscribers=[]}}const V="faroApiCall",H="user_action_start",W={Normal:"normal",Critical:"critical"};var G;!function(e){e[e.Started=0]="Started",e[e.Halted=1]="Halted",e[e.Cancelled=2]="Cancelled",e[e.Ended=3]="Ended"}(G||(G={}));const K="_faroInternal";let X={};function J(e,t,i,n,s,r,o){return t.debug("Initializing Faro"),X={api:r,config:i,instrumentations:o,internalLogger:t,metas:n,pause:s.pause,transports:s,unpatchedConsole:e,unpause:s.unpause},function(e){e.config.isolate?e.internalLogger.debug("Skipping registering internal Faro instance on global object"):(e.internalLogger.debug("Registering internal Faro instance on global object"),Object.defineProperty(M,K,{configurable:!1,enumerable:!1,writable:!1,value:e}))}(X),function(e){if(e.config.preventGlobalExposure)e.internalLogger.debug("Skipping registering public Faro instance in the global scope");else{if(e.internalLogger.debug(`Registering public faro reference in the global scope using "${e.config.globalObjectKey}" key`),e.config.globalObjectKey in M)return void e.internalLogger.warn(`Skipping global registration due to key "${e.config.globalObjectKey}" being used already. Please set "globalObjectKey" to something else or set "preventGlobalExposure" to "true"`);Object.defineProperty(M,e.config.globalObjectKey,{configurable:!1,writable:!1,value:e})}}(X),X}const Z="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789";function Q(e=10){return Array.from(Array(e)).map(()=>Z[Math.floor(59*Math.random())]).join("")}class Y{constructor(){this.buffer=[]}addItem(e){this.buffer.push(e)}flushBuffer(e){if(p(e))for(const t of this.buffer)e(t);this.buffer.length=0}size(){return this.buffer.length}}class ee extends ${constructor({name:e,parentId:t,trigger:i,transports:n,attributes:s,trackUserActionsExcludeItem:r,importance:o=W.Normal}){super(),this.name=e,this.attributes=s,this.id=Q(),this.trigger=i,this.parentId=null!=t?t:this.id,this.trackUserActionsExcludeItem=r,this.importance=o,this._itemBuffer=new Y,this._transports=n,this._state=G.Started,this._start()}addItem(e){return this._state===G.Started&&(this._itemBuffer.addItem(e),!0)}_start(){this._state=G.Started,this._state===G.Started&&(this.startTime=z())}halt(){this._state===G.Started&&(this._state=G.Halted,this.notify(this._state))}cancel(){this._state===G.Started&&this._itemBuffer.flushBuffer(),this._state=G.Cancelled,this.notify(this._state)}end(){if(this._state===G.Cancelled)return;const e=z(),t=e-this.startTime;this._state=G.Ended,this._itemBuffer.flushBuffer(e=>{if(function(e,t){return(null==t?void 0:t(e))||e.type===U.MEASUREMENT&&"web-vitals"===e.payload.type}(e,this.trackUserActionsExcludeItem))return void this._transports.execute(e);const t=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{action:{parentId:this.id,name:this.name}})});this._transports.execute(t)}),this._state=G.Ended,this.notify(this._state),X.api.pushEvent("faro.user.action",Object.assign({userActionName:this.name,userActionStartTime:this.startTime.toString(),userActionEndTime:e.toString(),userActionDuration:t.toString(),userActionTrigger:this.trigger,userActionImportance:this.importance},R(this.attributes)),void 0,{timestampOverwriteMs:this.startTime,customPayloadTransformer:e=>(e.action={id:this.id,name:this.name},e)})}getState(){return this._state}}const te=new $;function ie(e,t){if(!e)return!1;return(null==e?void 0:e.getState())===G.Started&&(e.addItem(t),!0)}const ne="Error",se=e=>e.map(e=>d(e)?N(e):String(e)).join(" ");let re;function oe({internalLogger:e,config:t,metas:i,transports:n,tracesApi:s,userActionsApi:r}){var o;e.debug("Initializing exceptions API");let u=null;re=null!==(o=t.parseStacktrace)&&void 0!==o?o:re;const c=t=>{e.debug("Changing stacktrace parser"),re=null!=t?t:re},{ignoreErrors:p=[],preserveOriginalError:g}=t;return c(t.parseStacktrace),{changeStacktraceParser:c,getStacktraceParser:()=>re,pushError:(o,{skipDedupe:c,stackFrames:f,type:b,context:w,spanContext:y,timestampOverwriteMs:S,originalError:T}={})=>{if(!function(e,t){const{message:i,name:n,stack:s}=t;return r=e,o=i+" "+n+" "+s,r.some(e=>l(e)?o.includes(e):!!o.match(e));var r,o}(p,null!=T?T:o))try{const l=R(Object.assign(Object.assign({},function(e){let t=e.cause;m(t)?t=e.cause.toString():null!==t&&(d(e.cause)||h(e.cause))?t=N(e.cause):null!=t&&(t=e.cause.toString());return null==t?{}:{cause:t}}(null!=T?T:o)),null!=w?w:{})),p={meta:i.value,payload:Object.assign(Object.assign({type:b||o.name||ne,value:o.message,timestamp:S?B(S):q(),trace:y?{trace_id:y.traceId,span_id:y.spanId}:s.getTraceContext()},v(l)?{}:{context:l}),g?{originalError:T}:{}),type:U.EXCEPTION};(null==(f=null!=f?f:o.stack?null==re?void 0:re(o).frames:void 0)?void 0:f.length)&&(p.payload.stacktrace={frames:f});const E={type:p.payload.type,value:p.payload.value,stackTrace:p.payload.stacktrace,context:p.payload.context};if(!c&&t.dedupe&&!a(u)&&F(E,u))return void e.debug("Skipping error push because it is the same as the last one\n",p.payload);u=E,e.debug("Pushing exception\n",p),ie(r.getActiveUserAction(),p)||n.execute(p)}catch(E){e.error("Error pushing event",E)}}}}var ae;!function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error"}(ae||(ae={}));const le=ae.LOG,ue=[ae.TRACE,ae.DEBUG,ae.INFO,ae.LOG,ae.WARN,ae.ERROR],ce=e=>e.map(e=>{try{return String(e)}catch(t){return""}}).join(" ");function de(e,t,i,n,s){t.debug("Initializing API");const r=function({transports:e,internalLogger:t,config:i}){var n;const s=null===(n=i.userActionsInstrumentation)||void 0===n?void 0:n.excludeItem;let r;const o=()=>r,a={startUserAction:(i,n,a)=>{if(void 0===o()){const t=new ee({name:i,transports:e,attributes:n,trigger:(null==a?void 0:a.triggerName)||V,importance:(null==a?void 0:a.importance)||W.Normal,trackUserActionsExcludeItem:s});return t.filter(e=>[G.Ended,G.Cancelled].includes(e)).first().subscribe(()=>{r=void 0}),te.notify({type:H,userAction:t}),r=t,r}t.error("Attempted to create a new user action while one is already running. This is not possible.")},getActiveUserAction:o};return a}({transports:s,config:i,internalLogger:t}),o=function(e,t,i,n,s){let r;return t.debug("Initializing traces API"),{getOTEL:()=>r,getTraceContext:()=>{const e=null==r?void 0:r.trace.getSpanContext(r.context.active());return e?{trace_id:e.traceId,span_id:e.spanId}:void 0},initOTEL:(e,i)=>{t.debug("Initializing OpenTelemetry"),r={trace:e,context:i}},isOTELInitialized:()=>!!r,pushTraces:e=>{try{const i={type:U.TRACE,payload:e,meta:n.value};t.debug("Pushing trace\n",i),s.execute(i)}catch(i){t.error("Error pushing trace\n",i)}}}}(0,t,0,n,s),u={unpatchedConsole:e,internalLogger:t,userActionsApi:r,config:i,metas:n,transports:s,tracesApi:o};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),oe(u)),function({internalLogger:e,metas:t}){let i,n,s,r;e.debug("Initializing meta API");const o=e=>{n&&t.remove(n),n={user:e},t.add(n)},a=(e,n)=>{var s;const r=null==n?void 0:n.overrides,o=r?{overrides:Object.assign(Object.assign({},null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.overrides),r)}:{};i&&t.remove(i),i={session:Object.assign(Object.assign({},v(e)?void 0:e),o)},t.add(i)},u=()=>t.value.session,c=()=>t.value.page;return{setUser:o,resetUser:o,setSession:a,resetSession:a,getSession:u,setView:(e,i)=>{var n;if((null==i?void 0:i.overrides)&&a(u(),{overrides:i.overrides}),(null===(n=null==s?void 0:s.view)||void 0===n?void 0:n.name)===(null==e?void 0:e.name))return;const r=s;s={view:e},t.add(s),r&&t.remove(r)},getView:()=>t.value.view,setPage:e=>{var i;const n=l(e)?Object.assign(Object.assign({},null!==(i=null==r?void 0:r.page)&&void 0!==i?i:c()),{id:e}):e;r&&t.remove(r),r={page:n},t.add(r)},getPage:c}}(u)),function({internalLogger:e,config:t,metas:i,transports:n,tracesApi:s,userActionsApi:r}){var o;e.debug("Initializing logs API");let l=null;const u=null!==(o=t.logArgsSerializer)&&void 0!==o?o:ce;return{pushLog:(o,{context:c,level:d,skipDedupe:p,spanContext:h,timestampOverwriteMs:g}={})=>{try{const f=R(c),m={type:U.LOG,payload:{message:u(o),level:null!=d?d:le,context:v(f)?void 0:f,timestamp:g?B(g):q(),trace:h?{trace_id:h.traceId,span_id:h.spanId}:s.getTraceContext()},meta:i.value},b={message:m.payload.message,level:m.payload.level,context:m.payload.context};if(!p&&t.dedupe&&!a(l)&&F(b,l))return void e.debug("Skipping log push because it is the same as the last one\n",m.payload);l=b,e.debug("Pushing log\n",m),ie(r.getActiveUserAction(),m)||n.execute(m)}catch(f){e.error("Error pushing log\n",f)}}}}(u)),function({internalLogger:e,config:t,metas:i,transports:n,tracesApi:s,userActionsApi:r}){e.debug("Initializing measurements API");let o=null;return{pushMeasurement:(l,{skipDedupe:u,context:c,spanContext:d,timestampOverwriteMs:p}={})=>{try{const h=R(c),g={type:U.MEASUREMENT,payload:Object.assign(Object.assign({},l),{trace:d?{trace_id:d.traceId,span_id:d.spanId}:s.getTraceContext(),timestamp:p?B(p):q(),context:v(h)?void 0:h}),meta:i.value},f={type:g.payload.type,values:g.payload.values,context:g.payload.context};if(!u&&t.dedupe&&!a(o)&&F(f,o))return void e.debug("Skipping measurement push because it is the same as the last one\n",g.payload);o=f,e.debug("Pushing measurement\n",g),ie(r.getActiveUserAction(),g)||n.execute(g)}catch(h){e.error("Error pushing measurement\n",h)}}}}(u)),function({internalLogger:e,config:t,metas:i,transports:n,tracesApi:s,userActionsApi:r}){let o=null;return{pushEvent:(l,u,c,{skipDedupe:d,spanContext:p,timestampOverwriteMs:h,customPayloadTransformer:g=e=>e}={})=>{try{const f=R(u),m={meta:i.value,payload:g({name:l,domain:null!=c?c:t.eventDomain,attributes:v(f)?void 0:f,timestamp:h?B(h):q(),trace:p?{trace_id:p.traceId,span_id:p.spanId}:s.getTraceContext()}),type:U.EVENT},b={name:m.payload.name,attributes:m.payload.attributes,domain:m.payload.domain};if(!d&&t.dedupe&&!a(o)&&F(b,o))return void e.debug("Skipping event push because it is the same as the last one\n",m.payload);o=b,e.debug("Pushing event\n",m),ie(r.getActiveUserAction(),m)||n.execute(m)}catch(f){e.error("Error pushing event",f)}}}}(u)),r)}function pe(e=x,t=k){const i=E;return t>S.OFF&&(i.error=t>=S.ERROR?function(...t){e.error(`${i.prefix}\n`,...t)}:T,i.warn=t>=S.WARN?function(...t){e.warn(`${i.prefix}\n`,...t)}:T,i.info=t>=S.INFO?function(...t){e.info(`${i.prefix}\n`,...t)}:T,i.debug=t>=S.VERBOSE?function(...t){e.debug(`${i.prefix}\n`,...t)}:T),i}let he=E;class ge{constructor(e,t){var i,n;this.signalBuffer=[],this.itemLimit=null!==(i=null==t?void 0:t.itemLimit)&&void 0!==i?i:50,this.sendTimeout=null!==(n=null==t?void 0:t.sendTimeout)&&void 0!==n?n:250,this.paused=(null==t?void 0:t.paused)||!1,this.sendFn=e,this.flushInterval=-1,this.paused||this.start(),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.flush()})}addItem(e){this.paused||(this.signalBuffer.push(e),this.signalBuffer.length>=this.itemLimit&&this.flush())}start(){this.paused=!1,this.sendTimeout>0&&(this.flushInterval=window.setInterval(()=>this.flush(),this.sendTimeout))}pause(){this.paused=!0,clearInterval(this.flushInterval)}groupItems(e){const t=new Map;return e.forEach(e=>{const i=JSON.stringify(e.meta);let n=t.get(i);n=void 0===n?[e]:[...n,e],t.set(i,n)}),Array.from(t.values())}flush(){if(this.paused||0===this.signalBuffer.length)return;this.groupItems(this.signalBuffer).forEach(this.sendFn),this.signalBuffer=[]}}function fe(e,t,i,n){var s;t.debug("Initializing transports");const r=[];let o=i.paused,a=[];const l=e=>{let t=e;for(const n of a){const e=t.map(n).filter(Boolean);if(0===e.length)return[];t=me(e,i)}return t},u=e=>{const i=l(e);if(0!==i.length)for(const n of r)t.debug(`Transporting item using ${n.name}\n`,i),n.isBatched()&&n.send(i)};let c;(null===(s=i.batching)||void 0===s?void 0:s.enabled)&&(c=new ge(u,{sendTimeout:i.batching.sendTimeout,itemLimit:i.batching.itemLimit,paused:o}));return{add:(...s)=>{t.debug("Adding transports"),s.forEach(s=>{t.debug(`Adding "${s.name}" transport`);r.some(e=>e===s)?t.warn(`Transport ${s.name} is already added`):(s.unpatchedConsole=e,s.internalLogger=t,s.config=i,s.metas=n,r.push(s))})},addBeforeSendHooks:(...e)=>{t.debug("Adding beforeSendHooks\n",a),e.forEach(e=>{e&&a.push(e)})},getBeforeSendHooks:()=>[...a],execute:e=>{var n;o||((null===(n=i.batching)||void 0===n?void 0:n.enabled)&&(null==c||c.addItem(e)),(e=>{var n,s;if((null===(n=i.batching)||void 0===n?void 0:n.enabled)&&r.every(e=>e.isBatched()))return;const[o]=l([e]);if(void 0!==o)for(const a of r)t.debug(`Transporting item using ${a.name}\n`,o),a.isBatched()?(null===(s=i.batching)||void 0===s?void 0:s.enabled)||a.send([o]):a.send(o)})(e))},isPaused:()=>o,pause:()=>{t.debug("Pausing transports"),null==c||c.pause(),o=!0},remove:(...e)=>{t.debug("Removing transports"),e.forEach(e=>{t.debug(`Removing "${e.name}" transport`);const i=r.indexOf(e);-1!==i?r.splice(i,1):t.warn(`Transport "${e.name}" is not added`)})},removeBeforeSendHooks:(...e)=>{a.filter(t=>!e.includes(t))},get transports(){return[...r]},unpause:()=>{t.debug("Unpausing transports"),null==c||c.start(),o=!1}}}function me(e,t){if(t.preserveOriginalError)for(const i of e)i.type===U.EXCEPTION&&delete i.payload.originalError;return e}let ve=x;function be(e){var t;return ve=null!==(t=e.unpatchedConsole)&&void 0!==t?t:ve,ve}function we(e){const t=be(e),i=function(e,t){return he=pe(e,t.internalLoggerLevel),he}(t,e);if(K in M&&!e.isolate)return void i.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property');i.debug("Initializing");const n=function(e,t){let i=[],n=[];const s=()=>i.reduce((e,t)=>Object.assign(e,p(t)?t():t),{}),r=()=>{if(n.length){const e=s();n.forEach(t=>t(e))}};return{add:(...e)=>{t.debug("Adding metas\n",e),i.push(...e),r()},remove:(...e)=>{t.debug("Removing metas\n",e),i=i.filter(t=>!e.includes(t)),r()},addListener:e=>{t.debug("Adding metas listener\n",e),n.push(e)},removeListener:e=>{t.debug("Removing metas listener\n",e),n=n.filter(t=>t!==e)},get value(){return s()}}}(0,i),s=fe(t,i,e,n),r=de(t,i,e,n,s),o=function(e,t,i,n,s,r){t.debug("Initializing instrumentations");const o=[];return{add:(...a)=>{t.debug("Adding instrumentations"),a.forEach(a=>{t.debug(`Adding "${a.name}" instrumentation`),o.some(e=>e.name===a.name)?t.warn(`Instrumentation ${a.name} is already added`):(a.unpatchedConsole=e,a.internalLogger=t,a.config=i,a.metas=n,a.transports=s,a.api=r,o.push(a),a.initialize())})},get instrumentations(){return[...o]},remove:(...e)=>{t.debug("Removing instrumentations"),e.forEach(e=>{var i,n;t.debug(`Removing "${e.name}" instrumentation`);const s=o.reduce((t,i,n)=>null===t&&i.name===e.name?n:null,null);null!==s?(null===(n=(i=o[s]).destroy)||void 0===n||n.call(i),o.splice(s,1)):t.warn(`Instrumentation "${e.name}" is not added`)})}}}(t,i,e,n,s,r),a=J(t,i,e,n,s,r,o);return function(e){var t,i;const n={sdk:{version:A},app:{bundleId:e.config.app.name&&(s=e.config.app.name,null==M?void 0:M[`__faroBundleId_${s}`])}};var s;const r=null===(t=e.config.sessionTracking)||void 0===t?void 0:t.session;r&&e.api.setSession(r),e.config.app&&(n.app=Object.assign(Object.assign({},e.config.app),n.app)),e.config.user&&(n.user=e.config.user),e.config.view&&(n.view=e.config.view),e.metas.add(n,...null!==(i=e.config.metas)&&void 0!==i?i:[])}(a),function(e){e.transports.add(...e.config.transports),e.transports.addBeforeSendHooks(e.config.beforeSend)}(a),function(e){e.instrumentations.add(...e.config.instrumentations)}(a),a}const ye="faro",Se={enabled:!0,sendTimeout:250,itemLimit:50},Te="browser",Ee="\n",ke="eval",xe="?",Oe="@",Ie=/^\s*at (?:(?![a-z]+:\/\/)([^(]+?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ae=/\((\S*)(?::(\d+))(?::(\d+))\)/,_e="eval",Le="address at ",je=Le.length,Ce=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Me=" > eval",Ue="safari-extension",De="safari-web-extension",Ne=/Minified React error #\d+;/i;function Re(e,t,i,n){const s={filename:e||document.location.href,function:t||xe};return void 0!==i&&(s.lineno=i),void 0!==n&&(s.colno=n),s}function ze(e,t){const i=null==e?void 0:e.includes(Ue),n=!i&&(null==e?void 0:e.includes(De));return i||n?[(null==e?void 0:e.includes(Oe))?e.split(Oe)[0]:e,i?`${Ue}:${t}`:`${De}:${t}`]:[e,t]}function qe(e){let t=[];e.stacktrace?t=e.stacktrace.split(Ee).filter((e,t)=>t%2==0):e.stack&&(t=e.stack.split(Ee));const i=t.reduce((t,i,n)=>{let s,r,o,a,l;if(s=Ie.exec(i)){if(r=s[1],o=s[2],a=s[3],l=s[4],null==o?void 0:o.startsWith(_e)){const e=Ae.exec(o);e&&(o=e[1],a=e[2],l=e[3])}o=(null==o?void 0:o.startsWith(Le))?o.substring(je):o,[r,o]=ze(r,o)}else if(s=Ce.exec(i)){if(r=s[1],o=s[3],a=s[4],l=s[5],o&&o.includes(Me)){const e=Pe.exec(o);e&&(r=r||ke,o=e[1],a=e[2])}else 0===n&&!l&&u(e.columnNumber)&&(l=String(e.columnNumber+1));[r,o]=ze(r,o)}return(o||r)&&t.push(Re(o,r,a?Number(a):void 0,l?Number(l):void 0)),t},[]);return Ne.test(e.message)?i.slice(1):i}function Be(e){return{frames:qe(e)}}const Fe="com.grafana.faro.session",$e=9e5,Ve={enabled:!0,persistent:!1,maxSessionPersistenceTime:$e},He="data-faro-user-action-name";var We=i(77232);const Ge="unknown",Ke=()=>{const e=new We.UAParser,{name:t,version:i}=e.getBrowser(),{name:n,version:s}=e.getOS(),r=e.getUA(),o=navigator.language,a=navigator.userAgent.includes("Mobi"),l=function(){if(!t||!i)return;if("userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.brands;return}();return{browser:{name:null!=t?t:Ge,version:null!=i?i:Ge,os:`${null!=n?n:Ge} ${null!=s?s:Ge}`,userAgent:null!=r?r:Ge,language:null!=o?o:Ge,mobile:a,brands:null!=l?l:Ge,viewportWidth:`${window.innerWidth}`,viewportHeight:`${window.innerHeight}`}}},Xe=()=>{const e=window.k6;return{k6:Object.assign({isK6Browser:!0},(null==e?void 0:e.testRunId)&&{testRunId:null==e?void 0:e.testRunId})}};let Je,Ze;function Qe({generatePageId:e,initialPageMeta:t}={}){return()=>{const i=location.href;return p(e)&&Je!==i&&(Je=i,Ze=e(location)),{page:Object.assign(Object.assign({url:i},Ze?{id:Ze}:{}),t)}}}class Ye extends O{isBatched(){return!1}getIgnoreUrls(){return[]}}function et(e,t){var i,n;if(void 0===t)return e;if(void 0===e)return{resourceSpans:t};const s=null===(i=e.resourceSpans)||void 0===i?void 0:i[0];if(void 0===s)return e;const r=(null==s?void 0:s.scopeSpans)||[],o=(null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.scopeSpans)||[];return Object.assign(Object.assign({},e),{resourceSpans:[Object.assign(Object.assign({},s),{scopeSpans:[...r,...o]})]})}function tt(e,t){let i,n=!1;const s=()=>{null!=i?(e(...i),i=null,setTimeout(s,t)):n=!1};return(...r)=>{n?i=r:(e(...r),n=!0,setTimeout(s,t))}}const it="sessionStorage",nt="localStorage";function st(e){var t;try{let t;t=window[e];const i="__faro_storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){return null===(t=X.internalLogger)||void 0===t||t.info(`Web storage of type ${e} is not available. Reason: ${i}`),!1}}function rt(e,t){return ct(t)?window[t].getItem(e):null}function ot(e,t,i){if(ct(i))try{window[i].setItem(e,t)}catch(n){}}function at(e,t){ct(t)&&window[t].removeItem(e)}const lt=st(nt),ut=st(it);function ct(e){return e===nt?lt:e===it&&ut}function dt(){var e,t,i;const n=X.config.sessionTracking;let s=null!==(i=null!==(t=null===(e=null==n?void 0:n.sampler)||void 0===e?void 0:e.call(n,{metas:X.metas.value}))&&void 0!==t?t:null==n?void 0:n.samplingRate)&&void 0!==i?i:1;if("number"!=typeof s){s=0}return Math.random()<s}function pt({sessionId:e,started:t,lastActivity:i,isSampled:n=!0}={}){var s,r;const o=z(),a=null===(r=null===(s=X.config)||void 0===s?void 0:s.sessionTracking)||void 0===r?void 0:r.generateSessionId;return null==e&&(e="function"==typeof a?a():Q()),{sessionId:e,lastActivity:null!=i?i:o,started:null!=t?t:o,isSampled:n}}function ht(e){if(null==e)return!1;const t=z();if(!(t-e.started<144e5))return!1;return t-e.lastActivity<$e}function gt({fetchUserSession:e,storeUserSession:t}){return function({forceSessionExtend:i}={forceSessionExtend:!1}){var n,s,r;if(!e||!t)return;const o=X.config.sessionTracking,a=null==o?void 0:o.persistent;if(a&&!lt||!a&&!ut)return;const l=e();if(!1===i&&ht(l))t(Object.assign(Object.assign({},l),{lastActivity:z()}));else{let e=ft(pt({isSampled:dt()}),l);t(e),null===(n=X.api)||void 0===n||n.setSession(e.sessionMeta),null===(s=null==o?void 0:o.onSessionChange)||void 0===s||s.call(o,null!==(r=null==l?void 0:l.sessionMeta)&&void 0!==r?r:null,e.sessionMeta)}}}function ft(e,t){var i,n,s,r,o,a,l;const u=Object.assign(Object.assign({},e),{sessionMeta:{id:e.sessionId,attributes:Object.assign(Object.assign(Object.assign({},null===(n=null===(i=X.config.sessionTracking)||void 0===i?void 0:i.session)||void 0===n?void 0:n.attributes),null!==(r=null===(s=X.metas.value.session)||void 0===s?void 0:s.attributes)&&void 0!==r?r:{}),{isSampled:e.isSampled.toString()})}}),c=null!==(a=null===(o=X.metas.value.session)||void 0===o?void 0:o.overrides)&&void 0!==a?a:null===(l=null==t?void 0:t.sessionMeta)||void 0===l?void 0:l.overrides;v(c)||(u.sessionMeta.overrides=c);const d=null==t?void 0:t.sessionId;return null!=d&&(u.sessionMeta.attributes.previousSession=d),u}function mt({fetchUserSession:e,storeUserSession:t}){return function(i){const n=i.session,s=e();let r=null==n?void 0:n.id;const o=null==n?void 0:n.attributes,a=null==n?void 0:n.overrides,l=null==s?void 0:s.sessionMeta,u=null==l?void 0:l.overrides,c=!!a&&!F(a,u),d=!!o&&!F(o,null==l?void 0:l.attributes);if(!!n&&r!==(null==s?void 0:s.sessionId)||d||c){const e=ft(pt({sessionId:r,isSampled:dt()}),s);t(e),function(e,t={},i={}){var n,s,r;if(!e)return;const o=t.serviceName,a=null!==(r=null!==(n=i.serviceName)&&void 0!==n?n:null===(s=X.metas.value.app)||void 0===s?void 0:s.name)&&void 0!==r?r:"";o&&o!==a&&X.api.pushEvent(P,{serviceName:o,previousServiceName:a})}(c,a,u),X.api.setSession(e.sessionMeta)}}}class vt{constructor(){this.updateSession=tt(()=>this.updateUserSession(),1e3),this.updateUserSession=gt({fetchUserSession:vt.fetchUserSession,storeUserSession:vt.storeUserSession}),this.init()}static removeUserSession(){at(Fe,vt.storageTypeLocal)}static storeUserSession(e){ot(Fe,N(e),vt.storageTypeLocal)}static fetchUserSession(){const e=rt(Fe,vt.storageTypeLocal);return e?JSON.parse(e):null}init(){document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.updateSession()}),X.metas.addListener(mt({fetchUserSession:vt.fetchUserSession,storeUserSession:vt.storeUserSession}))}}vt.storageTypeLocal=nt;class bt{constructor(){this.updateSession=tt(()=>this.updateUserSession(),1e3),this.updateUserSession=gt({fetchUserSession:bt.fetchUserSession,storeUserSession:bt.storeUserSession}),this.init()}static removeUserSession(){at(Fe,bt.storageTypeSession)}static storeUserSession(e){ot(Fe,N(e),bt.storageTypeSession)}static fetchUserSession(){const e=rt(Fe,bt.storageTypeSession);return e?JSON.parse(e):null}init(){document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.updateSession()}),X.metas.addListener(mt({fetchUserSession:bt.fetchUserSession,storeUserSession:bt.storeUserSession}))}}function wt(e){return(null==e?void 0:e.persistent)?vt:bt}bt.storageTypeSession=it;var yt=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{l(n.next(e))}catch(li){r(li)}}function a(e){try{l(n.throw(e))}catch(li){r(li)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},St=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};class Tt extends Ye{constructor(e){var t,i,n,s;super(),this.options=e,this.name="@grafana/faro-web-sdk:transport-fetch",this.version=A,this.disabledUntil=new Date,this.rateLimitBackoffMs=null!==(t=e.defaultRateLimitBackoffMs)&&void 0!==t?t:5e3,this.getNow=null!==(i=e.getNow)&&void 0!==i?i:()=>Date.now(),this.promiseBuffer=function(e){const{size:t,concurrency:i}=e,n=[];let s=0;const r=()=>{if(s<i&&n.length){const{producer:e,resolve:t,reject:i}=n.shift();s++,e().then(e=>{s--,r(),t(e)},e=>{s--,r(),i(e)})}};return{add:e=>{if(n.length+s>=t)throw new Error("Task buffer full");return new Promise((t,i)=>{n.push({producer:e,resolve:t,reject:i}),r()})}}}({size:null!==(n=e.bufferSize)&&void 0!==n?n:30,concurrency:null!==(s=e.concurrency)&&void 0!==s?s:5})}send(e){return yt(this,void 0,void 0,function*(){try{if(this.disabledUntil>new Date(this.getNow()))return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`),Promise.resolve();yield this.promiseBuffer.add(()=>{const t=JSON.stringify(function(e){let t={meta:{}};return void 0!==e[0]&&(t.meta=e[0].meta),e.forEach(e=>{switch(e.type){case U.LOG:case U.EVENT:case U.EXCEPTION:case U.MEASUREMENT:{const i=D[e.type],n=t[i];t=Object.assign(Object.assign({},t),{[i]:void 0===n?[e.payload]:[...n,e.payload]});break}case U.TRACE:t=Object.assign(Object.assign({},t),{traces:et(t.traces,e.payload.resourceSpans)})}}),t}(e)),{url:i,requestOptions:n,apiKey:s}=this.options,r=null!=n?n:{},{headers:o}=r,a=St(r,["headers"]);let l;const u=this.metas.value.session;return null!=u&&(l=u.id),fetch(i,Object.assign({method:"POST",headers:Object.assign(Object.assign(Object.assign({"Content-Type":"application/json"},null!=o?o:{}),s?{"x-api-key":s}:{}),l?{"x-faro-session-id":l}:{}),body:t,keepalive:t.length<=6e4},null!=a?a:{})).then(e=>yt(this,void 0,void 0,function*(){if(202===e.status){"invalid"===e.headers.get("X-Faro-Session-Status")&&this.extendFaroSession(this.config,this.logDebug)}return 429===e.status&&(this.disabledUntil=this.getRetryAfterDate(e),this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)),e.text().catch(T),e})).catch(e=>{this.logError("Failed sending payload to the receiver\n",JSON.parse(t),e)})})}catch(t){this.logError(t)}})}getIgnoreUrls(){var e;return[this.options.url].concat(null!==(e=this.config.ignoreUrls)&&void 0!==e?e:[])}isBatched(){return!0}getRetryAfterDate(e){const t=this.getNow(),i=e.headers.get("Retry-After");if(i){const e=Number(i);if(!isNaN(e))return new Date(1e3*e+t);const n=Date.parse(i);if(!isNaN(n))return new Date(n)}return new Date(t+this.rateLimitBackoffMs)}extendFaroSession(e,t){const i="Session expired",n=e.sessionTracking;if(null==n?void 0:n.enabled){const{fetchUserSession:e,storeUserSession:s}=wt(n);gt({fetchUserSession:e,storeUserSession:s})({forceSessionExtend:!0}),t(`${i} created new session.`)}else t(`${i}.`)}}const Et="http-request-start",kt="http-request-end";let xt,Ot;function It(){return xt||(xt=new $),Ot||(Ot=new MutationObserver((e,t)=>{xt.notify({type:"dom-mutation"})}),Ot.observe(document,{attributes:!0,childList:!0,subtree:!0,characterData:!0})),xt}function At(e=""){return X.transports.transports.flatMap(e=>e.getIgnoreUrls()).some(t=>e&&null!=e.match(t))}const _t="fetch",Lt="xhr";let jt,Ct,Pt,Mt=!1;function Ut(){if(jt)return jt;function e(e){jt.notify({type:Et,request:e})}function t(e){jt.notify({type:kt,request:e})}return jt=new $,Mt||(!function({onRequestEnd:e,onRequestStart:t}){Pt||(Pt=window.fetch);window.fetch=function(){var i,n;const s=null!==(i=l(r=arguments[0])?r:r instanceof URL?r.href:!v(r)&&p(null==r?void 0:r.toString)?r.toString():void 0)&&void 0!==i?i:"";var r;const o=At(s),a=(null!==(n=arguments[1])&&void 0!==n?n:{}).method,u=Q();return o||t({url:s,method:a,requestId:u,apiType:_t}),Pt.apply(this,arguments).then(t=>(o||e({url:s,method:a,requestId:u,apiType:_t}),t)).catch(t=>{throw o||e({url:s,method:a,requestId:u,apiType:_t}),t})}}({onRequestStart:e,onRequestEnd:t}),function({onRequestStart:e,onRequestEnd:t}){Ct||(Ct=XMLHttpRequest.prototype.open);XMLHttpRequest.prototype.open=function(){const i=arguments[1],n=At(i),s=arguments[0],r=Q();this.addEventListener("loadstart",function(){n||e({url:i,method:s,requestId:r,apiType:Lt})}),this.addEventListener("load",function(){n||t({url:i,method:s,requestId:r,apiType:Lt})}),this.addEventListener("error",function(){n||t({url:i,method:s,requestId:r,apiType:Lt})}),this.addEventListener("abort",function(){n||t({url:i,method:s,requestId:r,apiType:Lt})}),Ct.apply(this,arguments)}}({onRequestStart:e,onRequestEnd:t}),Mt=!0),jt}const Dt="com.grafana.faro.lastNavigationId",Nt="resource",Rt=/^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;function zt(e=[]){for(const t of e)if("traceparent"===t.name){if(!Rt.test(t.description))continue;const[,e,i]=t.description.split("-");if(null!=e&&null!=i)return{traceId:e,spanId:i};break}}function qt(e,t={}){for(const[i,n]of Object.entries(t)){const t=e[i];return null!=t&&(h(n)?n.includes(t):t===n)}return!0}function Bt(e){const{connectEnd:t,connectStart:i,decodedBodySize:n,domainLookupEnd:s,domainLookupStart:r,duration:o,encodedBodySize:a,fetchStart:l,initiatorType:u,name:c,nextHopProtocol:d,redirectEnd:p,redirectStart:h,renderBlockingStatus:g,requestStart:f,responseEnd:m,responseStart:v,responseStatus:b,secureConnectionStart:w,transferSize:y,workerStart:S}=e;return{name:c,duration:$t(o),tcpHandshakeTime:$t(t-i),dnsLookupTime:$t(s-r),tlsNegotiationTime:$t(t-w),responseStatus:$t(b),redirectTime:$t(p-h),requestTime:$t(v-f),responseTime:$t(m-v),fetchTime:$t(m-l),serviceWorkerTime:$t(l-S),decodedBodySize:$t(n),encodedBodySize:$t(a),cacheHitStatus:function(){let e="fullLoad";0===y?n>0&&(e="cache"):null!=b?304===b&&(e="conditionalFetch"):a>0&&y<a&&(e="conditionalFetch");return e}(),renderBlockingStatus:$t(g),protocol:d,initiatorType:u,visibilityState:document.visibilityState,ttfb:$t(v-f),transferSize:$t(y)}}function Ft(e){const{activationStart:t,domComplete:i,domContentLoadedEventEnd:n,domContentLoadedEventStart:s,domInteractive:r,fetchStart:o,loadEventEnd:a,loadEventStart:l,responseStart:u,type:c}=e,d=function(){var e;if(null!=(null===(e=performance.timing)||void 0===e?void 0:e.domLoading))return performance.timing.domLoading-performance.timeOrigin;return null}();return Object.assign(Object.assign({},Bt(e)),{pageLoadTime:$t(i-o),documentParsingTime:$t(d?r-d:null),domProcessingTime:$t(i-r),domContentLoadHandlerTime:$t(n-s),onLoadTime:$t(a-l),ttfb:$t(Math.max(u-(null!=t?t:0),0)),type:c})}function $t(e){return null==e?Ge:"number"==typeof e?Math.round(e>0?e:0).toString():e.toString()}const Vt={initiatorType:["xmlhttprequest","fetch"]};var Ht=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{l(n.next(e))}catch(li){r(li)}}function a(e){try{l(n.throw(e))}catch(li){r(li)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};const Wt=new $;class Gt extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-performance",this.version=A}initialize(){"PerformanceObserver"in window?function(e){if("complete"===document.readyState)e();else{const t=()=>{"complete"===document.readyState&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}}(()=>Ht(this,void 0,void 0,function*(){const e=this.api.pushEvent,{faroNavigationId:t}=yield function(e){let t;const i=new Promise(e=>{t=e});return new PerformanceObserver(i=>{var n;const[s]=i.getEntries();if(null==s||At(s.name))return;const r=s.toJSON();let o=zt(null==r?void 0:r.serverTiming);const a=null!==(n=rt(Dt,it))&&void 0!==n?n:Ge,l=Object.assign(Object.assign({},Ft(r)),{faroNavigationId:Q(),faroPreviousNavigationId:a});ot(Dt,l.faroNavigationId,it),e("faro.performance.navigation",l,void 0,{spanContext:o,timestampOverwriteMs:performance.timeOrigin+r.startTime}),t(l)}).observe({type:"navigation",buffered:!0}),i}(e);null!=t&&function(e,t,i){const n=X.config.trackResources;new PerformanceObserver(s=>{const r=s.getEntries();for(const o of r){if(At(o.name))continue;null==i||i.notify({type:Nt});const s=o.toJSON();let r=zt(null==s?void 0:s.serverTiming);if(null==n&&qt(s,Vt)||n){const i=Object.assign(Object.assign({},Bt(s)),{faroNavigationId:e,faroResourceId:Q()});t("faro.performance.resource",i,void 0,{spanContext:r,timestampOverwriteMs:performance.timeOrigin+s.startTime})}}}).observe({type:Nt,buffered:!0})}(t,e,Wt)})):this.logDebug("performance observer not supported. Disable performance instrumentation.")}}let Kt,Xt,Jt=!1;function Zt(e){return e.type===kt}class Qt{constructor(e){this.userAction=e,this.http=Ut(),this.dom=It(),this.perf=(Kt||(Kt=new $),Jt||(Xt=Wt.subscribe(e=>{e.type===Nt&&Kt.notify({type:"resource-entry"})}),Jt=!0),Kt),this.isValid=!1,this.runningRequests=new Map}attach(){this.allMonitorsSub=(new $).merge(this.http,this.dom,this.perf).takeWhile(()=>[G.Started,G.Halted].includes(this.userAction.getState())).filter(e=>!!(this.userAction.getState()!==G.Halted||Zt(e)&&this.runningRequests.has(e.request.requestId))).subscribe(e=>{(function(e){return e.type===Et})(e)&&this.runningRequests.set(e.request.requestId,e.request),Zt(e)&&this.runningRequests.delete(e.request.requestId),Zt(e)?this.userAction.getState()===G.Halted&&0===this.runningRequests.size&&this.endAction():(this.isValid||(this.isValid=!0),this.scheduleFollowUp())}),this.stateSub=this.userAction.filter(e=>[G.Ended,G.Cancelled].includes(e)).first().subscribe(()=>this.cleanup()),this.scheduleFollowUp()}scheduleFollowUp(){this.clearTimer(this.followUpTid),this.followUpTid=setTimeout(()=>{this.userAction.getState()===G.Started&&this.runningRequests.size>0?this.haltAction():this.isValid?this.endAction():this.cancelAction()},100)}haltAction(){this.userAction.getState()===G.Started&&(this.userAction.halt(),this.startHaltTimeout())}startHaltTimeout(){var e,t,i;this.clearTimer(this.haltTid),this.haltTid=(e=this.haltTid,t=()=>{this.userAction.getState()===G.Halted&&this.endAction()},i=1e4,e&&clearTimeout(e),setTimeout(()=>{t()},i))}endAction(){this.userAction.end(),this.cleanup()}cancelAction(){this.userAction.cancel(),this.cleanup()}cleanup(){var e,t;this.clearTimer(this.followUpTid),this.clearTimer(this.haltTid),null===(e=this.allMonitorsSub)||void 0===e||e.unsubscribe(),null===(t=this.stateSub)||void 0===t||t.unsubscribe(),this.allMonitorsSub=void 0,this.stateSub=void 0,this.runningRequests.clear()}clearTimer(e){e&&clearTimeout(e)}}function Yt(e){const{api:t,config:i}=e;function n(e){new Qt(e).attach()}return{processUserEvent:function(e){var s,r;const o=function(e,t){const i=function(e){const t=e.split("data-")[1],i=null==t?void 0:t.replace(/-(.)/g,(e,t)=>t.toUpperCase());return null==i?void 0:i.replace(/-/g,"")}(t),n=e.dataset;for(const s in n)if(s===i)return n[s];return}(e.target,null!==(r=null===(s=i.userActionsInstrumentation)||void 0===s?void 0:s.dataAttributeName)&&void 0!==r?r:"faroUserActionName");if(!o)return;const a=t.startUserAction(o,{},{triggerName:e.type});a&&n(a)},processUserActionStarted:n}}class ei extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-user-action",this.version=A}initialize(){const{processUserEvent:e,processUserActionStarted:t}=Yt(X);window.addEventListener("pointerdown",e),window.addEventListener("keydown",t=>{[" ","Enter"].includes(t.key)&&e(t)}),this._userActionSub=te.subscribe(({type:e,userAction:i})=>{"user_action_start"===e&&t(i)})}destroy(){var e;null===(e=this._userActionSub)||void 0===e||e.unsubscribe()}}const ti=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function ii(e){let t,i,n,s,a=[];if((e=>r(e,"ErrorEvent"))(e)&&e.error)t=e.error.message,i=e.error.name,a=qe(e.error);else if((n=(e=>r(e,"DOMError"))(e))||(e=>r(e,"DOMException"))(e)){const{name:s,message:r}=e;i=null!=s?s:n?"DOMError":"DOMException",t=r?`${i}: ${r}`:i}else m(e)?(t=e.message,a=qe(e)):(d(e)||(s=(e=>g&&o(e,Event))(e)))&&(i=s?e.constructor.name:void 0,t=`Non-Error exception captured with keys: ${Object.keys(e)}`);return[t,i,a]}function ni(e){const[t,i,n,s,r]=e;let o,a,u=[];const c=l(t),d=Re(i,"?",n,s);return r||!c?([o,a,u]=ii(null!=r?r:t),0===u.length&&(u=[d])):c&&([o,a]=function(e){var t,i;const n=e.match(ti),s=null!==(t=null==n?void 0:n[1])&&void 0!==t?t:ne;return[null!==(i=null==n?void 0:n[2])&&void 0!==i?i:e,s]}(t),u=[d]),{value:o,type:a,stackFrames:u}}function si(e,t){return m(e[0])?ni(e):{value:t(e)}}function ri(e){window.addEventListener("unhandledrejection",t=>{var i,n;let s,r,o=t;o.reason?o=t.reason:(null===(i=t.detail)||void 0===i?void 0:i.reason)&&(o=null===(n=t.detail)||void 0===n?void 0:n.reason);let a=[];(e=>!d(e)&&!p(e))(o)?(s=`Non-Error promise rejection captured with value: ${String(o)}`,r="UnhandledRejection"):[s,r,a]=ii(o),s&&e.pushError(new Error(s),{type:r,stackFrames:a})})}class oi extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-errors",this.version=A}initialize(){this.logDebug("Initializing"),function(e){const t=window.onerror;window.onerror=(...i)=>{try{const{value:t,type:n,stackFrames:s}=ni(i),r=i[4];if(t){const i={type:n,stackFrames:s};null!=r&&(i.originalError=r),e.pushError(new Error(t),i)}}finally{null==t||t.apply(window,i)}}}(this.api),ri(this.api)}}class ai{t;o=0;i=[];u(e){if(e.hadRecentInput)return;const t=this.i[0],i=this.i.at(-1);this.o&&t&&i&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(this.o+=e.value,this.i.push(e)):(this.o=e.value,this.i=[e]),this.t?.(e)}}const li=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},ui=e=>{if("loading"===document.readyState)return"loading";{const t=li();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}}return"complete"},ci=e=>{const t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},di=e=>{let t="";try{for(;9!==e?.nodeType;){const i=e,n=i.id?"#"+i.id:[ci(i),...Array.from(i.classList).sort()].join(".");if(t.length+n.length>99)return t||n;if(t=t?n+">"+t:n,i.id)break;e=i.parentNode}}catch{}return t},pi=new WeakMap;function hi(e,t){return pi.get(e)||pi.set(e,new t),pi.get(e)}let gi=-1;const fi=()=>gi,mi=e=>{addEventListener("pageshow",t=>{t.persisted&&(gi=t.timeStamp,e(t))},!0)},vi=(e,t,i,n)=>{let s,r;return o=>{t.value>=0&&(o||n)&&(r=t.value-(s??0),(r||void 0===s)&&(s=t.value,t.delta=r,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,i),e(t)))}},bi=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},wi=()=>{const e=li();return e?.activationStart??0},yi=(e,t=-1)=>{const i=li();let n="navigate";return fi()>=0?n="back-forward-cache":i&&(document.prerendering||wi()>0?n="prerender":document.wasDiscarded?n="restore":i.type&&(n=i.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},Si=(e,t,i={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const n=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return n.observe({type:e,buffered:!0,...i}),n}}catch{}},Ti=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let Ei=-1;const ki=new Set,xi=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,Oi=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(const e of ki)e();isFinite(Ei)||(Ei="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",Oi,!0))}},Ii=()=>{if(Ei<0){const e=wi(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime;Ei=t??xi(),addEventListener("visibilitychange",Oi,!0),addEventListener("prerenderingchange",Oi,!0),mi(()=>{setTimeout(()=>{Ei=xi()})})}return{get firstHiddenTime(){return Ei},onHidden(e){ki.add(e)}}},Ai=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},_i=[1800,3e3],Li=(e,t={})=>{Ai(()=>{const i=Ii();let n,s=yi("FCP");const r=Si("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(r.disconnect(),t.startTime<i.firstHiddenTime&&(s.value=Math.max(t.startTime-wi(),0),s.entries.push(t),n(!0)))});r&&(n=vi(e,s,_i,t.reportAllChanges),mi(i=>{s=yi("FCP"),n=vi(e,s,_i,t.reportAllChanges),bi(()=>{s.value=performance.now()-i.timeStamp,n(!0)})}))})},ji=[.1,.25],Ci=e=>e.find(e=>1===e.node?.nodeType)||e[0];let Pi=0,Mi=1/0,Ui=0;const Di=e=>{for(const t of e)t.interactionId&&(Mi=Math.min(Mi,t.interactionId),Ui=Math.max(Ui,t.interactionId),Pi=Ui?(Ui-Mi)/7+1:0)};let Ni;const Ri=()=>Ni?Pi:performance.interactionCount??0;let zi=0;class qi{l=[];h=new Map;m;p;v(){zi=Ri(),this.l.length=0,this.h.clear()}M(){const e=Math.min(this.l.length-1,Math.floor((Ri()-zi)/50));return this.l[e]}u(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.l.at(-1);let i=this.h.get(e.interactionId);if(i||this.l.length<10||e.duration>t.T){if(i?e.duration>i.T?(i.entries=[e],i.T=e.duration):e.duration===i.T&&e.startTime===i.entries[0].startTime&&i.entries.push(e):(i={id:e.interactionId,entries:[e],T:e.duration},this.h.set(i.id,i),this.l.push(i)),this.l.sort((e,t)=>t.T-e.T),this.l.length>10){const e=this.l.splice(10);for(const t of e)this.h.delete(t.id)}this.p?.(i)}}}const Bi=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=Ti(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},Fi=[200,500],$i=(e,t={})=>{const i=hi(t=Object.assign({},t),qi);let n=[],s=[],r=0;const o=new WeakMap,a=new WeakMap;let l=!1;const u=()=>{l||(Bi(c),l=!0)},c=()=>{const e=i.l.map(e=>o.get(e.entries[0])),t=s.length-50;s=s.filter((i,n)=>n>=t||e.includes(i));const a=new Set;for(const i of s){const e=d(i.startTime,i.processingEnd);for(const t of e)a.add(t)}const u=n.length-1-50;n=n.filter((e,t)=>e.startTime>r&&t>u||a.has(e)),l=!1};i.m=e=>{const t=e.startTime+e.duration;let i;r=Math.max(r,e.processingEnd);for(let n=s.length-1;n>=0;n--){const r=s[n];if(Math.abs(t-r.renderTime)<=8){i=r,i.startTime=Math.min(e.startTime,i.startTime),i.processingStart=Math.min(e.processingStart,i.processingStart),i.processingEnd=Math.max(e.processingEnd,i.processingEnd),i.entries.push(e);break}}i||(i={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:t,entries:[e]},s.push(i)),(e.interactionId||"first-input"===e.entryType)&&o.set(e,i),u()},i.p=e=>{if(!a.get(e)){const i=e.entries[0].target;if(i){const n=t.generateTarget?.(i)??di(i);a.set(e,n)}}};const d=(e,t)=>{const i=[];for(const s of n)if(!(s.startTime+s.duration<e)){if(s.startTime>t)break;i.push(s)}return i},p=e=>{const t=e.entries[0],n=o.get(t),s=t.processingStart,r=Math.max(t.startTime+t.duration,s),l=Math.min(n.processingEnd,r),u=n.entries.sort((e,t)=>e.processingStart-t.processingStart),c=d(t.startTime,l),p=i.h.get(t.interactionId),h={interactionTarget:a.get(p),interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:r,processedEventEntries:u,longAnimationFrameEntries:c,inputDelay:s-t.startTime,processingDuration:l-s,presentationDelay:r-l,loadState:ui(t.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};return(e=>{if(!e.longAnimationFrameEntries?.length)return;const t=e.interactionTime,i=e.inputDelay,n=e.processingDuration;let s,r,o=0,a=0,l=0,u=0;for(const p of e.longAnimationFrameEntries){a=a+p.startTime+p.duration-p.styleAndLayoutStart;for(const e of p.scripts){const l=e.startTime+e.duration;if(l<t)continue;const c=l-Math.max(t,e.startTime),d=e.duration?c/e.duration*e.forcedStyleAndLayoutDuration:0;o+=c-d,a+=d,c>u&&(r=e.startTime<t+i?"input-delay":e.startTime>=t+i+n?"presentation-delay":"processing-duration",s=e,u=c)}}const c=e.longAnimationFrameEntries.at(-1),d=c?c.startTime+c.duration:0;d>=t+i+n&&(l=e.nextPaintTime-d),s&&r&&(e.longestScript={entry:s,subpart:r,intersectingDuration:u}),e.totalScriptDuration=o,e.totalStyleAndLayoutDuration=a,e.totalPaintDuration=l,e.totalUnattributedDuration=e.nextPaintTime-t-o-a-l})(h),Object.assign(e,{attribution:h})};Si("long-animation-frame",e=>{n=n.concat(e),u()}),((e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const i=Ii();Ai(()=>{"interactionCount"in performance||Ni||(Ni=Si("event",Di,{type:"event",buffered:!0,durationThreshold:0}));let n,s=yi("INP");const r=hi(t,qi),o=e=>{Bi(()=>{for(const i of e)r.u(i);const t=r.M();t&&t.T!==s.value&&(s.value=t.T,s.entries=t.entries,n())})},a=Si("event",o,{durationThreshold:t.durationThreshold??40});n=vi(e,s,Fi,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),i.onHidden(()=>{o(a.takeRecords()),n(!0)}),mi(()=>{r.v(),s=yi("INP"),n=vi(e,s,Fi,t.reportAllChanges)}))})})(t=>{const i=p(t);e(i)},t)};class Vi{m;u(e){this.m?.(e)}}const Hi=[2500,4e3],Wi=[800,1800],Gi=e=>{document.prerendering?Ai(()=>Gi(e)):"complete"!==document.readyState?addEventListener("load",()=>Gi(e),!0):setTimeout(e)},Ki="load_state",Xi="time_to_first_byte";class Ji{constructor(e,t){this.corePushMeasurement=e,this.webVitalConfig=t}initialize(){this.measureCLS(),this.measureFCP(),this.measureINP(),this.measureLCP(),this.measureTTFB()}measureCLS(){var e;((e,t={})=>{const i=hi(t=Object.assign({},t),ai),n=new WeakMap;i.t=e=>{if(e?.sources?.length){const i=Ci(e.sources),s=i?.node;if(s){const e=t.generateTarget?.(s)??di(s);n.set(i,e)}}},((e,t={})=>{const i=Ii();Li(Ti(()=>{let n,s=yi("CLS",0);const r=hi(t,ai),o=e=>{for(const t of e)r.u(t);r.o>s.value&&(s.value=r.o,s.entries=r.i,n())},a=Si("layout-shift",o);a&&(n=vi(e,s,ji,t.reportAllChanges),i.onHidden(()=>{o(a.takeRecords()),n(!0)}),mi(()=>{r.o=0,s=yi("CLS",0),n=vi(e,s,ji,t.reportAllChanges),bi(()=>n())}),setTimeout(n))}))})(t=>{const i=(e=>{let t={};if(e.entries.length){const i=e.entries.reduce((e,t)=>e.value>t.value?e:t);if(i?.sources?.length){const e=Ci(i.sources);e&&(t={largestShiftTarget:n.get(e),largestShiftTime:i.startTime,largestShiftValue:i.value,largestShiftSource:e,largestShiftEntry:i,loadState:ui(i.startTime)})}}return Object.assign(e,{attribution:t})})(t);e(i)},t)})(e=>{const{loadState:t,largestShiftValue:i,largestShiftTime:n,largestShiftTarget:s}=e.attribution,r=this.buildInitialValues(e);this.addIfPresent(r,"largest_shift_value",i),this.addIfPresent(r,"largest_shift_time",n);const o=this.buildInitialContext(e);this.addIfPresent(o,Ki,t),this.addIfPresent(o,"largest_shift_target",s),this.pushMeasurement(r,o)},{reportAllChanges:null===(e=this.webVitalConfig)||void 0===e?void 0:e.reportAllChanges})}measureFCP(){var e;((e,t={})=>{Li(t=>{const i=(e=>{let t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:ui(fi())};if(e.entries.length){const i=li(),n=e.entries.at(-1);if(i){const s=i.activationStart||0,r=Math.max(0,i.responseStart-s);t={timeToFirstByte:r,firstByteToFCP:e.value-r,loadState:ui(e.entries[0].startTime),navigationEntry:i,fcpEntry:n}}}return Object.assign(e,{attribution:t})})(t);e(i)},t)})(e=>{const{firstByteToFCP:t,timeToFirstByte:i,loadState:n}=e.attribution,s=this.buildInitialValues(e);this.addIfPresent(s,"first_byte_to_fcp",t),this.addIfPresent(s,Xi,i);const r=this.buildInitialContext(e);this.addIfPresent(r,Ki,n),this.pushMeasurement(s,r)},{reportAllChanges:null===(e=this.webVitalConfig)||void 0===e?void 0:e.reportAllChanges})}measureINP(){var e;$i(e=>{const{interactionTime:t,presentationDelay:i,inputDelay:n,processingDuration:s,nextPaintTime:r,loadState:o,interactionTarget:a,interactionType:l}=e.attribution,u=this.buildInitialValues(e);this.addIfPresent(u,"interaction_time",t),this.addIfPresent(u,"presentation_delay",i),this.addIfPresent(u,"input_delay",n),this.addIfPresent(u,"processing_duration",s),this.addIfPresent(u,"next_paint_time",r);const c=this.buildInitialContext(e);this.addIfPresent(c,Ki,o),this.addIfPresent(c,"interaction_target",a),this.addIfPresent(c,"interaction_type",l),this.pushMeasurement(u,c)},{reportAllChanges:null===(e=this.webVitalConfig)||void 0===e?void 0:e.reportAllChanges})}measureLCP(){var e;((e,t={})=>{const i=hi(t=Object.assign({},t),Vi),n=new WeakMap;i.m=e=>{const i=e.element;if(i){const s=t.generateTarget?.(i)??di(i);n.set(e,s)}},((e,t={})=>{Ai(()=>{const i=Ii();let n,s=yi("LCP");const r=hi(t,Vi),o=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)r.u(t),t.startTime<i.firstHiddenTime&&(s.value=Math.max(t.startTime-wi(),0),s.entries=[t],n())},a=Si("largest-contentful-paint",o);if(a){n=vi(e,s,Hi,t.reportAllChanges);const i=Ti(()=>{o(a.takeRecords()),a.disconnect(),n(!0)}),r=e=>{e.isTrusted&&(Bi(i),removeEventListener(e.type,r,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])addEventListener(e,r,{capture:!0});mi(i=>{s=yi("LCP"),n=vi(e,s,Hi,t.reportAllChanges),bi(()=>{s.value=performance.now()-i.timeStamp,n(!0)})})}})})(t=>{const i=(e=>{let t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){const i=li();if(i){const s=i.activationStart||0,r=e.entries.at(-1),o=r.url&&performance.getEntriesByType("resource").filter(e=>e.name===r.url)[0],a=Math.max(0,i.responseStart-s),l=Math.max(a,o?(o.requestStart||o.startTime)-s:0),u=Math.min(e.value,Math.max(l,o?o.responseEnd-s:0));t={target:n.get(r),timeToFirstByte:a,resourceLoadDelay:l-a,resourceLoadDuration:u-l,elementRenderDelay:e.value-u,navigationEntry:i,lcpEntry:r},r.url&&(t.url=r.url),o&&(t.lcpResourceEntry=o)}}return Object.assign(e,{attribution:t})})(t);e(i)},t)})(e=>{const{elementRenderDelay:t,resourceLoadDelay:i,resourceLoadDuration:n,timeToFirstByte:s,target:r}=e.attribution,o=this.buildInitialValues(e);this.addIfPresent(o,"element_render_delay",t),this.addIfPresent(o,"resource_load_delay",i),this.addIfPresent(o,"resource_load_duration",n),this.addIfPresent(o,Xi,s);const a=this.buildInitialContext(e);this.addIfPresent(a,"element",r),this.pushMeasurement(o,a)},{reportAllChanges:null===(e=this.webVitalConfig)||void 0===e?void 0:e.reportAllChanges})}measureTTFB(){var e;((e,t={})=>{((e,t={})=>{let i=yi("TTFB"),n=vi(e,i,Wi,t.reportAllChanges);Gi(()=>{const s=li();s&&(i.value=Math.max(s.responseStart-wi(),0),i.entries=[s],n(!0),mi(()=>{i=yi("TTFB",0),n=vi(e,i,Wi,t.reportAllChanges),n(!0)}))})})(t=>{const i=(e=>{let t={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(e.entries.length){const i=e.entries[0],n=i.activationStart||0,s=Math.max((i.workerStart||i.fetchStart)-n,0),r=Math.max(i.domainLookupStart-n,0),o=Math.max(i.connectStart-n,0),a=Math.max(i.connectEnd-n,0);t={waitingDuration:s,cacheDuration:r-s,dnsDuration:o-r,connectionDuration:a-o,requestDuration:e.value-a,navigationEntry:i}}return Object.assign(e,{attribution:t})})(t);e(i)},t)})(e=>{const{dnsDuration:t,connectionDuration:i,requestDuration:n,waitingDuration:s,cacheDuration:r}=e.attribution,o=this.buildInitialValues(e);this.addIfPresent(o,"dns_duration",t),this.addIfPresent(o,"connection_duration",i),this.addIfPresent(o,"request_duration",n),this.addIfPresent(o,"waiting_duration",s),this.addIfPresent(o,"cache_duration",r);const a=this.buildInitialContext(e);this.pushMeasurement(o,a)},{reportAllChanges:null===(e=this.webVitalConfig)||void 0===e?void 0:e.reportAllChanges})}buildInitialValues(e){const t=e.name.toLowerCase();return{[t]:e.value,delta:e.delta}}buildInitialContext(e){var t;const i=null!==(t=rt(Dt,it))&&void 0!==t?t:Ge;return{id:e.id,rating:e.rating,navigation_type:e.navigationType,navigation_entry_id:i}}pushMeasurement(e,t){this.corePushMeasurement({type:"web-vitals",values:e},{context:t})}addIfPresent(e,t,i){i&&(e[t]=i)}}class Zi extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-web-vitals",this.version=A}initialize(){this.logDebug("Initializing");new Ji(this.api.pushMeasurement,this.config.webVitalsInstrumentation).initialize()}}class Qi extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-session",this.version=A}sendSessionStartEvent(e){var t,i;const n=e.session;if(n&&n.id!==(null===(t=this.notifiedSession)||void 0===t?void 0:t.id)){if(this.notifiedSession&&this.notifiedSession.id===(null===(i=n.attributes)||void 0===i?void 0:i.previousSession))return this.api.pushEvent("session_extend",{},void 0,{skipDedupe:!0}),void(this.notifiedSession=n);this.notifiedSession=n,this.api.pushEvent(j,{},void 0,{skipDedupe:!0})}}createInitialSession(e,t){var i,n,s,r,o,a;let l,u,c=e.fetchUserSession();if(t.persistent&&t.maxSessionPersistenceTime&&c){const e=z();c.lastActivity<e-t.maxSessionPersistenceTime&&(vt.removeUserSession(),c=null)}if(ht(c)){const e=null==c?void 0:c.sessionId;u=pt({sessionId:e,isSampled:c.isSampled||!1,started:null==c?void 0:c.started});const s=null==c?void 0:c.sessionMeta,r=Object.assign(Object.assign({},null===(i=t.session)||void 0===i?void 0:i.overrides),null==s?void 0:s.overrides);u.sessionMeta=Object.assign(Object.assign({},t.session),{id:e,attributes:Object.assign(Object.assign(Object.assign({},null===(n=t.session)||void 0===n?void 0:n.attributes),null==s?void 0:s.attributes),{isSampled:u.isSampled.toString()}),overrides:r}),l=C}else{const e=null!==(r=null===(s=t.session)||void 0===s?void 0:s.id)&&void 0!==r?r:function(e){var t,i,n,s;return{id:null!==(s=null===(n=null===(i=null===(t=X.config)||void 0===t?void 0:t.sessionTracking)||void 0===i?void 0:i.generateSessionId)||void 0===n?void 0:n.call(i))&&void 0!==s?s:Q(),attributes:e}}().id;u=pt({sessionId:e,isSampled:dt()});const i=null===(o=t.session)||void 0===o?void 0:o.overrides;u.sessionMeta=Object.assign({id:e,attributes:Object.assign({isSampled:u.isSampled.toString()},null===(a=t.session)||void 0===a?void 0:a.attributes)},i?{overrides:i}:{}),l=j}return{initialSession:u,lifecycleType:l}}registerBeforeSendHook(e){var t;const{updateSession:i}=new e;null===(t=this.transports)||void 0===t||t.addBeforeSendHooks(e=>{var t,n,s;i();const r=null===(t=e.meta.session)||void 0===t?void 0:t.attributes;if(r&&"true"===(null==r?void 0:r.isSampled)){let t=JSON.parse(JSON.stringify(e));const i=null===(n=t.meta.session)||void 0===n?void 0:n.attributes;return null==i||delete i.isSampled,0===Object.keys(null!=i?i:{}).length&&(null===(s=t.meta.session)||void 0===s||delete s.attributes),t}return null})}initialize(){this.logDebug("init session instrumentation");const e=this.config.sessionTracking;if(null==e?void 0:e.enabled){const t=wt(e);this.registerBeforeSendHook(t);const{initialSession:i,lifecycleType:n}=this.createInitialSession(t,e);t.storeUserSession(i);const s=i.sessionMeta;this.notifiedSession=s,this.api.setSession(s),n===j&&this.api.pushEvent(j,{},void 0,{skipDedupe:!0}),n===C&&this.api.pushEvent(C,{},void 0,{skipDedupe:!0})}this.metas.addListener(this.sendSessionStartEvent.bind(this))}}class Yi extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-view",this.version=A}sendViewChangedEvent(e){var t,i,n,s;const r=e.view;r&&r.name!==(null===(t=this.notifiedView)||void 0===t?void 0:t.name)&&(this.api.pushEvent("view_changed",{fromView:null!==(n=null===(i=this.notifiedView)||void 0===i?void 0:i.name)&&void 0!==n?n:Ge,toView:null!==(s=r.name)&&void 0!==s?s:Ge},void 0,{skipDedupe:!0}),this.notifiedView=r)}initialize(){this.metas.addListener(this.sendViewChangedEvent.bind(this))}}class en extends ${constructor(e,t){var i,n,s,r;super(),this._tracking=!1,this.eventsObservable=e,this._options={inactivityMs:null!==(i=null==t?void 0:t.inactivityMs)&&void 0!==i?i:100,drainTimeoutMs:null!==(n=null==t?void 0:t.drainTimeoutMs)&&void 0!==n?n:1e4,isOperationStart:null!==(s=null==t?void 0:t.isOperationStart)&&void 0!==s?s:()=>{},isOperationEnd:null!==(r=null==t?void 0:t.isOperationEnd)&&void 0!==r?r:()=>{}},this._initialize()}_initialize(){this.eventsObservable.filter(()=>this._tracking).subscribe(e=>{var t,i,n;this._lastEventTime=Date.now(),null===(t=this._currentEvents)||void 0===t||t.push(e);const s=this._options.isOperationStart(e);s&&(null===(i=this._activeOperations)||void 0===i||i.set(s,!0));const r=this._options.isOperationEnd(e);r&&(null===(n=this._activeOperations)||void 0===n||n.delete(r)),this._scheduleInactivityCheck()})}startTracking(){this._tracking||(this._tracking=!0,this._startTime=Date.now(),this._lastEventTime=Date.now(),this.notify({message:"tracking-started"}),this._currentEvents=[],this._activeOperations=new Map,this._scheduleInactivityCheck())}stopTracking(){this._tracking=!1,this._clearTimer(this._inactivityTid),this._clearTimer(this._drainTid);let e=0;e=this.hasActiveOperations()?Date.now()-this._startTime:this._lastEventTime?this._lastEventTime-this._startTime:0,this.notify({message:"tracking-ended",events:this._currentEvents,duration:e})}_scheduleInactivityCheck(){this._inactivityTid=tn(this._inactivityTid,()=>{this.hasActiveOperations()?this._startDrainTimeout():this.stopTracking()},this._options.inactivityMs)}_startDrainTimeout(){this._drainTid=tn(this._drainTid,()=>{this.stopTracking()},this._options.drainTimeoutMs)}hasActiveOperations(){return!!this._activeOperations&&this._activeOperations.size>0}_clearTimer(e){e&&clearTimeout(e)}}function tn(e,t,i){return e&&clearTimeout(e),e=setTimeout(()=>{t()},i)}let nn;const sn=new Set,rn=new Map;let on,an,ln,un,cn,dn,pn,hn,gn=!1;class fn extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-navigation",this.version=A}initialize(){const e=Ut(),t=It(),i=function(){function e(e,t){const i=null!=t?t:location.href;i!==an&&(on.notify({type:"url-change",from:an,to:i,trigger:e}),an=i)}if(on||(on=new $,an=location.href),!gn)if("navigation"in window&&"NavigateEvent"in window){pn=t=>{try{const i=null==t?void 0:t.destination;(null==i?void 0:i.sameDocument)&&"string"==typeof i.url&&e("navigate",i.url)}catch(i){}},window.navigation.addEventListener("navigate",pn);const t=window.NavigateEvent;t&&t.prototype&&"function"==typeof t.prototype.intercept&&(hn||(hn=t.prototype.intercept),t.prototype.intercept=function(t){try{const t=!!(null==this?void 0:this.canIntercept),i=null==this?void 0:this.destination;t&&i&&!1===i.sameDocument&&"string"==typeof i.url&&e("navigate-intercept",i.url)}catch(i){}return hn.call(this,t)}),gn=!0}else ln||(ln=window.history.pushState),window.history.pushState=function(...t){const i=ln.apply(window.history,t);return e("pushState"),i},un||(un=window.history.replaceState),window.history.replaceState=function(...t){const i=un.apply(window.history,t);return e("replaceState"),i},cn=()=>e("popstate"),dn=()=>e("hashchange"),window.addEventListener("popstate",cn),window.addEventListener("hashchange",dn),gn=!0;return on}(),n=(s=["pointerdown","keydown"],nn||(nn=new $),s.forEach(e=>{if(!sn.has(e)){const t=()=>{nn.notify({type:"interaction",name:e})};window.addEventListener(e,t),sn.add(e),rn.set(e,t)}}),nn);var s;const r=new en((new $).merge(e,t,i),{inactivityMs:100,drainTimeoutMs:1e4,isOperationStart:e=>function(e){return e.type===Et}(e)?e.request.requestId:void 0,isOperationEnd:e=>function(e){return e.type===kt}(e)?e.request.requestId:void 0});r.filter(e=>"tracking-ended"===e.message).subscribe(e=>{var t,i,n;if((null===(t=e.events)||void 0===t?void 0:t.some(e=>"url-change"===e.type))&&(null===(i=e.events)||void 0===i?void 0:i.some(e=>"dom-mutation"===e.type))){const t=null===(n=e.events)||void 0===n?void 0:n.find(e=>"url-change"===e.type);X.api.pushEvent("faro.navigation",{fromUrl:null==t?void 0:t.from,toUrl:null==t?void 0:t.to,sameDocument:String(!0),duration:e.duration})}}),n.subscribe(()=>{r.startTracking()})}}class mn extends I{constructor(){super(),this.name="@grafana/faro-web-sdk:instrumentation-csp",this.version=A}initialize(){document.addEventListener("securitypolicyviolation",this.securitypolicyviolationHandler.bind(this))}destroy(){document.removeEventListener("securitypolicyviolation",this.securitypolicyviolationHandler)}securitypolicyviolationHandler(e){this.api.pushEvent("securitypolicyviolation",R(e))}}class vn extends I{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-console",this.version=A,this.errorSerializer=ce}initialize(){var e;const t=this.config.consoleInstrumentation,i=(null==t?void 0:t.serializeErrors)||!!(null==t?void 0:t.errorSerializer);this.errorSerializer=i?null!==(e=null==t?void 0:t.errorSerializer)&&void 0!==e?e:se:ce,ue.filter(e=>{var i;return!(null!==(i=null==t?void 0:t.disabledLevels)&&void 0!==i?i:vn.defaultDisabledLevels).includes(e)}).forEach(e=>{console[e]=(...i)=>{try{if(e!==ae.ERROR||(null==t?void 0:t.consoleErrorAsLog))if(e===ae.ERROR&&(null==t?void 0:t.consoleErrorAsLog)){const{value:t,type:n,stackFrames:s}=si(i,this.errorSerializer);this.api.pushLog(t?[vn.consoleErrorPrefix+t]:i,{level:e,context:{value:null!=t?t:"",type:null!=n?n:"",stackFrames:(null==s?void 0:s.length)?se(s):""}})}else this.api.pushLog(i,{level:e});else{const{value:e,type:t,stackFrames:n}=si(i,this.errorSerializer);if(e&&!t&&!n)return void this.api.pushError(new Error(vn.consoleErrorPrefix+e));this.api.pushError(new Error(vn.consoleErrorPrefix+e),{type:t,stackFrames:n})}}catch(n){this.logError(n)}finally{this.unpatchedConsole[e](...i)}}})}}function bn(e={}){const t=[new ei,new oi,new Zi,new Qi,new Yi,new fn];return!1!==e.enablePerformanceInstrumentation&&t.unshift(new Gt),!1!==e.enableContentSecurityPolicyInstrumentation&&t.push(new mn),!1!==e.captureConsole&&t.push(new vn),t}vn.defaultDisabledLevels=[ae.DEBUG,ae.TRACE,ae.LOG],vn.consoleErrorPrefix="console.error: ";var wn=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};function yn(e,{experimental:t}){var i;const n=null!==(i=null==t?void 0:t.trackNavigation)&&void 0!==i&&i;return e.filter(e=>!("@grafana/faro-web-sdk:instrumentation-navigation"===e.name&&!n))}function Sn(e){var t,i;const{page:n,generatePageId:s}=null!==(t=null==e?void 0:e.pageTracking)&&void 0!==t?t:{},r=[Ke,Qe({generatePageId:s,initialPageMeta:n}),...null!==(i=e.metas)&&void 0!==i?i:[]];return d(null===window||void 0===window?void 0:window.k6)?[...r,Xe]:r}function Tn({trackGeolocation:e,sessionTracking:t}){var i;const n={};return c(e)&&(n.geoLocationTrackingEnabled=e),v(n)?{}:{session:Object.assign(Object.assign({},null!==(i=null==t?void 0:t.session)&&void 0!==i?i:{}),{overrides:n})}}function En(e){const t=function(e){var t,i,n,s,r;const o=[],a=pe(e.unpatchedConsole,e.internalLoggerLevel);e.transports?((e.url||e.apiKey)&&a.error('if "transports" is defined, "url" and "apiKey" should not be defined'),o.push(...e.transports)):e.url?o.push(new Tt({url:e.url,apiKey:e.apiKey})):a.error('either "url" or "transports" must be defined');const{dedupe:l=!0,eventDomain:u=Te,globalObjectKey:c=ye,instrumentations:d=bn(),internalLoggerLevel:p=k,isolate:h=!1,logArgsSerializer:g=ce,metas:f=Sn(e),paused:m=!1,preventGlobalExposure:v=!1,unpatchedConsole:b=x,url:w,experimental:y}=e,S=wn(e,["dedupe","eventDomain","globalObjectKey","instrumentations","internalLoggerLevel","isolate","logArgsSerializer","metas","paused","preventGlobalExposure","unpatchedConsole","url","experimental"]),T=null!==(t=null==y?void 0:y.trackNavigation)&&void 0!==t&&t,E={dataAttributeName:null!==(n=null===(i=e.userActionsInstrumentation)||void 0===i?void 0:i.dataAttributeName)&&void 0!==n?n:He,excludeItem:null===(s=e.userActionsInstrumentation)||void 0===s?void 0:s.excludeItem};return Object.assign(Object.assign({},S),{batching:Object.assign(Object.assign({},Se),e.batching),dedupe:l,globalObjectKey:c,instrumentations:yn(d,e),internalLoggerLevel:p,isolate:h,logArgsSerializer:g,metas:f,parseStacktrace:Be,paused:m,preventGlobalExposure:v,transports:o,unpatchedConsole:b,eventDomain:u,ignoreUrls:[...null!==(r=e.ignoreUrls)&&void 0!==r?r:[],...w?[w]:[],/\/collect(?:\/[\w]*)?$/],sessionTracking:Object.assign(Object.assign(Object.assign({},Ve),e.sessionTracking),Tn({trackGeolocation:e.trackGeolocation,sessionTracking:e.sessionTracking})),userActionsInstrumentation:E,experimental:{trackNavigation:T}})}(e);if(t)return we(t)}}}]);