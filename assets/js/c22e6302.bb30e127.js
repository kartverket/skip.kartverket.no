"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[5020],{32431:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>h,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"applikasjon-utrulling/tilgangsstyring/token-validering","title":"Token-validering og grovkornet autorisasjon","description":"SKIP benytter seg av kubernetes operatoren Ztoperator for \xe5 h\xe5ndheve token-validering og grovkornet autorisasjon for tjenester som kj\xf8rer p\xe5 SKIP.","source":"@site/docs/03-applikasjon-utrulling/04-tilgangsstyring/02-token-validering.mdx","sourceDirName":"03-applikasjon-utrulling/04-tilgangsstyring","slug":"/applikasjon-utrulling/tilgangsstyring/token-validering","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/token-validering","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/04-tilgangsstyring/02-token-validering.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Klientregistrering","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering"},"next":{"title":"Auto-login","permalink":"/docs/applikasjon-utrulling/tilgangsstyring/auto-login"}}');var i=n(74848),t=n(28453),l=n(11470),o=n(19365),d=n(27293);const a={},c="Token-validering og grovkornet autorisasjon",h={},p=[{value:"\ud83e\udde0 Wildcards for URL-stier (<em>paths</em>)",id:"-wildcards-for-url-stier-paths",level:2},{value:"\ud83d\udcd1 Eksempler p\xe5 wildcards for URL-stier",id:"-eksempler-p\xe5-wildcards-for-url-stier",level:3},{value:"\ud83d\udcd6 Eksempler",id:"-eksempler",level:2}];function j(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"token-validering-og-grovkornet-autorisasjon",children:"Token-validering og grovkornet autorisasjon"})}),"\n",(0,i.jsxs)(r.p,{children:["SKIP benytter seg av kubernetes operatoren ",(0,i.jsx)(r.a,{href:"https://github.com/kartverket/ztoperator",children:"Ztoperator"})," for \xe5 h\xe5ndheve token-validering og grovkornet autorisasjon for tjenester som kj\xf8rer p\xe5 SKIP."]}),"\n",(0,i.jsxs)(r.p,{children:["Hvis man \xf8nsker \xe5 benytte seg av SKIP sin l\xf8sning for \xe5 sette opp token-validering og grovkornet autorisasjon, har man to valg.\nMan kan benytte seg av ",(0,i.jsx)(r.a,{href:"/docs/applikasjon-utrulling/skiperator/",children:"Skiperator"})," dersom man \xf8nsker \xe5 holde konfigurasjonen n\xe6r Skiperator-manifestet.\nAlternativt kan man bruke CRD-en fra Ztoperator direkte."]}),"\n",(0,i.jsx)(r.p,{children:"Felles for begge alternativene er at de bygger inn to prinsipper i hvordan token-validering og grovkornet autorisasjon settes opp."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Gyldig JWT by default"}),": Med mindre endepunkt er eksplisitt spesifisert som \xe5pne ",(0,i.jsx)(r.em,{children:"m\xe5"}),"\ninnkommende request ha en gyldig JWT."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Trygge standardinnstillinger"}),": Hvis man ved en feil spesifiserer et endepunkt som b\xe5de \xe5pent og autorisert, vil foresp\xf8rselen som standard kreve et gyldig og autorisert JWT."]}),"\n"]}),"\n",(0,i.jsxs)(l.A,{groupId:"operator",children:[(0,i.jsxs)(o.A,{value:"ztoperator",label:"Ztoperator",children:[(0,i.jsxs)(r.p,{children:["Ztoperator introduserer CRD-en ",(0,i.jsx)(r.code,{children:"AuthPolicy"}),", som har i oppgave \xe5 sette opp token-validering og grovkornet autorisasjon.\n",(0,i.jsx)(r.code,{children:"AuthPolicy"})," har som hovedoppgave \xe5 opprette Istio-ressursene ",(0,i.jsx)(r.code,{children:"RequestAuthentication"})," og ",(0,i.jsx)(r.code,{children:"AuthorizationPolicy"}),"\np\xe5 en m\xe5te som f\xf8lger brukerens definerte ",(0,i.jsx)(r.em,{children:"regler"}),", samtidig som de to prinsippene nevnt ovenfor ivaretas. API-dokumentasjonen til Ztoperator finner\ndu ",(0,i.jsx)(r.a,{href:"/docs/applikasjon-utrulling/tilgangsstyring/ztoperator/api-docs",children:"her"}),". Hvordan du tester og verifiserer at en ",(0,i.jsx)(r.code,{children:"AuthPolicy"})," fungerer som forventet kan du lese mer om ",(0,i.jsx)(r.a,{href:"/docs/applikasjon-utrulling/tilgangsstyring/ztoperator/test-authpolicy",children:"her"}),"."]}),(0,i.jsxs)(r.p,{children:["Hvilken workload reglene definert i en ",(0,i.jsx)(r.code,{children:"AuthPolicy"})," skal gjelde for spesifiseres ved \xe5 referere til ",(0,i.jsx)(r.em,{children:"labels"}),"."]}),(0,i.jsx)(d.A,{type:"tip",title:"Visste du at...",children:(0,i.jsxs)(r.p,{children:["Hvis du har en Skiperator-applikasjon med navn ",(0,i.jsx)(r.code,{children:"some-application"})," vil den f\xe5 labelen ",(0,i.jsx)(r.code,{children:"app: some-application"}),"."]})}),(0,i.jsxs)(r.h2,{id:"-wildcards-for-url-stier-paths",children:["\ud83e\udde0 Wildcards for URL-stier (",(0,i.jsx)(r.em,{children:"paths"}),")"]}),(0,i.jsxs)(r.p,{children:["N\xe5r man setter opp tilgangsstyring med Ztoperator, s\xe5 kan man enten \xe5pne opp tilgang til endepunkter, eller spesifisere endepunkter som\nskal v\xe6re autentiserte og/eller grovkornet autoriserte (innsnevre tilgang til endepunkt basert p\xe5 verdiene til token-",(0,i.jsx)(r.code,{children:"claims"}),"). Da spesifiserer man et sett med en eller flere URL-stier.\nIstio, og dermed ogs\xe5 Ztoperator, st\xf8tter bruken av ",(0,i.jsx)(r.strong,{children:"wildcards"})," i disse stiene, men er noe uklar i bruken av disse i deres dokumentasjon."]}),(0,i.jsxs)(r.p,{children:["Ztoperator st\xf8tter bruken av ",(0,i.jsx)(r.em,{children:"tre"})," wildcard-operatorer: ",(0,i.jsx)(r.code,{children:"*"}),", ",(0,i.jsx)(r.code,{children:"{*}"})," og ",(0,i.jsx)(r.code,{children:"{**}"}),", ",(0,i.jsxs)(r.strong,{children:["der ",(0,i.jsx)(r.code,{children:"*"})," er den ",(0,i.jsx)(r.em,{children:"gamle"})," wildcard-syntaksen, mens ",(0,i.jsx)(r.code,{children:"{*}"})," og ",(0,i.jsx)(r.code,{children:"{**}"})," er den ",(0,i.jsx)(r.em,{children:"nye"})," wildcard-syntaksen"]}),".\nZtoperator har f\xf8lgende validering av stier:"]}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["En sti kan ",(0,i.jsx)(r.strong,{children:"ikke blande"})," gammel og ny wildcard-syntax."]}),"\n",(0,i.jsxs)(r.li,{children:["Wildcardet ",(0,i.jsx)(r.code,{children:"*"}),", (dvs. gammel wildcard-syntaks), kan ",(0,i.jsx)(r.strong,{children:"kun"})," brukes som enten prefiks, suffiks eller alene. Wildcardet vil da ",(0,i.jsxs)(r.strong,{children:["matche null eller flere sti-segmenter (deler av stien mellom ",(0,i.jsx)(r.code,{children:"/"}),")"]}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Wildcardet ",(0,i.jsx)(r.code,{children:"{*}"}),", (dvs. ny wildcard-syntaks), kan ",(0,i.jsx)(r.strong,{children:"kun brukes alene"})," i et sti-segment. Wildcardet vil da ",(0,i.jsxs)(r.strong,{children:["matche ett sti-segment (deler av stien mellom ",(0,i.jsx)(r.code,{children:"/"}),")"]}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Wildcardet ",(0,i.jsx)(r.code,{children:"{**}"}),", (dvs. ny wildcard-syntaks), kan ",(0,i.jsx)(r.strong,{children:"kun brukes alene"})," i et sti-segment. Wildcardet vil da ",(0,i.jsxs)(r.strong,{children:["matche null ",(0,i.jsx)(r.em,{children:"eller"})," flere sti-segmenter (deler av stien mellom ",(0,i.jsx)(r.code,{children:"/"}),")"]}),". Hvis ",(0,i.jsx)(r.code,{children:"{**}"})," benyttes s\xe5 ",(0,i.jsx)(r.strong,{children:"m\xe5"})," den v\xe6re den siste wilcard-operatoren."]}),"\n"]}),(0,i.jsx)(r.h3,{id:"-eksempler-p\xe5-wildcards-for-url-stier",children:"\ud83d\udcd1 Eksempler p\xe5 wildcards for URL-stier"}),(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Sti"}),(0,i.jsx)(r.th,{children:"Gyldig"}),(0,i.jsx)(r.th,{children:"Forklaring"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"*"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsx)(r.td,{children:"Matcher alle stier"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"*/foo/bar"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsxs)(r.td,{children:["Matcher ",(0,i.jsx)(r.code,{children:"/foo/bar"}),", ",(0,i.jsx)(r.code,{children:"/api/foo/bar"}),", ",(0,i.jsx)(r.code,{children:"/api/something/foo/bar"}),", ",(0,i.jsx)(r.code,{children:"/api/something/else/foo/bar"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/foo/bar*"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsxs)(r.td,{children:["Matcher ",(0,i.jsx)(r.code,{children:"/foo/bar"}),", ",(0,i.jsx)(r.code,{children:"/foo/bar/baz"}),", ",(0,i.jsx)(r.code,{children:"/foo/bar/baz.html"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/foo/{*}/"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsxs)(r.td,{children:["Matcher ",(0,i.jsx)(r.code,{children:"/foo/bar"}),", men ",(0,i.jsx)(r.em,{children:"ikke"})," ",(0,i.jsx)(r.code,{children:"/foo/bar/baz"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/foo/{**}/"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsxs)(r.td,{children:["Matcher ",(0,i.jsx)(r.code,{children:"/foo/bar/"}),", ",(0,i.jsx)(r.code,{children:"/foo/bar/baz.txt"}),", og ",(0,i.jsx)(r.code,{children:"/foo//"}),", men ikke ",(0,i.jsx)(r.code,{children:"/foo/bar"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/foo/{*}/bar/{**}"})}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsxs)(r.td,{children:["Matcher ",(0,i.jsx)(r.code,{children:"/foo/buzz/bar/"})," og ",(0,i.jsx)(r.code,{children:"/foo/buzz/bar/baz"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"foo/*/bar"})}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsxs)(r.td,{children:["Kun lov \xe5 bruke wildcardet ",(0,i.jsx)(r.code,{children:"*"})," som enten prefiks, suffiks eller alene."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/*/baz/{*}"})}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"Ikke lov \xe5 blande gammel og ny wildcard-syntaks."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/**/baz/{*}"})}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsxs)(r.td,{children:["Wildcard-operatoren ",(0,i.jsx)(r.code,{children:"**"})," er ikke lov \xe5 bruke, den m\xe5 v\xe6re omsluttet av kr\xf8llparenteser, i.e. ",(0,i.jsx)(r.code,{children:"{**}"}),"."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/{**}/foo/{*}"})}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsxs)(r.td,{children:["Ikke lov: Hvis wildcard-operatoren ",(0,i.jsx)(r.code,{children:"{**}"})," benyttes ",(0,i.jsx)(r.strong,{children:"m\xe5"})," den v\xe6re den siste wildcard-operatoren."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/foo/{*}.txt"})}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsxs)(r.td,{children:["Wildcard-operatoren ",(0,i.jsx)(r.code,{children:"{*}"})," er ikke lov \xe5 bruke sammen med andre tegn innenfor et sti-segment."]})]})]})]})]}),(0,i.jsx)(o.A,{value:"skiperator",label:"Skiperator",children:(0,i.jsxs)(r.p,{children:["\ud83d\udea7 ",(0,i.jsx)(r.strong,{children:"UNDER UTVIKLING"})," \ud83d\udea7",(0,i.jsx)("br",{}),"\nSt\xf8tte for \xe5 sette opp token-validering og grovkornet autorisasjon via Skiperator-manifestet er under utvikling og er forel\xf8pig ikke tilgjengelig."]})})]}),"\n",(0,i.jsx)(r.h2,{id:"-eksempler",children:"\ud83d\udcd6 Eksempler"}),"\n",(0,i.jsx)(r.p,{children:"Under f\xf8lger en rekke eksempler p\xe5 hvordan \xe5 konfigurere token-validering og grovkornet autorisasjon p\xe5 SKIP."}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsxs)("strong",{children:["Eksempel 1: Token-validering for ",(0,i.jsx)(r.em,{children:"alle"})," endepunkt"]})}),(0,i.jsxs)(l.A,{groupId:"operator",children:[(0,i.jsxs)(o.A,{value:"ztoperator",label:"Ztoperator",children:[(0,i.jsxs)(r.p,{children:["F\xf8lgende ",(0,i.jsx)(r.code,{children:"AuthPolicy"}),"-manifest konfigurerer token-validering for alle endepunktene inn til workloads med labelen ",(0,i.jsx)(r.code,{children:"app: some-application"})," i namespacet ",(0,i.jsx)(r.code,{children:"some-namespace"}),"."]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"apiVersion: ztoperator.kartverket.no/v1alpha1\nkind: AuthPolicy\nmetadata:\n  name: some-auth-policy\n  namespace: some-namespace\nspec:\n  enabled: true\n  audience:\n    - some-audience\n  wellKnownURI: https://some-issuer.com/.well-known/openid-configuration\n  selector:\n    matchLabels:\n      app: some-application\n"})})]}),(0,i.jsx)(o.A,{value:"skiperator",label:"Skiperator",children:(0,i.jsxs)(r.p,{children:["\ud83d\udea7 ",(0,i.jsx)(r.strong,{children:"UNDER UTVIKLING"})," \ud83d\udea7",(0,i.jsx)("br",{}),"\nSt\xf8tte for \xe5 sette opp token-validering og grovkornet autorisasjon via Skiperator-manifestet er under utvikling og er forel\xf8pig ikke tilgjengelig."]})})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Eksempel 2: Legg til \xe5pne endepunkt"})}),(0,i.jsxs)(l.A,{groupId:"operator",children:[(0,i.jsxs)(o.A,{value:"ztoperator",label:"Ztoperator",children:[(0,i.jsxs)(r.p,{children:["F\xf8lgende ",(0,i.jsx)(r.code,{children:"AuthPolicy"}),"-manifest konfigurerer token-validering for alle endepunktene inn til ",(0,i.jsx)(r.code,{children:"some-application"}),", ",(0,i.jsx)(r.strong,{children:"utenom"})," for ",(0,i.jsx)(r.code,{children:"GET"})," til ",(0,i.jsx)(r.code,{children:"/api/cars"})," og ",(0,i.jsx)(r.code,{children:"/api/cars/public*"}),"."]}),(0,i.jsx)(d.A,{type:"warning",title:"Legg merke til...",children:(0,i.jsxs)(r.p,{children:["Her er wildcard (",(0,i.jsx)(r.code,{children:"*"}),") brukt. Resultatet blir da at ",(0,i.jsx)(r.code,{children:"GET"})," mot ",(0,i.jsx)(r.code,{children:"/api/cars"}),", ",(0,i.jsx)(r.code,{children:"/api/cars/public"})," og alle andre sub-paths av ",(0,i.jsx)(r.code,{children:"/api/cars/public"})," vil v\xe6re \xe5pne,\nmens requests mot andre stier vil kreve autentisert JWT, dvs. JWT med claimet ",(0,i.jsx)(r.code,{children:"iss: https://some-issuer.com"})," og ",(0,i.jsx)(r.code,{children:"aud: some-audience"}),"."]})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:'apiVersion: ztoperator.kartverket.no/v1alpha1\nkind: AuthPolicy\nmetadata:\n  name: some-auth-policy\n  namespace: some-namespace\nspec:\n  enabled: true\n  audience:\n    - some-audience\n  wellKnownURI: https://some-issuer.com/.well-known/openid-configuration\n  ignoreAuthRules:\n    - paths:\n        - "/api/cars"\n        - "/api/cars/public*"\n      methods:\n        - "GET"\n  selector:\n    matchLabels:\n      app: some-application\n'})})]}),(0,i.jsx)(o.A,{value:"skiperator",label:"Skiperator",children:(0,i.jsxs)(r.p,{children:["\ud83d\udea7 ",(0,i.jsx)(r.strong,{children:"UNDER UTVIKLING"})," \ud83d\udea7",(0,i.jsx)("br",{}),"\nSt\xf8tte for \xe5 sette opp token-validering og grovkornet autorisasjon via Skiperator-manifestet er under utvikling og er forel\xf8pig ikke tilgjengelig."]})})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Eksempel 3: Legg til autoriserte endepunkt"})}),(0,i.jsxs)(l.A,{groupId:"operator",children:[(0,i.jsxs)(o.A,{value:"ztoperator",label:"Ztoperator",children:[(0,i.jsxs)(r.p,{children:["F\xf8lgende ",(0,i.jsx)(r.code,{children:"AuthPolicy"}),"-manifest konfigurerer token-validering for alle endepunktene inn til ",(0,i.jsx)(r.code,{children:"some-application"}),", ",(0,i.jsx)(r.strong,{children:"utenom"})," for endepunktene ",(0,i.jsx)(r.code,{children:"/api/cars*"})," og ",(0,i.jsx)(r.code,{children:"/api/cars/public"})," ",(0,i.jsx)(r.strong,{children:"for alle metoder"}),".\nI tillegg spesifiserer den at ",(0,i.jsx)(r.code,{children:"POST"}),", ",(0,i.jsx)(r.code,{children:"PUT"})," og ",(0,i.jsx)(r.code,{children:"DELETE"})," mot ",(0,i.jsx)(r.code,{children:"/api/cars/admin"})," kun er lov hvis JWT-claimet ",(0,i.jsx)(r.code,{children:"roles"})," eksisterer med verdien ",(0,i.jsx)(r.code,{children:"admin"}),"."]}),(0,i.jsx)(d.A,{type:"warning",title:"Legg merke til...",children:(0,i.jsxs)(r.p,{children:["Stiene ",(0,i.jsx)(r.code,{children:"/api/cars"})," og alle sub-stier er n\xe5 spesifisert som \xe5pne, som ",(0,i.jsx)(r.strong,{children:"er i konflikt"})," med at ",(0,i.jsx)(r.code,{children:"POST"}),", ",(0,i.jsx)(r.code,{children:"PUT"})," og ",(0,i.jsx)(r.code,{children:"DELETE"})," mot ",(0,i.jsx)(r.code,{children:"/api/cars/admin"}),"\nkrever autorisert JWT (",(0,i.jsx)(r.code,{children:"roles: admin"}),"). Her spiller prinsippet om ",(0,i.jsx)(r.strong,{children:"trygge standardinnstillinger"})," inn, og Ztoperator vil falle tilbake til \xe5 kreve autorisert\nJWT for ",(0,i.jsx)(r.code,{children:"POST"}),", ",(0,i.jsx)(r.code,{children:"PUT"})," og ",(0,i.jsx)(r.code,{children:"DELETE"})," mot ",(0,i.jsx)(r.code,{children:"/api/cars/admin"}),"."]})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:'apiVersion: ztoperator.kartverket.no/v1alpha1\nkind: AuthPolicy\nmetadata:\n  name: some-auth-policy\n  namespace: some-namespace\nspec:\n  enabled: true\n  audience:\n    - some-audience\n  wellKnownURI: https://some-issuer.com/.well-known/openid-configuration\n  ignoreAuthRules:\n    - paths:\n        - "/api/cars*"\n        - "/api/cars/public"\n  authRules:\n    - paths:\n        - "/api/cars/admin"\n      methods:\n        - POST\n        - PUT\n        - DELETE\n      when:\n        - claim: "roles"\n          values:\n            - "admin"\n  selector:\n    matchLabels:\n      app: some-application\n'})})]}),(0,i.jsx)(o.A,{value:"skiperator",label:"Skiperator",children:(0,i.jsxs)(r.p,{children:["\ud83d\udea7 ",(0,i.jsx)(r.strong,{children:"UNDER UTVIKLING"})," \ud83d\udea7",(0,i.jsx)("br",{}),"\nSt\xf8tte for \xe5 sette opp token-validering og grovkornet autorisasjon via Skiperator-manifestet er under utvikling og er forel\xf8pig ikke tilgjengelig."]})})]})]})]})}function g(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(j,{...e})}):j(e)}}}]);