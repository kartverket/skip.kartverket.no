"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[5184],{28453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>l});var d=r(96540);const n={},i=d.createContext(n);function t(e){const s=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),d.createElement(i.Provider,{value:s},e.children)}},44019:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>x,frontMatter:()=>t,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"applikasjon-utrulling/skipctl/manifests","title":"Manifester","description":"Her har du en oversikt over ulike kommandoer som kan hjelpe n\xe5r du jobber med skiperator manifester i ditt apps-repo.","source":"@site/docs/03-applikasjon-utrulling/05-skipctl/02-manifests.md","sourceDirName":"03-applikasjon-utrulling/05-skipctl","slug":"/applikasjon-utrulling/skipctl/manifests","permalink":"/docs/applikasjon-utrulling/skipctl/manifests","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/05-skipctl/02-manifests.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kom i gang","permalink":"/docs/applikasjon-utrulling/skipctl/get-started"},"next":{"title":"Nettverkstesting","permalink":"/docs/applikasjon-utrulling/skipctl/network-troubleshooting"}}');var n=r(74848),i=r(28453);const t={},l="Manifester",c={},h=[{value:"Globalt",id:"globalt",level:2},{value:"Diff",id:"diff",level:2},{value:"Validate",id:"validate",level:2},{value:"Render",id:"render",level:2},{value:"Format",id:"format",level:2},{value:"Schemas",id:"schemas",level:2}];function j(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"manifester",children:"Manifester"})}),"\n",(0,n.jsx)(s.p,{children:"Her har du en oversikt over ulike kommandoer som kan hjelpe n\xe5r du jobber med skiperator manifester i ditt apps-repo.\nKommandoene skal gj\xf8re lokal utvikling enklere, men de kan ogs\xe5 brukes i github workflows."}),"\n",(0,n.jsx)(s.h2,{id:"globalt",children:"Globalt"}),"\n",(0,n.jsx)(s.p,{children:"Felles for alle manifest-kommandoer."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Flagg"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Flagg"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Standardverdi"}),(0,n.jsx)(s.th,{children:"Tillatte verdier"}),(0,n.jsx)(s.th,{children:"Effekt"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"--output"}),", ",(0,n.jsx)(s.code,{children:"-o"})]}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"text"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"text"}),", ",(0,n.jsx)(s.code,{children:"json"})]}),(0,n.jsx)(s.td,{children:"Velger loggformat for logger."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--debug"})}),(0,n.jsx)(s.td,{children:"bool"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"true"}),", ",(0,n.jsx)(s.code,{children:"false"})]}),(0,n.jsx)(s.td,{children:"Aktiverer debug-logging."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"--path"}),", ",(0,n.jsx)(s.code,{children:"-p"})]}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"."})}),(0,n.jsx)(s.td,{children:"Valgfri sti"}),(0,n.jsx)(s.td,{children:"Angir hvor manifestene leses fra."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--no-analytics"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"bool"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"true"})}),(0,n.jsx)(s.td,{children:"Ingen"}),(0,n.jsx)(s.td,{children:"Velge bort at anonym analysedata blir sendt"})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"diff",children:"Diff"}),"\n",(0,n.jsx)(s.p,{children:"Sammenligner lokale manifest mot en git ref."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff"})}),(0,n.jsxs)(s.td,{children:["Diff\u2019er mot ",(0,n.jsx)(s.code,{children:"HEAD"})," i pretty/full som default."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --diff-format patch --ref main"})}),(0,n.jsxs)(s.td,{children:["Patch-format, automatisk ",(0,n.jsx)(s.code,{children:"verbosity=chunk"}),"."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --verbosity minimal --diff-format json"})}),(0,n.jsx)(s.td,{children:"JSON-format, eksplisitt minimal verbosity."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --chunk-size 5"})}),(0,n.jsx)(s.td,{children:"\xd8ker kontekst til 5 linjer per side."})]})]})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Flagg"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Flagg"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Standardverdi"}),(0,n.jsx)(s.th,{children:"Tillatte verdier"}),(0,n.jsx)(s.th,{children:"Effekt"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--ref"})}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"HEAD"})}),(0,n.jsx)(s.td,{children:"Gyldig git-ref (commit SHA, branch)"}),(0,n.jsx)(s.td,{children:"Angir hvilken git-ref det diffes mot."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--verbosity"})}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"full"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"minimal"}),", ",(0,n.jsx)(s.code,{children:"chunk"}),", ",(0,n.jsx)(s.code,{children:"full"})]}),(0,n.jsx)(s.td,{children:"Styrer mengde kontekst i diff-output."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--chunk-size"})}),(0,n.jsx)(s.td,{children:"int"}),(0,n.jsx)(s.td,{children:"3"}),(0,n.jsx)(s.td,{children:"Heltall \u2265 0"}),(0,n.jsx)(s.td,{children:"Antall linjer kontekst over/under endret linje."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--diff-format"})}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"pretty"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"pretty"}),", ",(0,n.jsx)(s.code,{children:"patch"}),", ",(0,n.jsx)(s.code,{children:"json"})]}),(0,n.jsx)(s.td,{children:"Velger output-format for diff."})]})]})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsxs)(s.strong,{children:["Automatisk standard for ",(0,n.jsx)(s.code,{children:"--verbosity"})," basert p\xe5 ",(0,n.jsx)(s.code,{children:"--diff-format"})]})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"diff-format"}),(0,n.jsx)(s.th,{children:"verbosity"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"pretty"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"full"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"patch"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"chunk"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"json"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"full"})})]})]})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Verbosity niv\xe5"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"verbosity"}),(0,n.jsx)(s.th,{children:"Beskrivelse"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"minimal"})}),(0,n.jsx)(s.td,{children:"Kun endrede linjer"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"chunk"})}),(0,n.jsxs)(s.td,{children:["Endrede linjer med kontekst (3 linjer over/under som utgangspunkt; p\xe5virkes av ",(0,n.jsx)(s.code,{children:"--chunk-size"}),")"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"full"})}),(0,n.jsx)(s.td,{children:"Hele filen"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff"})}),(0,n.jsxs)(s.td,{children:["Diff\u2019er mot ",(0,n.jsx)(s.code,{children:"HEAD"})," i pretty/full som default."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --diff-format patch --ref main"})}),(0,n.jsxs)(s.td,{children:["Patch-format, automatisk ",(0,n.jsx)(s.code,{children:"verbosity=chunk"}),"."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --verbosity minimal --diff-format json"})}),(0,n.jsx)(s.td,{children:"JSON-format, eksplisitt minimal verbosity."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest diff --chunk-size 5"})}),(0,n.jsx)(s.td,{children:"\xd8ker kontekst til 5 linjer per side."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"validate",children:"Validate"}),"\n",(0,n.jsx)(s.p,{children:"Validerer manifestfiler mot kjente Kubernetes-skjema, oppsummerer resultater og rydder opp midlertidige filer."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest validate"})}),(0,n.jsx)(s.td,{children:"Validerer alle manifester i n\xe5v\xe6rende katalog."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest validate ./k8s"})}),(0,n.jsx)(s.td,{children:"Validerer alle manifester under ./k8s."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest validate ./k8s/validateme.jsonnet"})}),(0,n.jsx)(s.td,{children:"Validerer filen /validateme.jsonnet."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"cat manifest.jsonnet | skipctl manifest validate -"})}),(0,n.jsx)(s.td,{children:"Validerer manifest fra stdin."})]})]})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Output (oppsummering)"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Felt"}),(0,n.jsx)(s.th,{children:"Beskrivelse"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"totalResources"})}),(0,n.jsx)(s.td,{children:"Totalt antall ressurser prosessert"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"valid"})}),(0,n.jsx)(s.td,{children:"Antall gyldige"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"invalid"})}),(0,n.jsx)(s.td,{children:"Antall ugyldige"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"errors"})}),(0,n.jsx)(s.td,{children:"Antall feil under validering"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipped"})}),(0,n.jsx)(s.td,{children:"Antall hoppet over"})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"render",children:"Render"}),"\n",(0,n.jsx)(s.p,{children:"Renderer manifestfiler og skriver gyldig output til stdout. Feil g\xe5r til stderr."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest render"})}),(0,n.jsx)(s.td,{children:"Renderer alle manifester i n\xe5v\xe6rende katalog."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest render ./manifests"})}),(0,n.jsx)(s.td,{children:"Renderer alle manifester under ./manifests."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest render ./manifests/renderme.jsonnet"})}),(0,n.jsx)(s.td,{children:"Renderer filen /renderme.jsonnet`."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"cat manifest.jsonnet | skipctl manifest render -"})}),(0,n.jsx)(s.td,{children:"Leser manifest fra stdin og renderer til stdout."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"format",children:"Format"}),"\n",(0,n.jsx)(s.p,{children:"Formaterer manifestfiler i stedet (\u201cin place\u201d) eller fra stdin til stdout."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest format"})}),(0,n.jsx)(s.td,{children:"Formaterer alle manifester i n\xe5v\xe6rende katalog rekursivt."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest format ./k8s"})}),(0,n.jsx)(s.td,{children:"Formaterer alle manifester under ./k8s."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl manifest format ./k8s/formatme.jsonnet"})}),(0,n.jsx)(s.td,{children:"Formaterer filen ./formatme.jsonnet."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"cat manifest.jsonnet | skipctl manifest format -"})}),(0,n.jsx)(s.td,{children:"Leser fra stdin, skriver formatert til stdout."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"schemas",children:"Schemas"}),"\n",(0,n.jsx)(s.p,{children:"Lister ut alle st\xf8ttede skjemaer som kan brukes for validering."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Eksempel bruk"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Kommando"}),(0,n.jsx)(s.th,{children:"Handling"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"skipctl schemas"})}),(0,n.jsx)(s.td,{children:"Lister ut alle st\xf8ttede skjemaer."})]})})]})]})}function x(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(j,{...e})}):j(e)}}}]);