"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[5680],{89519:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>k,frontMatter:()=>a,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"observability/metrikker","title":"Metrikker","description":"SKIP bruker Grafana Mimir for \xe5 lagre og gj\xf8re sp\xf8rringer p\xe5 metrikker. Disse lagres i 60 dager.","source":"@site/docs/07-observability/metrikker.md","sourceDirName":"07-observability","slug":"/observability/metrikker","permalink":"/docs/observability/metrikker","draft":false,"unlisted":false,"editUrl":"https://github.com/kartverket/skip-docs/edit/main/docs/07-observability/metrikker.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Grafana","permalink":"/docs/observability/grafana"},"next":{"title":"Distributed tracing with Tempo","permalink":"/docs/observability/distributed-tracing-with-tempo"}}');var t=n(74848),s=n(28453);const a={sidebar_position:1},o="Metrikker",l={},p=[{value:"Eksponer metrikker fra applikasjonen",id:"eksponer-metrikker-fra-applikasjonen",level:2},{value:"Utforsk metrikker i Metrics Explore",id:"utforsk-metrikker-i-metrics-explore",level:2},{value:"Lag sp\xf8rringer i Explore",id:"lag-sp\xf8rringer-i-explore",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"metrikker",children:"Metrikker"})}),"\n",(0,t.jsx)(r.p,{children:"SKIP bruker Grafana Mimir for \xe5 lagre og gj\xf8re sp\xf8rringer p\xe5 metrikker. Disse lagres i 60 dager."}),"\n",(0,t.jsx)(r.h2,{id:"eksponer-metrikker-fra-applikasjonen",children:"Eksponer metrikker fra applikasjonen"}),"\n",(0,t.jsx)(r.p,{children:"For \xe5 kunne eksponere metrikker fra applikasjonen m\xe5 du gj\xf8re f\xf8lgende:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Eksponer metrikker p\xe5 et eget endepunkt, f.eks. ",(0,t.jsx)(r.code,{children:"/metrics"}),". Det beste her er ogs\xe5 \xe5 eksponere metrikker p\xe5 en egen port for \xe5 unng\xe5 at endepunktet uheldigvis eksponeres eksternt. Om du ikke kan gj\xf8re dette, ta kontakt med SKIP for \xe5 sammen s\xf8rge for at data ikke eksponeres eksternt."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Endre ",(0,t.jsx)(r.code,{children:"Skiperator"}),"-manifestet ved \xe5 legge til en ekstra port og tillate innhenting av metrikker;"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'apiVersion: skiperator.kartverket.no/v1alpha1\nkind: Application\nmetadata:\n  name: super-app\n  namespace: team-foo-main\nspec:\n  image: "kartverket/example"\n  port: 8080\n\n  # Definer egen port\n  additionalPorts:\n    - name: management\n      port: 8181\n      protocol: TCP\n\n  # Skru p\xe5 innsamling av metrikker fra den nye porten\n  prometheus:\n    port: management\n    path: "/metrics"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"utforsk-metrikker-i-metrics-explore",children:"Utforsk metrikker i Metrics Explore"}),"\n",(0,t.jsxs)(r.p,{children:["For \xe5 finne ut hvilke metrikker du har tilgjengelig for applikasjonen, sjekk ut ",(0,t.jsx)(r.a,{href:"https://monitoring.kartverket.cloud/explore/metrics",children:"Metrics Explore"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Metrics Explore",src:n(57241).A+"",width:"3103",height:"1048"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Bruk labels for \xe5 filtrere p\xe5 f.eks. ",(0,t.jsx)(r.code,{children:"namespace"}),", ",(0,t.jsx)(r.code,{children:"application"})," eller ",(0,t.jsx)(r.code,{children:"container"})," for \xe5 finne metrikker som er interessante, og s\xf8k p\xe5 metrikknavn i feltet."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:'Du kan velge "Select" for \xe5 se videre p\xe5 en enkeltmetrikk, og trykke p\xe5 kompassikonent for \xe5 g\xe5 videre til Explore for \xe5 gj\xf8re metrikksp\xf8rringen mer n\xf8yaktig.'}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Se ogs\xe5:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\ud83d\udcda ",(0,t.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/explore/simplified-exploration/metrics/",children:"Grafanas egen dokumentasjon"})," beskriver alle detaljene."]}),"\n",(0,t.jsxs)(r.li,{children:["\ud83c\udfac Grafana har ogs\xe5 en ",(0,t.jsx)(r.a,{href:"https://www.youtube.com/watch?v=UWTsYTe5Gy4",children:"demovideo"}),"."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"lag-sp\xf8rringer-i-explore",children:"Lag sp\xf8rringer i Explore"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"https://monitoring.kartverket.cloud/explore",children:"Explore"})," lar deg videreforedle sp\xf8rringer, eksperimentere og grave raskt."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Grafana Explore mode",src:n(18833).A+"",width:"1832",height:"922"})}),"\n",(0,t.jsx)(r.p,{children:"Her kan du gj\xf8re sp\xf8rringer i split screen fra ulike datakilder, korrelere data fra b\xe5de logger, metrikker og traces, samt legge ferdige sp\xf8rringer som paneler i dashboards."}),"\n",(0,t.jsx)(r.p,{children:"Se ogs\xe5:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\ud83d\udcda ",(0,t.jsx)(r.a,{href:"https://grafana.com/docs/grafana/latest/explore/get-started-with-explore/",children:"Grafanas dokumentasjon"})]}),"\n"]})]})}function k(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},18833:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/grafana-explore-6b96d67527612179aea03fbc3eb4e86c.png"},57241:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/grafana-metrics-explore-d4093c3aaeaf8bcd92b82b60b0291c3e.png"},28453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var i=n(96540);const t={},s=i.createContext(t);function a(e){const r=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:r},e.children)}}}]);