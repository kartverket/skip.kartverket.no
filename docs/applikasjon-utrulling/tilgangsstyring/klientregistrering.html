<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-applikasjon-utrulling/tilgangsstyring/klientregistrering" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Klientregistrering | SKIP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Klientregistrering | SKIP"><meta data-rh="true" name="description" content="Klientregistrering er en sentral del av tilgangsstyring med OAuth 2.0 og OIDC. Når du registrerer en klient, får applikasjonen"><meta data-rh="true" property="og:description" content="Klientregistrering er en sentral del av tilgangsstyring med OAuth 2.0 og OIDC. Når du registrerer en klient, får applikasjonen"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering"><link data-rh="true" rel="alternate" href="https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering" hreflang="en"><link data-rh="true" rel="alternate" href="https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"🚀 Applikasjon & utrulling","item":"https://skip.kartverket.no/docs/applikasjon-utrulling/"},{"@type":"ListItem","position":2,"name":"🔐 Tilgangsstyring på SKIP","item":"https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/"},{"@type":"ListItem","position":3,"name":"Klientregistrering","item":"https://skip.kartverket.no/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SKIP RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SKIP Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="SKIP JSON Feed">







<script src="https://platform.twitter.com/widgets.js"></script><link rel="stylesheet" href="/assets/css/styles.5c884a55.css">
<script src="/assets/js/runtime~main.513b0889.js" defer="defer"></script>
<script src="/assets/js/main.9ce3ec7e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/skip.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/skip.png" alt="SKIP" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/skip.png" alt="SKIP" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SKIP</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/blog">Tech Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://kartverket.atlassian.net/wiki/spaces/SIK/overview" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sikkerhetshåndboka<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/kartverket" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Velkommen til SKIP! 🎉</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/kom-i-gang">💡 Kom i gang</a><button aria-label="Expand sidebar category &#x27;💡 Kom i gang&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/applikasjon-utrulling">🚀 Applikasjon &amp; utrulling</a><button aria-label="Collapse sidebar category &#x27;🚀 Applikasjon &amp; utrulling&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/applikasjon-utrulling/oppsett-og-bruk-av-secret-manager">Oppsett og bruk av Google Secret Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/applikasjon-utrulling/sjekkliste-før-internett-eksponering">Sjekkliste før internetteksponering</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/applikasjon-utrulling/skiperator">🤖 Skiperator</a><button aria-label="Expand sidebar category &#x27;🤖 Skiperator&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/applikasjon-utrulling/maintenance-of-apps">Vedlikehold av applikasjoner</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/applikasjon-utrulling/tilgangsstyring">🔐 Tilgangsstyring på SKIP</a><button aria-label="Collapse sidebar category &#x27;🔐 Tilgangsstyring på SKIP&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/applikasjon-utrulling/tilgangsstyring/klientregistrering">Klientregistrering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/applikasjon-utrulling/tilgangsstyring/token-validering">Token-validering og grovkornet autorisasjon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/applikasjon-utrulling/tilgangsstyring/auto-login">Auto-login</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/applikasjon-utrulling/tilgangsstyring/ztoperator">Ztoperator</a><button aria-label="Expand sidebar category &#x27;Ztoperator&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/applikasjon-utrulling/skipctl">🎮 skipctl</a><button aria-label="Expand sidebar category &#x27;🎮 skipctl&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/applikasjon-utrulling/github-actions">🧰 GitHub Actions</a><button aria-label="Expand sidebar category &#x27;🧰 GitHub Actions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/applikasjon-utrulling/argo-cd">🚀 Argo CD</a><button aria-label="Expand sidebar category &#x27;🚀 Argo CD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/jobber-skip">📅 Jobber på SKIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/trafikkstyring">🚦 Trafikkstyring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/lagring">💾 Lagring</a><button aria-label="Expand sidebar category &#x27;💾 Lagring&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/observability">🔭 Observabilitet</a><button aria-label="Expand sidebar category &#x27;🔭 Observabilitet&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/applikasjon-utrulling"><span>🚀 Applikasjon &amp; utrulling</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/applikasjon-utrulling/tilgangsstyring"><span>🔐 Tilgangsstyring på SKIP</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Klientregistrering</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Klientregistrering</h1></header>
<p>Klientregistrering er en sentral del av tilgangsstyring med OAuth 2.0 og OIDC. Når du registrerer en klient, får applikasjonen
sin egen identitet og kan autentisere seg mot de valgte identitetstilbyderne.</p>
<p>Vi anbefaler å ha et bevisst forhold til hvilke tjenester som skal dele samme <code>audience</code>.
Det er ofte mer hensiktsmessig å velge en restriktiv tilnærming, der hver tjeneste får sin egen klientregistrering,
fremfor å gruppere flere tjenester under én felles klient. Dette gir bedre kontroll over tilgangsstyring og sikkerhet.</p>
<p>Felles for alle identitetstilbydere på SKIP er at klientregistrering støttes fra plattformen ved hjelp av Kubernetes-operatorer.</p>
<ul>
<li><a href="https://github.com/nais/digdirator" target="_blank" rel="noopener noreferrer"><strong>Digdirator</strong></a> håndterer klientregistrering mot Digdir sine fellesløsninger: <strong>ID-porten</strong> og <strong>Maskinporten</strong>.</li>
<li><a href="https://github.com/nais/azurerator" target="_blank" rel="noopener noreferrer"><strong>Azurerator</strong></a> håndterer klientregistrering mot <strong>Microsoft Entra ID</strong> (tidligere kjent som Azure Active Directory).</li>
</ul>
<p>Når man skal registrere en klient mot en eller flere av identitetstilbyderne, har man tre valg.
Man kan benytte seg av <a href="/docs/applikasjon-utrulling/skiperator">Skiperator</a> dersom klientregistreringen hører til en SKIP-applikasjon.
Alternativt kan man bruke CRD-ene fra <a href="https://github.com/nais/digdirator" target="_blank" rel="noopener noreferrer">Digdirator</a> og <a href="https://github.com/nais/azurerator" target="_blank" rel="noopener noreferrer">Azurerator</a> direkte.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Skiperator</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Digdirator / Azurerator</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Skiperator tilbyr et forenklet API i CRD-en <code>Application</code> for å registrere klienter mot <strong>ID-porten</strong> og <strong>Maskinporten</strong>.
Det jobbes også med et forenklet API for å registrere klienter mot <strong>Entra ID</strong>, men dette er ikke helt klart ennå.</p><p>Fordelen med å benytte Skiperator for klientregistrering er at hemmelighetene som Digdirator oppretter blir automatisk injisert som miljøvariabler i deploymenten til applikasjonen.
Dette gjør at applikasjonen enkelt kan få tilgang til hemmelighetene i et kjøretidsmiljø.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Entra ID</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">ID-porten</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Maskinporten</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-under-utvikling-">🚧 UNDER UTVIKLING 🚧<a href="#-under-utvikling-" class="hash-link" aria-label="Direct link to 🚧 UNDER UTVIKLING 🚧" title="Direct link to 🚧 UNDER UTVIKLING 🚧">​</a></h3><p>Opprettelse av app-registrering i Entra ID via spesifikasjonen til <code>Application</code> jobbes med, men er ikke klart helt ennå.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><a href="/docs/applikasjon-utrulling/skiperator">Skiperator</a> tilbyr støtte for å sette opp en klientintegrasjon mot ID-porten
via spesifikasjonen til <code>Application</code>.</p><p>Eksempelet under setter opp en integrasjon mot ID-porten med følgende konfigurasjon.</p><ul>
<li>Integrasjonstypen settes til <code>api_klient</code>.</li>
<li>Redirect path settes til <code>/oauth/callback</code>.</li>
<li>Scopene <code>openid</code> og <code>profile</code> settes.</li>
</ul><p>Resten av feltene som støttes kan du finne i Skiperator sin <a href="/docs/applikasjon-utrulling/skiperator/api-docs">API-dokumentasjon</a>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> skiperator.kartverket.no/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tilgangsstyring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">idporten</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">integrationType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;api_klient&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">redirectPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/oauth/callback&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;profile&quot;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><a href="/docs/applikasjon-utrulling/skiperator">Skiperator</a> tilbyr støtte for å sette opp en klientintegrasjon mot Maskinporten
via spesifikasjonen til <code>Application</code>.</p><p>Eksempelet under setter opp en integrasjon mot Maskinporten med følgende konfigurasjon.</p><ul>
<li>Scopet <code>innsyn</code> opprettes og organisasjonene HUSLØS HURTIG TIGER AS og KOSTBAR LEKKER APE AS
settes som godkjente konsumenter av dette scopet.</li>
</ul><p>Resten av feltene som støttes kan du finne i Skiperator sin <a href="/docs/applikasjon-utrulling/skiperator/api-docs">API-dokumentasjon</a>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> skiperator.kartverket.no/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tilgangsstyring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">maskinporten</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">exposes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;innsyn&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">product</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Produktområde&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">consumers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HUSLØS HURTIG TIGER AS</span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">orgno</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;987654321&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KOSTBAR LEKKER APE AS</span><br></span><span class="token-line code-block-diff-add-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">orgno</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123456789&quot;</span><br></span></code></pre></div></div></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Hvis en ønsker å opprette en klientintegrasjon uten å knytte den til en Skiperator-applikasjon, kan man benytte seg av CRD-ene som Digdirator og Azurerator introduserer direkte.
Dette gjør det mulig å opprette og vedlikeholde klientregistreringen uavhengig av en spesifikk applikasjon i Skiperator.</p><p>Fordelen med denne tilnærmingen er at man får full kontroll over konfigurasjonen og stor fleksibilitet ved å frikoble registreringen fra applikasjonen.
Ulempen er at det krever mer innsikt i oppsettet, og at <a href="/docs/applikasjon-utrulling/skiperator/configuring#environment-variables">injisering av hemmeligheter i deploymenten må håndteres separat</a>.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Entra ID</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">ID-porten</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Maskinporten</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>En kan registrere en klient mot Entra ID ved å opprette en <code>AzureAdApplication</code>-ressurs.
Registreringer opprettet med Azureator følger følgende navnekonvensjon basert på <code>AzureAdApplication</code>-manifestet: <code>cluster:namespace:name</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spesifikasjonen-til-azureadapplication">Spesifikasjonen til <code>AzureAdApplication</code><a href="#spesifikasjonen-til-azureadapplication" class="hash-link" aria-label="Direct link to spesifikasjonen-til-azureadapplication" title="Direct link to spesifikasjonen-til-azureadapplication">​</a></h3><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>spec</strong> <em>(object, required)</em> – Spesifikasjon til <code>AzureAdApplication</code></summary><div><div class="collapsibleContent_i85q"><p><strong>allowAllUsers</strong> <em>(bool, required)</em> – Bestemmer om alle brukere i tenanten som Azurerator er konfigurert mot skal få tilgang.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>claims</strong> <em>(object, optional)</em> – Definerer konfigurasjon av claims som inkluderes i tokenene som returneres til Entra ID applikasjonen.</summary><div><div class="collapsibleContent_i85q"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>groups</strong> <em>([]object, optional)</em> – En liste over Entra ID gruppe ID-er som skal inkluderes i <code>groups</code>-claimet i tokenene utstedt av Entra ID. Dette tildeler også grupper til app-registreringen brukt for tilgangskontroll. Kun direkte medlemmer av gruppene får tilgang.</summary><div><div class="collapsibleContent_i85q"><p><strong>id</strong> <em>(string, required)</em> – Objekt-ID-en (OID) til en Entra ID-gruppe.</p></div></div></details></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>replyUrls</strong> <em>([]object, required)</em> – URL-er som applikasjonen godtar som svaradresser etter autentisering.</summary><div><div class="collapsibleContent_i85q"><p><strong>url</strong> <em>(string, required)</em> – En godkjent svaradresse (reply URL) for applikasjonen.</p></div></div></details><p><strong>logoutUrl</strong> <em>(string, optional)</em> – URL-en brukere blir omdirigert til når de logger ut av applikasjonen..</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>preAuthorizedApplications</strong> <em>([]object, optional)</em> – Definerer andre app-registreringer som er forhåndsautorisert til å få tilgang til denne applikasjonen. Her refereres det til tilsvarende <code>AzureAdApplication</code>.</summary><div><div class="collapsibleContent_i85q"><p><strong>application</strong> <em>(string, required)</em> – Navnet på den forhåndsgodkjente applikasjonen.</p><p><strong>namespace</strong> <em>(string, required)</em> – Namespacet hvor den forhåndsgodkjente applikasjonen befinner seg.</p><p><strong>cluster</strong> <em>(string, required)</em> – Clusteret hvor den forhåndsgodkjente applikasjonen befinner seg.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>permissions</strong> <em>(object, optional)</em> – Spesifiserer hvilke claims den forhåndsautoriserte applikasjonen har.</summary><div><div class="collapsibleContent_i85q"><p><strong>scopes</strong> <em>([]string, optional)</em> – Liste med egendefinerte tilgangs-scopes tildelt til den forhåndsautoriserte appliaksjonen.</p><p><strong>roles</strong> <em>([]string, optional)</em> – Liste med egendefinerte tilgangs-roller tildelt til den forhåndsautoriserte appliaksjonen.</p></div></div></details></div></div></details><p><strong>secretName</strong> <em>(string, required)</em> – Navnet på den resulterende <code>Secret</code>-ressursen som vil bli opprettet.</p><p><strong>secretKeyPrefix</strong> <em>(string, optional)</em> – Et valgfritt brukerdefinert prefiks som brukes på nøklene i den genererte hemmeligheten, og erstatter standardprefikset (AZURE).</p><p><strong>secretProtected</strong> <em>(bool, optional)</em> – Angir om hemmeligheten skal tilbaketrekkes selv når den ikke er i bruk.</p><p><strong>singlePageApplication</strong> <em>(bool, optional)</em> – Angir om denne Entra ID-applikasjonen skal registreres som en single-page-application for bruk i klient-side-applikasjoner uten tilgang til hemmeligheter.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eksempel">Eksempel<a href="#eksempel" class="hash-link" aria-label="Direct link to Eksempel" title="Direct link to Eksempel">​</a></h3><p>Følgende eksempel oppretter app-registreringen <code>atgcp1-sandbox:tilgangsstyring-main:test-app</code>.
Den gir kun tilgang til direkte medlemmer av gruppene med objekt-ID <code>2720e397-081d-4d9b-852e-0d81f45a304f</code> eller <code>c3c94454-aefc-44f9-9076-58ea47547941</code>.
Den forhåndsautoriserer også Entra ID klienten <code>atgcp1-dev:other-namespace:other-app</code>.
Når registrering er fullført vil Azurerator opprette Kubernetes-hemmeligheten <code>entraid-secret</code> i namespacet <code>tilgangsstyring-main</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nais.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AzureAdApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tilgangsstyring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allowAllUsers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">claims</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2720e397</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">081d</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4d9b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">852e</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0d81f45a304f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> c3c94454</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aefc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">44f9</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">9076</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">58ea47547941</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replyUrls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app.atgcp1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sandbox.kartverket</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">intern.cloud/oauth2/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preAuthorizedApplications</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">application</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> other</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> other</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cluster</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> atgcp1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>En kan registrere en klient mot ID-porten ved å opprette en <code>IDPortenClient</code>-ressurs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spesifikasjonen-til-idportenclient">Spesifikasjonen til <code>IDPortenClient</code><a href="#spesifikasjonen-til-idportenclient" class="hash-link" aria-label="Direct link to spesifikasjonen-til-idportenclient" title="Direct link to spesifikasjonen-til-idportenclient">​</a></h3><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>spec</strong> <em>(object, required)</em> – Spesifikasjon til <code>IDPortenClient</code></summary><div><div class="collapsibleContent_i85q"><p><strong>secretName</strong> <em>(string, required)</em> – Navnet på den resulterende <code>Secret</code>-ressursen som vil bli opprettet.</p><p><strong>integrationType</strong> <em>(string, optional)</em> – Definerer integrasjonstypen for klienten. Bestemmer hvilke scopes som kan registreres. Kan ikke endres etter opprettelse. Tillatte verdier: <code>krr</code>, <code>idporten</code>, <code>api_klient</code>.</p><p><strong>scopes</strong> <em>([]string, optional)</em> – Definerer OAuth2-scopes for klienten. Begrenset basert på <code>integrationType</code>.</p><p><strong>frontchannelLogoutURI</strong> <em>(string, optional)</em> – URL som ID-porten omdirigere til når en utlogging utløses av en annen applikasjon.</p><p><strong>postLogoutRedirectURIs</strong> <em>([]string, optional)</em> – Liste over gyldige URI-er hvor ID-porten kan omdirigere etter utlogging.</p><p><strong>redirectURIs</strong> <em>([]string], optional)</em> – Liste over redirect URI-er som skal registreres hos DigDir.</p><p><strong>accessTokenLifetime</strong> <em>(integer, optional)</em> – Maksimal levetid i sekunder for <code>access_token</code> som returneres fra ID-porten. Min: 1, maks: 3600.</p><p><strong>clientURI</strong> <em>(string, optional)</em> – URL til klienten brukt av DigDir når en &#x27;tilbake&#x27;-knapp vises eller ved feil.</p><p><strong>clientName</strong> <em>(string, optional)</em> – Navnet på klienten registrert hos DigDir. Vises under innlogging for brukerorienterte flyter.</p><p><strong>sessionLifetime</strong> <em>(integer, optional)</em> – Maksimal øktlevetid i sekunder for en innlogget sluttbruker for denne klienten. Min: 3600, maks: 28800.</p><p><strong>ssoDisabled</strong> <em>(bool, optional)</em> – Kontrollerer Single Sign-On-oppsettet for klienten. Hvis satt til <code>true</code>, er SSO deaktivert.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eksempel-1">Eksempel<a href="#eksempel-1" class="hash-link" aria-label="Direct link to Eksempel" title="Direct link to Eksempel">​</a></h3><p>Følgende eksempel registrerer en klientintegrasjon mot ID-porten av typen <code>idporten</code>.
Når registrering er fullført vil Digdirator opprette Kubernetes-hemmeligheten <code>idporten-secret</code> i namespacet <code>tilgangsstyring-main</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nais.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IDPortenClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tilgansstyring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clientName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clientURI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app.atgcp1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sandbox.kartverket</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">intern.cloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frontchannelLogoutURI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app.atgcp1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sandbox.kartverket</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">intern.cloud/oauth2/logout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">integrationType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> idporten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redirectURIs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app.atgcp1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sandbox.kartverket</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">intern.cloud/oauth2/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> openid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> idporten</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>En kan registrere en klient mot Maskinporten ved å opprette en <code>MaskinportenClient</code>-ressurs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spesifikasjonen-til-maskinportenclient">Spesifikasjonen til <code>MaskinportenClient</code><a href="#spesifikasjonen-til-maskinportenclient" class="hash-link" aria-label="Direct link to spesifikasjonen-til-maskinportenclient" title="Direct link to spesifikasjonen-til-maskinportenclient">​</a></h3><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>spec</strong> <em>(object, required)</em> – Spesifikasjon til <code>MaskinportenClient</code></summary><div><div class="collapsibleContent_i85q"><p><strong>secretName</strong> <em>(string, required)</em> – Navnet på den resulterende <code>Secret</code>-ressursen som vil bli opprettet.</p><p><strong>clientName</strong> <em>(string, optional)</em> – Navnet på klienten registrert hos DigDir. Vises under innlogging for brukerorienterte flyter, og er ellers en lesbar måte å skille mellom klienter i DigDirs selvbetjeningsportal.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>scopes</strong> <em>([]object, optional)</em> – Definerer hvilke scopes applikasjonen konsumerer og hvilke den eksponerer.</summary><div><div class="collapsibleContent_i85q"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>consumes</strong> <em>([]object, optional)</em> – En liste med scopes din klient kan forespørre tilgang til.</summary><div><div class="collapsibleContent_i85q"><p><strong>name</strong> <em>(string, required)</em> – Scopene som applikasjonen konsumerer for å få tilgang til en ekstern organisasjons API.</p></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>exposes</strong> <em>([]object, optional)</em> – En liste med scopes din applikasjon ønsker å eksponere til andre organisasjoner hvor tilgang er basert på organisasjonsnummer.</summary><div><div class="collapsibleContent_i85q"><p><strong>enabled</strong> <em>(bool, required)</em> – Hvis <code>true</code>, så er detkonfigurerte scopet tilgjengelig for bruk og til å bli konsumert av organisasjoner som har fått godkjent tilgang.</p><p><strong>name</strong> <em>(string, påkrevd)</em> – Det faktiske sub-scopet kombinert med <code>product</code>.</p><p><strong>product</strong> <em>(string, valgfritt)</em> – Produktområde tilknyttet scopet. Dette vil inkluderes i resultatet: <code>org:&lt;product&gt;&lt;name&gt;</code>.</p><p><strong>atMaxAge</strong> <em>(int, valgfritt)</em> – Maksimal tillatt levetid for token i sekunder. Defaulter til 30 sekunder.</p><p><strong>allowedIntegrations</strong> <em>([]string, valgfritt)</em> – Liste over tillatte integrasjonstyper for dette eksponerte omfanget. Defaulter til <code>maskinporten</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>consumers</strong> <em>([]object, valgfritt)</em> – Liste over eksterne konsumenter som har tilgang til å konsumere dette scopet og som kan forespørre <code>access_token</code>.</summary><div><div class="collapsibleContent_i85q"><p><strong>orgno</strong> – Det eksterne organisasjonsnummeret.</p><p><strong>name</strong> – Beskrivende felt brukt utelukkende for oversikt.</p></div></div></details><p><strong>accessibleForAll</strong> – Tillater alle organisasjoner å få tilgang til scopet.</p><p><strong>delegationSource</strong> – Delegasjonskilde for scopet. Default er tomt, noe som betyr at ingen delegasjon er tillatt.</p><p><strong>separator</strong> – Tegnet som skiller <code>product</code> og <code>name</code> i det endelige scopet. Resultatet blir da <code>&lt;prefix&gt;:&lt;product&gt;&lt;separator&gt;&lt;name&gt;</code>. Defaulter til <code>:</code> med mindre <code>name</code> inneholder <code>/</code>, i det tilfellet defaultes det til <code>/</code>.</p><p><strong>visibility</strong> – Kontrollerer synligheten til scopet. Offentlige scopes er synlige for alle, mens private scopes kun er synlige for organisasjonen som eier scopet og organisasjoner som har fått tilgang som konsumenter. Defaulter til <code>public</code>. Tillatte verdier: <code>private</code>, <code>public</code>.</p></div></div></details></div></div></details></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eksempel-2">Eksempel<a href="#eksempel-2" class="hash-link" aria-label="Direct link to Eksempel" title="Direct link to Eksempel">​</a></h3><p>Følgende eksempel registrerer en klientintegrasjon mot Maskinporten og definerer scopet <code>innsyn</code>.
Den setter HUSLØS HURTIG TIGER AS og KOSTBAR LEKKER APE AS som godkjente konsumenter av scopet.
Når registrering er fullført vil Digdirator opprette Kubernetes-hemmeligheten <code>maskinporten-secret</code> i namespacet <code>tilgangsstyring-main</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nais.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MaskinportenClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tilgangsstyring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clientName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> innsikt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secure</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deltashare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exposes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;innsyn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">product</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Produktområde&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">consumers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HUSLØS HURTIG TIGER AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">orgno</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;987654321&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KOSTBAR LEKKER APE AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">orgno</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123456789&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> maskinporten</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span></code></pre></div></div></div></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kartverket/skip-docs/edit/main/docs/03-applikasjon-utrulling/04-tilgangsstyring/01-klientregistrering.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/applikasjon-utrulling/tilgangsstyring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">🔐 Tilgangsstyring på SKIP</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/applikasjon-utrulling/tilgangsstyring/token-validering"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Token-validering og grovkornet autorisasjon</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-under-utvikling-" class="table-of-contents__link toc-highlight">🚧 UNDER UTVIKLING 🚧</a></li><li><a href="#spesifikasjonen-til-azureadapplication" class="table-of-contents__link toc-highlight">Spesifikasjonen til <code>AzureAdApplication</code></a></li><li><a href="#eksempel" class="table-of-contents__link toc-highlight">Eksempel</a></li><li><a href="#spesifikasjonen-til-idportenclient" class="table-of-contents__link toc-highlight">Spesifikasjonen til <code>IDPortenClient</code></a></li><li><a href="#eksempel-1" class="table-of-contents__link toc-highlight">Eksempel</a></li><li><a href="#spesifikasjonen-til-maskinportenclient" class="table-of-contents__link toc-highlight">Spesifikasjonen til <code>MaskinportenClient</code></a></li><li><a href="#eksempel-2" class="table-of-contents__link toc-highlight">Eksempel</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Lenker</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://uustatus.no/nb/erklaringer/publisert/7148395f-f0cf-4019-9c45-3b83d79fd544" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tilgjengelighetserklæring<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Statens Kartverk</div></div></div></footer></div>
</body>
</html>